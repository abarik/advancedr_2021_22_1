<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 5 Tidyverse R | Advanced R</title>
<meta name="author" content="Kálmán Abari">
<meta name="description" content="Hadley Wickham and Garrett Grolemund, in their excellent and freely available book R for Data Science, promote the concept of “tidy data.” The Tidyverse collection of R packages attempt to realize...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 5 Tidyverse R | Advanced R">
<meta property="og:type" content="book">
<meta property="og:description" content="Hadley Wickham and Garrett Grolemund, in their excellent and freely available book R for Data Science, promote the concept of “tidy data.” The Tidyverse collection of R packages attempt to realize...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 5 Tidyverse R | Advanced R">
<meta name="twitter:description" content="Hadley Wickham and Garrett Grolemund, in their excellent and freely available book R for Data Science, promote the concept of “tidy data.” The Tidyverse collection of R packages attempt to realize...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.0/transition.js"></script><script src="libs/bs3compat-0.3.0/tabs.js"></script><script src="libs/bs3compat-0.3.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet">
<script src="libs/str_view-binding-1.4.0/str_view.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Advanced R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="warm-up-exercise.html"><span class="header-section-number">2</span> Warm-up exercise</a></li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">3</span> RMarkdown</a></li>
<li><a class="" href="advanced-data-manipulation.html"><span class="header-section-number">4</span> Advanced data manipulation</a></li>
<li><a class="active" href="tidyverse-r.html"><span class="header-section-number">5</span> Tidyverse R</a></li>
<li><a class="" href="modern-graphics.html"><span class="header-section-number">6</span> Modern graphics</a></li>
<li><a class="" href="bioconductor.html"><span class="header-section-number">7</span> Bioconductor</a></li>
<li><a class="" href="rna-seq-an-example.html"><span class="header-section-number">8</span> RNA-Seq (an example)</a></li>
<li><a class="" href="summary.html"><span class="header-section-number">9</span> Summary</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/abarik/advancedr_2021_22_1">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="tidyverse-r" class="section level1" number="5">
<h1>
<span class="header-section-number">5</span> Tidyverse R<a class="anchor" aria-label="anchor" href="#tidyverse-r"><i class="fas fa-link"></i></a>
</h1>
<p>Hadley Wickham and Garrett Grolemund, in their excellent and freely available
book <a href="https://r4ds.had.co.nz/" target="_blank">R for Data Science</a>, promote the concept of “tidy data.” The Tidyverse collection of R packages attempt to realize this concept in concrete libraries.</p>
<p>In brief, tidy data carefully separates variables (the columns of a table, also called
features or fields) from observations (the rows of a table, also called samples). At
the intersection of these two, we find values, one data item (datum) in each cell.
Unfortunately, the data we encounter is often not arranged in this useful way, and
it requires normalization. In particular, what are really values are often represented
either as columns or as rows instead. To demonstrate what this means, let us
consider an example (a small elementary school class).</p>
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="co"># inline reading, tibble version</span>
<span class="va">students</span> <span class="op">&lt;-</span> <span class="fu">tribble</span><span class="op">(</span>
  <span class="op">~</span><span class="st">'Last Name'</span>, <span class="op">~</span><span class="st">'First Name'</span>, <span class="op">~</span><span class="st">'4th Grade'</span>, <span class="op">~</span><span class="st">'5th Grade'</span>, <span class="op">~</span><span class="st">'6th Grade'</span>,
  <span class="st">"Johnson"</span>, <span class="st">"Mia"</span>, <span class="st">"A"</span>, <span class="st">"B+"</span>, <span class="st">"A-"</span>,
  <span class="st">"Lopez"</span>, <span class="st">"Liam"</span>, <span class="st">"B"</span>, <span class="st">"B"</span>, <span class="st">"A+"</span>,
  <span class="st">"Lee"</span>, <span class="st">"Isabella"</span>, <span class="st">"C"</span>, <span class="st">"C-"</span>, <span class="st">"B-"</span>,
  <span class="st">"Fisher"</span>, <span class="st">"Mason"</span>, <span class="st">"B"</span>, <span class="st">"B-"</span>, <span class="st">"C+"</span>,
  <span class="st">"Gupta"</span>, <span class="st">"Olivia"</span>, <span class="st">"B"</span>, <span class="st">"A+"</span>, <span class="st">"A"</span>,
  <span class="st">"Robinson"</span>, <span class="st">"Sophia"</span>, <span class="st">"A+"</span>, <span class="st">"B-"</span>, <span class="st">"A"</span>
<span class="op">)</span>
<span class="va">students</span>
<span class="co">#&gt; # A tibble: 6 x 5</span>
<span class="co">#&gt;   `Last Name` `First Name` `4th Grade` `5th Grade`</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;      </span>
<span class="co">#&gt; 1 Johnson     Mia          A           B+         </span>
<span class="co">#&gt; 2 Lopez       Liam         B           B          </span>
<span class="co">#&gt; 3 Lee         Isabella     C           C-         </span>
<span class="co">#&gt; 4 Fisher      Mason        B           B-         </span>
<span class="co">#&gt; 5 Gupta       Olivia       B           A+         </span>
<span class="co">#&gt; 6 Robinson    Sophia       A+          B-         </span>
<span class="co">#&gt; # ... with 1 more variable: 6th Grade &lt;chr&gt;</span></code></pre></div>
<p>This view of the data is easy for humans to read. We can see trends in the scores
each student received over several years of education. Moreover, this format might
lend itself to useful visualizations fairly easily:</p>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Generic conversion of letter grades to numbers</span>
<span class="va">recodes.str</span> <span class="op">&lt;-</span> <span class="st">"'A+'=4.3;'A'=4;'A-'=3.7;'B+'=3.3;'B'=3;'B-'=2.7;'C+'=2.3;'C'= 2;'C-'=1.7"</span>
<span class="va">students</span><span class="op">$</span><span class="va">`4th Grade`</span> <span class="op">&lt;-</span> <span class="fu">car</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">students</span><span class="op">$</span><span class="va">`4th Grade`</span>, <span class="va">recodes.str</span><span class="op">)</span>
<span class="va">students</span><span class="op">$</span><span class="va">`5th Grade`</span> <span class="op">&lt;-</span> <span class="fu">car</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">students</span><span class="op">$</span><span class="va">`5th Grade`</span>, <span class="va">recodes.str</span><span class="op">)</span>
<span class="va">students</span><span class="op">$</span><span class="va">`6th Grade`</span> <span class="op">&lt;-</span> <span class="fu">car</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">students</span><span class="op">$</span><span class="va">`6th Grade`</span>, <span class="va">recodes.str</span><span class="op">)</span>

<span class="co"># create plot</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/matplot.html">matplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">students</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"b"</span>, pch <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">16</span>, col <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">7</span>, xaxt<span class="op">=</span><span class="st">"n"</span>, ylab<span class="op">=</span><span class="st">""</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/zAxis.html">Axis</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">students</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, side<span class="op">=</span><span class="fl">1</span>, at <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/legend.html">legend</a></span><span class="op">(</span><span class="fl">1.2</span>, <span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">students</span><span class="op">$</span><span class="va">`Last Name`</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, <span class="va">students</span><span class="op">$</span><span class="va">`First Name`</span>, sep <span class="op">=</span> <span class="st">". "</span><span class="op">)</span>,
       pch <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">16</span>, col <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-tidyverser_files/figure-html/unnamed-chunk-2-1.png" width="672"></div>
<p>This data layout exposes its limitations once the class advances to 7th grade, or if we were to obtain 3rd grade information. To accommodate such additional data, we would need to change the number and position of columns, not simply add additional rows. It is natural to make new observations or identify new samples (rows) but usually awkward to change the underlying variables (columns).</p>
<p>The particular class level (e.g. 4th grade) that a letter grade pertains to is, at heart, a value, not a variable. Another way to think of this is in terms of independent variables versus dependent variables, or in machine learning terms, features versus target. In some ways, the class level might correlate with or influence the resulting letter grade; perhaps the teachers at the different levels have different biases, or children of a certain age lose or gain interest in schoolwork, for example.</p>
<p>For most analytic purposes, this data would be more useful if we made it tidy (normalized) before further processing. In Base R, the <code><a href="https://rdrr.io/pkg/reshape2/man/melt.html">reshape2::melt()</a></code> method can perform this tidying. We pin some of the columns as id_vars, and we set a name for the combined columns as a variable and the letter grade as a single new column.</p>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">reshape2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/melt.html">melt</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">students</span>, id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Last Name"</span>, <span class="st">"First Name"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;    Last Name First Name  variable value</span>
<span class="co">#&gt; 1    Johnson        Mia 4th Grade   4.0</span>
<span class="co">#&gt; 2      Lopez       Liam 4th Grade   3.0</span>
<span class="co">#&gt; 3        Lee   Isabella 4th Grade   2.0</span>
<span class="co">#&gt; 4     Fisher      Mason 4th Grade   3.0</span>
<span class="co">#&gt; 5      Gupta     Olivia 4th Grade   3.0</span>
<span class="co">#&gt; 6   Robinson     Sophia 4th Grade   4.3</span>
<span class="co">#&gt; 7    Johnson        Mia 5th Grade   3.3</span>
<span class="co">#&gt; 8      Lopez       Liam 5th Grade   3.0</span>
<span class="co">#&gt; 9        Lee   Isabella 5th Grade   1.7</span>
<span class="co">#&gt; 10    Fisher      Mason 5th Grade   2.7</span>
<span class="co">#&gt; 11     Gupta     Olivia 5th Grade   4.3</span>
<span class="co">#&gt; 12  Robinson     Sophia 5th Grade   2.7</span>
<span class="co">#&gt; 13   Johnson        Mia 6th Grade   3.7</span>
<span class="co">#&gt; 14     Lopez       Liam 6th Grade   4.3</span>
<span class="co">#&gt; 15       Lee   Isabella 6th Grade   2.7</span>
<span class="co">#&gt; 16    Fisher      Mason 6th Grade   2.3</span>
<span class="co">#&gt; 17     Gupta     Olivia 6th Grade   4.0</span>
<span class="co">#&gt; 18  Robinson     Sophia 6th Grade   4.0</span></code></pre></div>
<p>Within the Tidyverse, specifically within the tidyr package, there is a function <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code> that is similar to Base R’s <code><a href="https://rdrr.io/pkg/reshape2/man/melt.html">reshape2::melt()</a></code>. The aggregation names and values have parameters spelled <code>names_to=</code> and <code>values_to=</code>, but the operation is the same:</p>
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">s.l</span> <span class="op">&lt;-</span> <span class="va">students</span> <span class="op">%&gt;%</span>
 <span class="fu">pivot_longer</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'4th Grade'</span>, <span class="st">'5th Grade'</span>, <span class="st">'6th Grade'</span><span class="op">)</span>,
 names_to <span class="op">=</span> <span class="st">"Level"</span>,
 values_to <span class="op">=</span> <span class="st">"Score"</span><span class="op">)</span>
<span class="va">s.l</span>
<span class="co">#&gt; # A tibble: 18 x 4</span>
<span class="co">#&gt;    `Last Name` `First Name` Level     Score</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Johnson     Mia          4th Grade   4  </span>
<span class="co">#&gt;  2 Johnson     Mia          5th Grade   3.3</span>
<span class="co">#&gt;  3 Johnson     Mia          6th Grade   3.7</span>
<span class="co">#&gt;  4 Lopez       Liam         4th Grade   3  </span>
<span class="co">#&gt;  5 Lopez       Liam         5th Grade   3  </span>
<span class="co">#&gt;  6 Lopez       Liam         6th Grade   4.3</span>
<span class="co">#&gt;  7 Lee         Isabella     4th Grade   2  </span>
<span class="co">#&gt;  8 Lee         Isabella     5th Grade   1.7</span>
<span class="co">#&gt;  9 Lee         Isabella     6th Grade   2.7</span>
<span class="co">#&gt; 10 Fisher      Mason        4th Grade   3  </span>
<span class="co">#&gt; 11 Fisher      Mason        5th Grade   2.7</span>
<span class="co">#&gt; 12 Fisher      Mason        6th Grade   2.3</span>
<span class="co">#&gt; 13 Gupta       Olivia       4th Grade   3  </span>
<span class="co">#&gt; 14 Gupta       Olivia       5th Grade   4.3</span>
<span class="co">#&gt; 15 Gupta       Olivia       6th Grade   4  </span>
<span class="co">#&gt; 16 Robinson    Sophia       4th Grade   4.3</span>
<span class="co">#&gt; 17 Robinson    Sophia       5th Grade   2.7</span>
<span class="co">#&gt; 18 Robinson    Sophia       6th Grade   4</span></code></pre></div>
<p>The simple example above gives you a first feel for tidying tabular data. To reverse the tidying operation that moves variables (columns) to values (rows), the <code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider()</a></code> function in <strong>tidyr</strong> can be used. In Base R there are several related methods on data frames, including <code><a href="https://rdrr.io/pkg/reshape/man/cast-9g.html">reshape::cast()</a></code> and <code><a href="https://rdrr.io/pkg/reshape2/man/cast.html">reshape2::dcast()</a></code>.</p>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">s.l</span> <span class="op">%&gt;%</span> 
  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">Level</span>, values_from <span class="op">=</span> <span class="va">Score</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 5</span>
<span class="co">#&gt;   `Last Name` `First Name` `4th Grade` `5th Grade`</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;              &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Johnson     Mia                  4           3.3</span>
<span class="co">#&gt; 2 Lopez       Liam                 3           3  </span>
<span class="co">#&gt; 3 Lee         Isabella             2           1.7</span>
<span class="co">#&gt; 4 Fisher      Mason                3           2.7</span>
<span class="co">#&gt; 5 Gupta       Olivia               3           4.3</span>
<span class="co">#&gt; 6 Robinson    Sophia               4.3         2.7</span>
<span class="co">#&gt; # ... with 1 more variable: 6th Grade &lt;dbl&gt;</span></code></pre></div>
<div id="the-tibble" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> The tibble<a class="anchor" aria-label="anchor" href="#the-tibble"><i class="fas fa-link"></i></a>
</h2>
<p>Tibbles inherits the attributes of a data frame and enhances some of them. The tibble is the central data structure for a set of packages known as the <strong>tidyverse</strong>.</p>
<p>Tibbles when printed out returns:</p>
<ul>
<li>the first 10 rows and</li>
<li>all the columns that can fit on screen and</li>
<li>column types.</li>
</ul>
<div id="tr-import" class="section level3" number="5.1.1">
<h3>
<span class="header-section-number">5.1.1</span> Importing data<a class="anchor" aria-label="anchor" href="#tr-import"><i class="fas fa-link"></i></a>
</h3>
<p>The functions <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code>, <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code>, <code>read_excel_csv()</code>, <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_tsv()</a></code> are used to import data.</p>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># loading package</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span>

<span class="co"># reading data</span>
<span class="va">gapminder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">'data/gapminder_ext_UTF-8.txt'</span>, 
                        delim <span class="op">=</span> <span class="st">"\t"</span>, 
                        col_names <span class="op">=</span> <span class="cn">T</span>, 
                        locale <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/locale.html">locale</a></span><span class="op">(</span>decimal_mark <span class="op">=</span> <span class="st">","</span>,  encoding <span class="op">=</span> <span class="st">"UTF-8"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 8</span>
<span class="co">#&gt;   country     continent  year lifeExp      pop gdpPercap</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Afghanistan Asia       1952    28.8  8425333      779.</span>
<span class="co">#&gt; 2 Afghanistan Asia       1957    30.3  9240934      821.</span>
<span class="co">#&gt; 3 Afghanistan Asia       1962    32.0 10267083      853.</span>
<span class="co">#&gt; # ... with 2 more variables: country_hun &lt;chr&gt;,</span>
<span class="co">#&gt; #   continent_hun &lt;chr&gt;</span>

<span class="co"># class checking</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>
<span class="co">#&gt; [1] "spec_tbl_df" "tbl_df"      "tbl"         "data.frame"</span>

<span class="co"># checking for data frame </span>
<span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">is.data.frame</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
</div>
<div id="tibbles-are-data-frames" class="section level3" number="5.1.2">
<h3>
<span class="header-section-number">5.1.2</span> Tibbles are data frames<a class="anchor" aria-label="anchor" href="#tibbles-are-data-frames"><i class="fas fa-link"></i></a>
</h3>
<p>Since Tibbles are data frames, functions which operate on data frames also operate on them.</p>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 8</span>
<span class="co">#&gt;   country     continent  year lifeExp      pop gdpPercap</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Afghanistan Asia       1952    28.8  8425333      779.</span>
<span class="co">#&gt; 2 Afghanistan Asia       1957    30.3  9240934      821.</span>
<span class="co">#&gt; 3 Afghanistan Asia       1962    32.0 10267083      853.</span>
<span class="co">#&gt; # ... with 2 more variables: country_hun &lt;chr&gt;,</span>
<span class="co">#&gt; #   continent_hun &lt;chr&gt;</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 8</span>
<span class="co">#&gt;   country  continent  year lifeExp      pop gdpPercap</span>
<span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Zimbabwe Africa     1997    46.8 11404948      792.</span>
<span class="co">#&gt; 2 Zimbabwe Africa     2002    40.0 11926563      672.</span>
<span class="co">#&gt; 3 Zimbabwe Africa     2007    43.5 12311143      470.</span>
<span class="co">#&gt; # ... with 2 more variables: country_hun &lt;chr&gt;,</span>
<span class="co">#&gt; #   continent_hun &lt;chr&gt;</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>
<span class="co">#&gt; [1] 1704</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>
<span class="co">#&gt; [1] 8</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>
<span class="co">#&gt;    country           continent              year     </span>
<span class="co">#&gt;  Length:1704        Length:1704        Min.   :1952  </span>
<span class="co">#&gt;  Class :character   Class :character   1st Qu.:1966  </span>
<span class="co">#&gt;  Mode  :character   Mode  :character   Median :1980  </span>
<span class="co">#&gt;                                        Mean   :1980  </span>
<span class="co">#&gt;                                        3rd Qu.:1993  </span>
<span class="co">#&gt;                                        Max.   :2007  </span>
<span class="co">#&gt;     lifeExp           pop              gdpPercap       </span>
<span class="co">#&gt;  Min.   :23.60   Min.   :6.001e+04   Min.   :   241.2  </span>
<span class="co">#&gt;  1st Qu.:48.20   1st Qu.:2.794e+06   1st Qu.:  1202.1  </span>
<span class="co">#&gt;  Median :60.71   Median :7.024e+06   Median :  3531.8  </span>
<span class="co">#&gt;  Mean   :59.47   Mean   :2.960e+07   Mean   :  7215.3  </span>
<span class="co">#&gt;  3rd Qu.:70.85   3rd Qu.:1.959e+07   3rd Qu.:  9325.5  </span>
<span class="co">#&gt;  Max.   :82.60   Max.   :1.319e+09   Max.   :113523.1  </span>
<span class="co">#&gt;  country_hun        continent_hun     </span>
<span class="co">#&gt;  Length:1704        Length:1704       </span>
<span class="co">#&gt;  Class :character   Class :character  </span>
<span class="co">#&gt;  Mode  :character   Mode  :character  </span>
<span class="co">#&gt;                                       </span>
<span class="co">#&gt;                                       </span>
<span class="co">#&gt; </span></code></pre></div>
</div>
<div id="tr-export" class="section level3" number="5.1.3">
<h3>
<span class="header-section-number">5.1.3</span> Exporting data<a class="anchor" aria-label="anchor" href="#tr-export"><i class="fas fa-link"></i></a>
</h3>
<p>The functions <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv()</a></code>, <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_delim()</a></code>, <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_excel_csv()</a></code>, <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_tsv()</a></code> are used to export data. To export Tibbles, they have first to be converted into data frames.</p>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># exporting Tibbles</span>
<span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_delim</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>, delim <span class="op">=</span> <span class="st">" "</span>, file <span class="op">=</span> <span class="st">'output/data/gapminderfixedwidth.txt'</span><span class="op">)</span>
<span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>, file <span class="op">=</span> <span class="st">'output/data/gapminder_csv.txt'</span><span class="op">)</span>
<span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_tsv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>, file <span class="op">=</span> <span class="st">'output/data/gapminder_tsv.txt'</span><span class="op">)</span>

<span class="co"># checking if files exist?</span>
<span class="fu"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'output/data/gapminderfixedwidth.txt'</span>, <span class="st">'output/data/gapminder_csv.txt'</span>, <span class="st">'output/data/gapminder_tsv.txt'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE TRUE TRUE</span>

<span class="co"># removing files</span>
<span class="fu"><a href="https://rdrr.io/r/base/files.html">file.remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'output/data/gapminderfixedwidth.txt'</span>, <span class="st">'output/data/gapminder_csv.txt'</span>, <span class="st">'output/data/gapminder_tsv.txt'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE TRUE TRUE</span></code></pre></div>
</div>
<div id="tr-inspect" class="section level3" number="5.1.4">
<h3>
<span class="header-section-number">5.1.4</span> Check for tibble<a class="anchor" aria-label="anchor" href="#tr-inspect"><i class="fas fa-link"></i></a>
</h3>
<p>Tibbles come from the package <strong>tibble</strong>.</p>
<p>The function <code><a href="https://tibble.tidyverse.org/reference/is_tibble.html">is_tibble()</a></code> is used to check for tibble.
The function <code><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse()</a></code> is a better option of <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code>.</p>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># loading tibble</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span>

<span class="co"># glimpse() a better option to str()</span>
<span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>
<span class="co">#&gt; Rows: 1,704</span>
<span class="co">#&gt; Columns: 8</span>
<span class="co">#&gt; $ country       &lt;chr&gt; "Afghanistan", "Afghanistan", "Afgha~</span>
<span class="co">#&gt; $ continent     &lt;chr&gt; "Asia", "Asia", "Asia", "Asia", "Asi~</span>
<span class="co">#&gt; $ year          &lt;dbl&gt; 1952, 1957, 1962, 1967, 1972, 1977, ~</span>
<span class="co">#&gt; $ lifeExp       &lt;dbl&gt; 28.801, 30.332, 31.997, 34.020, 36.0~</span>
<span class="co">#&gt; $ pop           &lt;dbl&gt; 8425333, 9240934, 10267083, 11537966~</span>
<span class="co">#&gt; $ gdpPercap     &lt;dbl&gt; 779.4453, 820.8530, 853.1007, 836.19~</span>
<span class="co">#&gt; $ country_hun   &lt;chr&gt; "Afganisztán", "Afganisztán", "Afgan~</span>
<span class="co">#&gt; $ continent_hun &lt;chr&gt; "Ázsia", "Ázsia", "Ázsia", "Ázsia", ~</span>

<span class="co"># checking whether an object is a tibble</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/is_tibble.html">is_tibble</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
</div>
<div id="creating-a-tibble" class="section level3" number="5.1.5">
<h3>
<span class="header-section-number">5.1.5</span> Creating a tibble<a class="anchor" aria-label="anchor" href="#creating-a-tibble"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble()</a></code> is like <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code> but creates a tibble.</p>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># creating named vectors</span>
<span class="va">country</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'China'</span>, <span class="st">'India'</span>, <span class="st">'United States'</span>, <span class="st">'Indonesia'</span>, <span class="st">'Brazil'</span>, 
             <span class="st">'Pakistan'</span>, <span class="st">'Bangladesh'</span>, <span class="st">'Nigeria'</span>, <span class="st">'Japan'</span>, <span class="st">'Mexico'</span><span class="op">)</span>
<span class="va">continent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Asia'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span>, 
               <span class="st">'Asia'</span>, <span class="st">'Asia'</span>, <span class="st">'Africa'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span><span class="op">)</span>
<span class="va">population</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1318683096</span>, <span class="fl">1110396331</span>, <span class="fl">301139947</span>, <span class="fl">223547000</span>, <span class="fl">190010647</span>, 
                <span class="fl">169270617</span>, <span class="fl">150448339</span>, <span class="fl">135031164</span>, <span class="fl">127467972</span>, <span class="fl">108700891</span><span class="op">)</span>
<span class="va">lifeExpectancy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">72.961</span>, <span class="fl">64.698</span>, <span class="fl">78.242</span>, <span class="fl">70.65</span>, <span class="fl">72.39</span>, 
                    <span class="fl">65.483</span>, <span class="fl">64.062</span>, <span class="fl">46.859</span>, <span class="fl">82.603</span>, <span class="fl">76.195</span><span class="op">)</span>
<span class="va">percapita</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4959</span>, <span class="fl">2452</span>, <span class="fl">42952</span>, <span class="fl">3541</span>, <span class="fl">9066</span>, <span class="fl">2606</span>, <span class="fl">1391</span>, <span class="fl">2014</span>, <span class="fl">31656</span>, <span class="fl">11978</span><span class="op">)</span>

<span class="co"># creating a tibble from named vectors</span>
<span class="va">top_10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">population</span>, <span class="va">lifeExpectancy</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">top_10</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   country       population lifeExpectancy</span>
<span class="co">#&gt;   &lt;chr&gt;              &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt; 1 China         1318683096           73.0</span>
<span class="co">#&gt; 2 India         1110396331           64.7</span>
<span class="co">#&gt; 3 United States  301139947           78.2</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">top_10</span><span class="op">)</span>
<span class="co">#&gt; [1] "tbl_df"     "tbl"        "data.frame"</span></code></pre></div>
</div>
<div id="adding-columns" class="section level3" number="5.1.6">
<h3>
<span class="header-section-number">5.1.6</span> Adding columns<a class="anchor" aria-label="anchor" href="#adding-columns"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://tibble.tidyverse.org/reference/add_column.html">add_column()</a></code> is used to add columns to a tibble or data frames.</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># adding a column to a tibble</span>
<span class="co"># defaults to the last column</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/add_column.html">add_column</a></span><span class="op">(</span><span class="va">top_10</span>, <span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 4</span>
<span class="co">#&gt;    country       population lifeExpectancy continent</span>
<span class="co">#&gt;    &lt;chr&gt;              &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;    </span>
<span class="co">#&gt;  1 China         1318683096           73.0 Asia     </span>
<span class="co">#&gt;  2 India         1110396331           64.7 Asia     </span>
<span class="co">#&gt;  3 United States  301139947           78.2 Americas </span>
<span class="co">#&gt;  4 Indonesia      223547000           70.6 Asia     </span>
<span class="co">#&gt;  5 Brazil         190010647           72.4 Americas </span>
<span class="co">#&gt;  6 Pakistan       169270617           65.5 Asia     </span>
<span class="co">#&gt;  7 Bangladesh     150448339           64.1 Asia     </span>
<span class="co">#&gt;  8 Nigeria        135031164           46.9 Africa   </span>
<span class="co">#&gt;  9 Japan          127467972           82.6 Asia     </span>
<span class="co">#&gt; 10 Mexico         108700891           76.2 Americas</span>

<span class="co"># also works for data frames</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/add_column.html">add_column</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">top_10</span><span class="op">)</span>, <span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt;          country population lifeExpectancy continent</span>
<span class="co">#&gt; 1          China 1318683096         72.961      Asia</span>
<span class="co">#&gt; 2          India 1110396331         64.698      Asia</span>
<span class="co">#&gt; 3  United States  301139947         78.242  Americas</span>
<span class="co">#&gt; 4      Indonesia  223547000         70.650      Asia</span>
<span class="co">#&gt; 5         Brazil  190010647         72.390  Americas</span>
<span class="co">#&gt; 6       Pakistan  169270617         65.483      Asia</span>
<span class="co">#&gt; 7     Bangladesh  150448339         64.062      Asia</span>
<span class="co">#&gt; 8        Nigeria  135031164         46.859    Africa</span>
<span class="co">#&gt; 9          Japan  127467972         82.603      Asia</span>
<span class="co">#&gt; 10        Mexico  108700891         76.195  Americas</span>

<span class="co"># adding multiple columns</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/add_column.html">add_column</a></span><span class="op">(</span><span class="va">top_10</span>, <span class="va">continent</span>, <span class="va">percapita</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 5</span>
<span class="co">#&gt;    country       population lifeExpectancy continent percapita</span>
<span class="co">#&gt;    &lt;chr&gt;              &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt;  1 China         1318683096           73.0 Asia           4959</span>
<span class="co">#&gt;  2 India         1110396331           64.7 Asia           2452</span>
<span class="co">#&gt;  3 United States  301139947           78.2 Americas      42952</span>
<span class="co">#&gt;  4 Indonesia      223547000           70.6 Asia           3541</span>
<span class="co">#&gt;  5 Brazil         190010647           72.4 Americas       9066</span>
<span class="co">#&gt;  6 Pakistan       169270617           65.5 Asia           2606</span>
<span class="co">#&gt;  7 Bangladesh     150448339           64.1 Asia           1391</span>
<span class="co">#&gt;  8 Nigeria        135031164           46.9 Africa         2014</span>
<span class="co">#&gt;  9 Japan          127467972           82.6 Asia          31656</span>
<span class="co">#&gt; 10 Mexico         108700891           76.2 Americas      11978</span>

<span class="co"># adding multiple columns directly</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/add_column.html">add_column</a></span><span class="op">(</span><span class="va">top_10</span>, 
           continent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Asia'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span>, 
                         <span class="st">'Asia'</span>, <span class="st">'Asia'</span>, <span class="st">'Africa'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span><span class="op">)</span>,
           percapita <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4959</span>, <span class="fl">2452</span>, <span class="fl">42952</span>, <span class="fl">3541</span>, <span class="fl">9066</span>, <span class="fl">2606</span>, <span class="fl">1391</span>, <span class="fl">2014</span>, <span class="fl">31656</span>, <span class="fl">11978</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 5</span>
<span class="co">#&gt;    country       population lifeExpectancy continent percapita</span>
<span class="co">#&gt;    &lt;chr&gt;              &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt;  1 China         1318683096           73.0 Asia           4959</span>
<span class="co">#&gt;  2 India         1110396331           64.7 Asia           2452</span>
<span class="co">#&gt;  3 United States  301139947           78.2 Americas      42952</span>
<span class="co">#&gt;  4 Indonesia      223547000           70.6 Asia           3541</span>
<span class="co">#&gt;  5 Brazil         190010647           72.4 Americas       9066</span>
<span class="co">#&gt;  6 Pakistan       169270617           65.5 Asia           2606</span>
<span class="co">#&gt;  7 Bangladesh     150448339           64.1 Asia           1391</span>
<span class="co">#&gt;  8 Nigeria        135031164           46.9 Africa         2014</span>
<span class="co">#&gt;  9 Japan          127467972           82.6 Asia          31656</span>
<span class="co">#&gt; 10 Mexico         108700891           76.2 Americas      11978</span>

<span class="co"># add a column before an index position</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/add_column.html">add_column</a></span><span class="op">(</span><span class="va">top_10</span>, <span class="va">continent</span>, .before <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 4</span>
<span class="co">#&gt;    country       continent population lifeExpectancy</span>
<span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;          &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt;  1 China         Asia      1318683096           73.0</span>
<span class="co">#&gt;  2 India         Asia      1110396331           64.7</span>
<span class="co">#&gt;  3 United States Americas   301139947           78.2</span>
<span class="co">#&gt;  4 Indonesia     Asia       223547000           70.6</span>
<span class="co">#&gt;  5 Brazil        Americas   190010647           72.4</span>
<span class="co">#&gt;  6 Pakistan      Asia       169270617           65.5</span>
<span class="co">#&gt;  7 Bangladesh    Asia       150448339           64.1</span>
<span class="co">#&gt;  8 Nigeria       Africa     135031164           46.9</span>
<span class="co">#&gt;  9 Japan         Asia       127467972           82.6</span>
<span class="co">#&gt; 10 Mexico        Americas   108700891           76.2</span>

<span class="co"># add a column after an index position</span>
<span class="va">top_10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/add_column.html">add_column</a></span><span class="op">(</span><span class="va">top_10</span>, <span class="va">continent</span>, .after <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="va">top_10</span>
<span class="co">#&gt; # A tibble: 10 x 4</span>
<span class="co">#&gt;    country       continent population lifeExpectancy</span>
<span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;          &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt;  1 China         Asia      1318683096           73.0</span>
<span class="co">#&gt;  2 India         Asia      1110396331           64.7</span>
<span class="co">#&gt;  3 United States Americas   301139947           78.2</span>
<span class="co">#&gt;  4 Indonesia     Asia       223547000           70.6</span>
<span class="co">#&gt;  5 Brazil        Americas   190010647           72.4</span>
<span class="co">#&gt;  6 Pakistan      Asia       169270617           65.5</span>
<span class="co">#&gt;  7 Bangladesh    Asia       150448339           64.1</span>
<span class="co">#&gt;  8 Nigeria       Africa     135031164           46.9</span>
<span class="co">#&gt;  9 Japan         Asia       127467972           82.6</span>
<span class="co">#&gt; 10 Mexico        Americas   108700891           76.2</span></code></pre></div>
</div>
<div id="adding-rows-1" class="section level3" number="5.1.7">
<h3>
<span class="header-section-number">5.1.7</span> Adding rows<a class="anchor" aria-label="anchor" href="#adding-rows-1"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://tibble.tidyverse.org/reference/add_row.html">add_row()</a></code> is used to add rows to a tibble or a data frame.</p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># adding a row</span>
<span class="co"># defaults to the tail of the data frame</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/add_row.html">add_row</a></span><span class="op">(</span><span class="va">top_10</span>, 
        country <span class="op">=</span> <span class="st">'Philippines'</span>,
        continent <span class="op">=</span> <span class="st">'Asia'</span>, 
        population <span class="op">=</span> <span class="fl">91077287</span>, 
        lifeExpectancy <span class="op">=</span> <span class="fl">71.688</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 11 x 4</span>
<span class="co">#&gt;    country       continent population lifeExpectancy</span>
<span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;          &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt;  1 China         Asia      1318683096           73.0</span>
<span class="co">#&gt;  2 India         Asia      1110396331           64.7</span>
<span class="co">#&gt;  3 United States Americas   301139947           78.2</span>
<span class="co">#&gt;  4 Indonesia     Asia       223547000           70.6</span>
<span class="co">#&gt;  5 Brazil        Americas   190010647           72.4</span>
<span class="co">#&gt;  6 Pakistan      Asia       169270617           65.5</span>
<span class="co">#&gt;  7 Bangladesh    Asia       150448339           64.1</span>
<span class="co">#&gt;  8 Nigeria       Africa     135031164           46.9</span>
<span class="co">#&gt;  9 Japan         Asia       127467972           82.6</span>
<span class="co">#&gt; 10 Mexico        Americas   108700891           76.2</span>
<span class="co">#&gt; 11 Philippines   Asia        91077287           71.7</span>

<span class="co"># adding rows before an index position</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/add_row.html">add_row</a></span><span class="op">(</span><span class="va">top_10</span>, 
        country <span class="op">=</span> <span class="st">'Philippines'</span>,
        continent <span class="op">=</span> <span class="st">'Asia'</span>, 
        population <span class="op">=</span> <span class="fl">91077287</span>, 
        lifeExpectancy <span class="op">=</span> <span class="fl">71.688</span>, 
        .before <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 11 x 4</span>
<span class="co">#&gt;    country       continent population lifeExpectancy</span>
<span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;          &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt;  1 China         Asia      1318683096           73.0</span>
<span class="co">#&gt;  2 Philippines   Asia        91077287           71.7</span>
<span class="co">#&gt;  3 India         Asia      1110396331           64.7</span>
<span class="co">#&gt;  4 United States Americas   301139947           78.2</span>
<span class="co">#&gt;  5 Indonesia     Asia       223547000           70.6</span>
<span class="co">#&gt;  6 Brazil        Americas   190010647           72.4</span>
<span class="co">#&gt;  7 Pakistan      Asia       169270617           65.5</span>
<span class="co">#&gt;  8 Bangladesh    Asia       150448339           64.1</span>
<span class="co">#&gt;  9 Nigeria       Africa     135031164           46.9</span>
<span class="co">#&gt; 10 Japan         Asia       127467972           82.6</span>
<span class="co">#&gt; 11 Mexico        Americas   108700891           76.2</span>

<span class="co"># adding rows after an index position</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/add_row.html">add_row</a></span><span class="op">(</span><span class="va">top_10</span>, 
        country <span class="op">=</span> <span class="st">'Philippines'</span>,
        continent <span class="op">=</span> <span class="st">'Asia'</span>, 
        population <span class="op">=</span> <span class="fl">91077287</span>, 
        lifeExpectancy <span class="op">=</span> <span class="fl">71.688</span>, 
        .after <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 11 x 4</span>
<span class="co">#&gt;    country       continent population lifeExpectancy</span>
<span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;          &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt;  1 China         Asia      1318683096           73.0</span>
<span class="co">#&gt;  2 India         Asia      1110396331           64.7</span>
<span class="co">#&gt;  3 Philippines   Asia        91077287           71.7</span>
<span class="co">#&gt;  4 United States Americas   301139947           78.2</span>
<span class="co">#&gt;  5 Indonesia     Asia       223547000           70.6</span>
<span class="co">#&gt;  6 Brazil        Americas   190010647           72.4</span>
<span class="co">#&gt;  7 Pakistan      Asia       169270617           65.5</span>
<span class="co">#&gt;  8 Bangladesh    Asia       150448339           64.1</span>
<span class="co">#&gt;  9 Nigeria       Africa     135031164           46.9</span>
<span class="co">#&gt; 10 Japan         Asia       127467972           82.6</span>
<span class="co">#&gt; 11 Mexico        Americas   108700891           76.2</span>

<span class="co"># adding multiple rows</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/add_row.html">add_row</a></span><span class="op">(</span><span class="va">top_10</span>, 
        country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Philippines'</span>, <span class="st">'Vietnam'</span>, <span class="st">'Germany'</span>, <span class="st">'Egypt'</span>, <span class="st">'Ethiopia'</span>, 
                    <span class="st">'Turkey'</span>, <span class="st">'Iran'</span>, <span class="st">'Thailand'</span>, <span class="st">'Congo, Dem. Rep.'</span>, <span class="st">'France'</span><span class="op">)</span>,
        continent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Asia'</span>, <span class="st">'Asia'</span>, <span class="st">'Europe'</span>, <span class="st">'Africa'</span>, <span class="st">'Africa'</span>, 
                      <span class="st">'Europe'</span>, <span class="st">'Asia'</span>, <span class="st">'Asia'</span>, <span class="st">'Africa'</span>, <span class="st">'Europe'</span><span class="op">)</span>,
        population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">91077287</span>, <span class="fl">85262356</span>, <span class="fl">82400996</span>, <span class="fl">80264543</span>, <span class="fl">76511887</span>, 
                       <span class="fl">71158647</span>, <span class="fl">69453570</span>, <span class="fl">65068149</span>, <span class="fl">64606759</span>, <span class="fl">61083916</span><span class="op">)</span>,
        lifeExpectancy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">71.688</span>, <span class="fl">74.249</span>, <span class="fl">79.406</span>, <span class="fl">71.338</span>, <span class="fl">52.947</span>, 
                           <span class="fl">71.777</span>, <span class="fl">70.964</span>, <span class="fl">70.616</span>, <span class="fl">46.462</span>, <span class="fl">80.657</span><span class="op">)</span>
       <span class="op">)</span>
<span class="co">#&gt; # A tibble: 20 x 4</span>
<span class="co">#&gt;    country          continent population lifeExpectancy</span>
<span class="co">#&gt;    &lt;chr&gt;            &lt;chr&gt;          &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt;  1 China            Asia      1318683096           73.0</span>
<span class="co">#&gt;  2 India            Asia      1110396331           64.7</span>
<span class="co">#&gt;  3 United States    Americas   301139947           78.2</span>
<span class="co">#&gt;  4 Indonesia        Asia       223547000           70.6</span>
<span class="co">#&gt;  5 Brazil           Americas   190010647           72.4</span>
<span class="co">#&gt;  6 Pakistan         Asia       169270617           65.5</span>
<span class="co">#&gt;  7 Bangladesh       Asia       150448339           64.1</span>
<span class="co">#&gt;  8 Nigeria          Africa     135031164           46.9</span>
<span class="co">#&gt;  9 Japan            Asia       127467972           82.6</span>
<span class="co">#&gt; 10 Mexico           Americas   108700891           76.2</span>
<span class="co">#&gt; 11 Philippines      Asia        91077287           71.7</span>
<span class="co">#&gt; 12 Vietnam          Asia        85262356           74.2</span>
<span class="co">#&gt; 13 Germany          Europe      82400996           79.4</span>
<span class="co">#&gt; 14 Egypt            Africa      80264543           71.3</span>
<span class="co">#&gt; 15 Ethiopia         Africa      76511887           52.9</span>
<span class="co">#&gt; 16 Turkey           Europe      71158647           71.8</span>
<span class="co">#&gt; 17 Iran             Asia        69453570           71.0</span>
<span class="co">#&gt; 18 Thailand         Asia        65068149           70.6</span>
<span class="co">#&gt; 19 Congo, Dem. Rep. Africa      64606759           46.5</span>
<span class="co">#&gt; 20 France           Europe      61083916           80.7</span></code></pre></div>
</div>
<div id="converting-to-tibble" class="section level3" number="5.1.8">
<h3>
<span class="header-section-number">5.1.8</span> Converting to tibble<a class="anchor" aria-label="anchor" href="#converting-to-tibble"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble()</a></code> is used to convert to a tibble, if possible.</p>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># creating a matrix</span>
<span class="va">mat</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">12</span><span class="op">)</span>, <span class="fl">3</span>, <span class="fl">4</span>, 
             dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">'a'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'a1'</span>, <span class="st">'a2'</span>, <span class="st">'a3'</span><span class="op">)</span>, <span class="st">'b'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'b1'</span>, <span class="st">'b2'</span>, <span class="st">'b3'</span>, <span class="st">'b4'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">mat</span>
<span class="co">#&gt;     b</span>
<span class="co">#&gt; a    b1 b2 b3 b4</span>
<span class="co">#&gt;   a1  1  4  7 10</span>
<span class="co">#&gt;   a2  2  5  8 11</span>
<span class="co">#&gt;   a3  3  6  9 12</span>

<span class="co"># converting a matrix to tibble</span>
<span class="co"># removes the rownames</span>
<span class="va">mat_tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="va">mat</span><span class="op">)</span>
<span class="va">mat_tbl</span>
<span class="co">#&gt; # A tibble: 3 x 4</span>
<span class="co">#&gt;      b1    b2    b3    b4</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1     1     4     7    10</span>
<span class="co">#&gt; 2     2     5     8    11</span>
<span class="co">#&gt; 3     3     6     9    12</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">mat_tbl</span><span class="op">)</span>
<span class="co">#&gt; [1] "tbl_df"     "tbl"        "data.frame"</span>

<span class="co"># creating a data frame</span>
<span class="va">top_10_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'China'</span>, <span class="st">'India'</span>, <span class="st">'United States'</span>, <span class="st">'Indonesia'</span>, <span class="st">'Brazil'</span>, 
            <span class="st">'Pakistan'</span>, <span class="st">'Bangladesh'</span>, <span class="st">'Nigeria'</span>, <span class="st">'Japan'</span>, <span class="st">'Mexico'</span><span class="op">)</span>,
continent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Asia'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span>, 
              <span class="st">'Asia'</span>, <span class="st">'Asia'</span>, <span class="st">'Africa'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span><span class="op">)</span>,
population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1318683096</span>, <span class="fl">1110396331</span>, <span class="fl">301139947</span>, <span class="fl">223547000</span>, <span class="fl">190010647</span>, 
               <span class="fl">169270617</span>, <span class="fl">150448339</span>, <span class="fl">135031164</span>, <span class="fl">127467972</span>, <span class="fl">108700891</span><span class="op">)</span>,
lifeExpectancy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">72.961</span>, <span class="fl">64.698</span>, <span class="fl">78.242</span>, <span class="fl">70.65</span>, <span class="fl">72.39</span>, 
                   <span class="fl">65.483</span>, <span class="fl">64.062</span>, <span class="fl">46.859</span>, <span class="fl">82.603</span>, <span class="fl">76.195</span><span class="op">)</span>
    <span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">top_10_df</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;         country continent population lifeExpectancy</span>
<span class="co">#&gt; 1         China      Asia 1318683096         72.961</span>
<span class="co">#&gt; 2         India      Asia 1110396331         64.698</span>
<span class="co">#&gt; 3 United States  Americas  301139947         78.242</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">top_10_df</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.frame"</span>

<span class="co"># converting data frame to tibble</span>
<span class="va">top_tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="va">top_10_df</span><span class="op">)</span>
<span class="va">top_tbl</span>
<span class="co">#&gt; # A tibble: 10 x 4</span>
<span class="co">#&gt;    country       continent population lifeExpectancy</span>
<span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;          &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt;  1 China         Asia      1318683096           73.0</span>
<span class="co">#&gt;  2 India         Asia      1110396331           64.7</span>
<span class="co">#&gt;  3 United States Americas   301139947           78.2</span>
<span class="co">#&gt;  4 Indonesia     Asia       223547000           70.6</span>
<span class="co">#&gt;  5 Brazil        Americas   190010647           72.4</span>
<span class="co">#&gt;  6 Pakistan      Asia       169270617           65.5</span>
<span class="co">#&gt;  7 Bangladesh    Asia       150448339           64.1</span>
<span class="co">#&gt;  8 Nigeria       Africa     135031164           46.9</span>
<span class="co">#&gt;  9 Japan         Asia       127467972           82.6</span>
<span class="co">#&gt; 10 Mexico        Americas   108700891           76.2</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">top_tbl</span><span class="op">)</span>
<span class="co">#&gt; [1] "tbl_df"     "tbl"        "data.frame"</span></code></pre></div>
</div>
<div id="tr-row-names" class="section level3" number="5.1.9">
<h3>
<span class="header-section-number">5.1.9</span> Manipulating row names<a class="anchor" aria-label="anchor" href="#tr-row-names"><i class="fas fa-link"></i></a>
</h3>
<p>Tibble does not support row names but the package tibble has the following functions for dealing with row names:</p>
<ul>
<li>
<code><a href="https://tibble.tidyverse.org/reference/rownames.html">has_rownames()</a></code> checks if a data frame has row names.</li>
<li>
<code><a href="https://tibble.tidyverse.org/reference/rownames.html">remove_rownames()</a></code> removes row names.</li>
<li>
<code><a href="https://tibble.tidyverse.org/reference/rownames.html">column_to_rownames()</a></code> moves a column to row names.</li>
<li>
<code><a href="https://tibble.tidyverse.org/reference/rownames.html">rowid_to_column()</a></code> moves a row index to column.</li>
</ul>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># creating a data frame</span>
<span class="va">top_10_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
continent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Asia'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span>, 
              <span class="st">'Asia'</span>, <span class="st">'Asia'</span>, <span class="st">'Africa'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span><span class="op">)</span>,
population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1318683096</span>, <span class="fl">1110396331</span>, <span class="fl">301139947</span>, <span class="fl">223547000</span>, <span class="fl">190010647</span>, 
               <span class="fl">169270617</span>, <span class="fl">150448339</span>, <span class="fl">135031164</span>, <span class="fl">127467972</span>, <span class="fl">108700891</span><span class="op">)</span>,
lifeExpectancy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">72.961</span>, <span class="fl">64.698</span>, <span class="fl">78.242</span>, <span class="fl">70.65</span>, <span class="fl">72.39</span>, 
                   <span class="fl">65.483</span>, <span class="fl">64.062</span>, <span class="fl">46.859</span>, <span class="fl">82.603</span>, <span class="fl">76.195</span><span class="op">)</span>
    <span class="op">)</span>
<span class="va">top_10_df</span>
<span class="co">#&gt;    continent population lifeExpectancy</span>
<span class="co">#&gt; 1       Asia 1318683096         72.961</span>
<span class="co">#&gt; 2       Asia 1110396331         64.698</span>
<span class="co">#&gt; 3   Americas  301139947         78.242</span>
<span class="co">#&gt; 4       Asia  223547000         70.650</span>
<span class="co">#&gt; 5   Americas  190010647         72.390</span>
<span class="co">#&gt; 6       Asia  169270617         65.483</span>
<span class="co">#&gt; 7       Asia  150448339         64.062</span>
<span class="co">#&gt; 8     Africa  135031164         46.859</span>
<span class="co">#&gt; 9       Asia  127467972         82.603</span>
<span class="co">#&gt; 10  Americas  108700891         76.195</span>

<span class="co"># vector of country names</span>
<span class="va">country</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'China'</span>, <span class="st">'India'</span>, <span class="st">'United States'</span>, <span class="st">'Indonesia'</span>, <span class="st">'Brazil'</span>, 
             <span class="st">'Pakistan'</span>, <span class="st">'Bangladesh'</span>, <span class="st">'Nigeria'</span>, <span class="st">'Japan'</span>, <span class="st">'Mexico'</span><span class="op">)</span>

<span class="co"># adding row names</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">rownames</a></span><span class="op">(</span><span class="va">top_10_df</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">country</span>
<span class="va">top_10_df</span>
<span class="co">#&gt;               continent population lifeExpectancy</span>
<span class="co">#&gt; China              Asia 1318683096         72.961</span>
<span class="co">#&gt; India              Asia 1110396331         64.698</span>
<span class="co">#&gt; United States  Americas  301139947         78.242</span>
<span class="co">#&gt; Indonesia          Asia  223547000         70.650</span>
<span class="co">#&gt; Brazil         Americas  190010647         72.390</span>
<span class="co">#&gt; Pakistan           Asia  169270617         65.483</span>
<span class="co">#&gt; Bangladesh         Asia  150448339         64.062</span>
<span class="co">#&gt; Nigeria          Africa  135031164         46.859</span>
<span class="co">#&gt; Japan              Asia  127467972         82.603</span>
<span class="co">#&gt; Mexico         Americas  108700891         76.195</span>

<span class="co"># check if the data frame contains row names</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">has_rownames</a></span><span class="op">(</span><span class="va">top_10_df</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span>

<span class="co"># delete row names</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">remove_rownames</a></span><span class="op">(</span><span class="va">top_10_df</span><span class="op">)</span>
<span class="co">#&gt;    continent population lifeExpectancy</span>
<span class="co">#&gt; 1       Asia 1318683096         72.961</span>
<span class="co">#&gt; 2       Asia 1110396331         64.698</span>
<span class="co">#&gt; 3   Americas  301139947         78.242</span>
<span class="co">#&gt; 4       Asia  223547000         70.650</span>
<span class="co">#&gt; 5   Americas  190010647         72.390</span>
<span class="co">#&gt; 6       Asia  169270617         65.483</span>
<span class="co">#&gt; 7       Asia  150448339         64.062</span>
<span class="co">#&gt; 8     Africa  135031164         46.859</span>
<span class="co">#&gt; 9       Asia  127467972         82.603</span>
<span class="co">#&gt; 10  Americas  108700891         76.195</span>

<span class="co"># convert row names to a column</span>
<span class="va">top_10_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">rownames_to_column</a></span><span class="op">(</span><span class="va">top_10_df</span>, var <span class="op">=</span> <span class="st">"country"</span><span class="op">)</span>
<span class="va">top_10_df</span>
<span class="co">#&gt;          country continent population lifeExpectancy</span>
<span class="co">#&gt; 1          China      Asia 1318683096         72.961</span>
<span class="co">#&gt; 2          India      Asia 1110396331         64.698</span>
<span class="co">#&gt; 3  United States  Americas  301139947         78.242</span>
<span class="co">#&gt; 4      Indonesia      Asia  223547000         70.650</span>
<span class="co">#&gt; 5         Brazil  Americas  190010647         72.390</span>
<span class="co">#&gt; 6       Pakistan      Asia  169270617         65.483</span>
<span class="co">#&gt; 7     Bangladesh      Asia  150448339         64.062</span>
<span class="co">#&gt; 8        Nigeria    Africa  135031164         46.859</span>
<span class="co">#&gt; 9          Japan      Asia  127467972         82.603</span>
<span class="co">#&gt; 10        Mexico  Americas  108700891         76.195</span>

<span class="co"># convert a column to row names</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">column_to_rownames</a></span><span class="op">(</span><span class="va">top_10_df</span>, var <span class="op">=</span> <span class="st">"country"</span><span class="op">)</span>
<span class="co">#&gt;               continent population lifeExpectancy</span>
<span class="co">#&gt; China              Asia 1318683096         72.961</span>
<span class="co">#&gt; India              Asia 1110396331         64.698</span>
<span class="co">#&gt; United States  Americas  301139947         78.242</span>
<span class="co">#&gt; Indonesia          Asia  223547000         70.650</span>
<span class="co">#&gt; Brazil         Americas  190010647         72.390</span>
<span class="co">#&gt; Pakistan           Asia  169270617         65.483</span>
<span class="co">#&gt; Bangladesh         Asia  150448339         64.062</span>
<span class="co">#&gt; Nigeria          Africa  135031164         46.859</span>
<span class="co">#&gt; Japan              Asia  127467972         82.603</span>
<span class="co">#&gt; Mexico         Americas  108700891         76.195</span>

<span class="co"># convert row index to a column</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">rowid_to_column</a></span><span class="op">(</span><span class="va">top_10_df</span>, var <span class="op">=</span> <span class="st">"rank"</span><span class="op">)</span>
<span class="co">#&gt;    rank       country continent population lifeExpectancy</span>
<span class="co">#&gt; 1     1         China      Asia 1318683096         72.961</span>
<span class="co">#&gt; 2     2         India      Asia 1110396331         64.698</span>
<span class="co">#&gt; 3     3 United States  Americas  301139947         78.242</span>
<span class="co">#&gt; 4     4     Indonesia      Asia  223547000         70.650</span>
<span class="co">#&gt; 5     5        Brazil  Americas  190010647         72.390</span>
<span class="co">#&gt; 6     6      Pakistan      Asia  169270617         65.483</span>
<span class="co">#&gt; 7     7    Bangladesh      Asia  150448339         64.062</span>
<span class="co">#&gt; 8     8       Nigeria    Africa  135031164         46.859</span>
<span class="co">#&gt; 9     9         Japan      Asia  127467972         82.603</span>
<span class="co">#&gt; 10   10        Mexico  Americas  108700891         76.195</span></code></pre></div>
</div>
</div>
<div id="tr-factor" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> Manipulating categorical data with forcats<a class="anchor" aria-label="anchor" href="#tr-factor"><i class="fas fa-link"></i></a>
</h2>
<p>The package <strong>forcats</strong> comes with a series of functions all beginning with fct_ for working with categorical data. This package is developed and maintained by Hadley Wickham and is part of the tidyverse universe of packages.</p>
<p>Categorical data in R is represented by factors.</p>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages(forcats)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org">forcats</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="co"># loading data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>
<span class="co"># preparing data</span>
<span class="va">gapminder_2007</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span>, <span class="op">-</span><span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 5</span>
<span class="co">#&gt;   country     continent lifeExp      pop gdpPercap</span>
<span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;       &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Afghanistan Asia         43.8 31889923      975.</span>
<span class="co">#&gt; 2 Albania     Europe       76.4  3600523     5937.</span>
<span class="co">#&gt; 3 Algeria     Africa       72.3 33333216     6223.</span>
<span class="co">#&gt; 4 Angola      Africa       42.7 12420476     4797.</span>
<span class="co">#&gt; 5 Argentina   Americas     75.3 40301927    12779.</span>
<span class="co">#&gt; 6 Australia   Oceania      81.2 20434176    34435.</span>
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">gapminder_2007</span>, <span class="va">class</span><span class="op">)</span>
<span class="co">#&gt;   country continent   lifeExp       pop gdpPercap </span>
<span class="co">#&gt;  "factor"  "factor" "numeric" "integer" "numeric"</span></code></pre></div>
<div id="inspecting-factors" class="section level3" number="5.2.1">
<h3>
<span class="header-section-number">5.2.1</span> Inspecting factors<a class="anchor" aria-label="anchor" href="#inspecting-factors"><i class="fas fa-link"></i></a>
</h3>
<div id="get-categories" class="section level4" number="5.2.1.1">
<h4>
<span class="header-section-number">5.2.1.1</span> Get categories<a class="anchor" aria-label="anchor" href="#get-categories"><i class="fas fa-link"></i></a>
</h4>
<p>The functions <code><a href="https://rdrr.io/r/base/levels.html">levels()</a></code> and <code><a href="https://forcats.tidyverse.org/reference/fct_unique.html">fct_unique()</a></code> are used to get levels or categories.</p>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get levels using base R</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; [1] "Africa"   "Americas" "Asia"     "Europe"   "Oceania"</span>

<span class="co"># get levels using forcats</span>
<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_unique.html">fct_unique</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; [1] Africa   Americas Asia     Europe   Oceania </span>
<span class="co">#&gt; Levels: Africa Americas Asia Europe Oceania</span></code></pre></div>
</div>
<div id="get-the-number-of-categories" class="section level4" number="5.2.1.2">
<h4>
<span class="header-section-number">5.2.1.2</span> Get the number of categories<a class="anchor" aria-label="anchor" href="#get-the-number-of-categories"><i class="fas fa-link"></i></a>
</h4>
<p>The functions <code><a href="https://rdrr.io/r/base/nlevels.html">nlevels()</a></code> and <code><a href="https://rdrr.io/r/base/length.html">length(fct_unique())</a></code> are used to get the number of categories or levels.</p>
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get the number of categories using base R</span>
<span class="fu"><a href="https://rdrr.io/r/base/nlevels.html">nlevels</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; [1] 5</span>

<span class="co"># get the number of categories using forcats</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_unique.html">fct_unique</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 5</span></code></pre></div>
</div>
<div id="count-of-values-by-categories" class="section level4" number="5.2.1.3">
<h4>
<span class="header-section-number">5.2.1.3</span> Count of values by categories<a class="anchor" aria-label="anchor" href="#count-of-values-by-categories"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> and <code><a href="https://forcats.tidyverse.org/reference/fct_count.html">fct_count()</a></code> are used to get count of values by categories with the later returning a tibble.</p>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># count of elements by categories using base R</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Africa Americas     Asia   Europe  Oceania </span>
<span class="co">#&gt;       52       25       33       30        2</span>

<span class="co"># count of elements by categories using forcats</span>
<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_count.html">fct_count</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 x 2</span>
<span class="co">#&gt;   f            n</span>
<span class="co">#&gt;   &lt;fct&gt;    &lt;int&gt;</span>
<span class="co">#&gt; 1 Africa      52</span>
<span class="co">#&gt; 2 Americas    25</span>
<span class="co">#&gt; 3 Asia        33</span>
<span class="co">#&gt; 4 Europe      30</span>
<span class="co">#&gt; 5 Oceania      2</span></code></pre></div>
</div>
<div id="reordering-levels" class="section level4" number="5.2.1.4">
<h4>
<span class="header-section-number">5.2.1.4</span> Reordering levels<a class="anchor" aria-label="anchor" href="#reordering-levels"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb129"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get levels</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Africa Americas     Asia   Europe  Oceania </span>
<span class="co">#&gt;       52       25       33       30        2</span></code></pre></div>
<div id="manually-reordering-levels" class="section level5" number="5.2.1.4.1">
<h5>
<span class="header-section-number">5.2.1.4.1</span> Manually reordering levels<a class="anchor" aria-label="anchor" href="#manually-reordering-levels"><i class="fas fa-link"></i></a>
</h5>
<p>The function <code><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel()</a></code> is used to manually reorder levels.</p>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># manually reorder levels</span>
<span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, 
                                        <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Asia'</span>, <span class="st">'Africa'</span>, <span class="st">'Americas'</span>, <span class="st">'Europe'</span>, <span class="st">'Oceania'</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Asia   Africa Americas   Europe  Oceania </span>
<span class="co">#&gt;       33       52       25       30        2</span>
<span class="co"># oceania first</span>
<span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, <span class="st">'Oceania'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Oceania     Asia   Africa Americas   Europe </span>
<span class="co">#&gt;        2       33       52       25       30</span></code></pre></div>
</div>
</div>
<div id="reordering-levels-by-frequency-of-occurrence" class="section level4" number="5.2.1.5">
<h4>
<span class="header-section-number">5.2.1.5</span> Reordering levels by frequency of occurrence<a class="anchor" aria-label="anchor" href="#reordering-levels-by-frequency-of-occurrence"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_infreq()</a></code> reorders levels by the number of times they occur in the data with the highest first.</p>
<div class="sourceCode" id="cb131"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ordering levels by the frequency they appear in a dataset</span>
<span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, ordered <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Africa     Asia   Europe Americas  Oceania </span>
<span class="co">#&gt;       52       33       30       25        2</span></code></pre></div>
<p>The argument <code>ordered = TRUE</code> returns an ordered factor.</p>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># unordered factor</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, ordered <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "factor"</span>

<span class="co"># ordered factor</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "ordered" "factor"</span></code></pre></div>
</div>
</div>
<div id="reordering-levels-by-their-order-in-data" class="section level3" number="5.2.2">
<h3>
<span class="header-section-number">5.2.2</span> Reordering levels by their order in data<a class="anchor" aria-label="anchor" href="#reordering-levels-by-their-order-in-data"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_inorder()</a></code> reorders levels by the order in which they appear in the data set.</p>
<div class="sourceCode" id="cb133"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ordering levels by the order in which they appear in a dataset</span>
<span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_inorder</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, ordered <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Asia   Europe   Africa Americas  Oceania </span>
<span class="co">#&gt;       33       30       52       25        2</span></code></pre></div>
<div id="reversing-the-order" class="section level4" number="5.2.2.1">
<h4>
<span class="header-section-number">5.2.2.1</span> Reversing the order<a class="anchor" aria-label="anchor" href="#reversing-the-order"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev()</a></code> reverses the order of the levels.</p>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># reversing level order</span>
<span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Oceania Americas   Africa   Europe     Asia </span>
<span class="co">#&gt;        2       25       52       30       33</span></code></pre></div>
</div>
<div id="random-order" class="section level4" number="5.2.2.2">
<h4>
<span class="header-section-number">5.2.2.2</span> Random order<a class="anchor" aria-label="anchor" href="#random-order"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://forcats.tidyverse.org/reference/fct_shuffle.html">fct_shuffle()</a></code> randomly shuffles levels.</p>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># randomly shuffling level order</span>
<span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_shuffle.html">fct_shuffle</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Asia  Oceania   Africa   Europe Americas </span>
<span class="co">#&gt;       33        2       52       30       25</span></code></pre></div>
</div>
<div id="reordering-level-by-another-column" class="section level4" number="5.2.2.3">
<h4>
<span class="header-section-number">5.2.2.3</span> Reordering level by another column<a class="anchor" aria-label="anchor" href="#reordering-level-by-another-column"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder()</a></code> reorders levels by another column or vector.</p>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ordering levels by another column</span>
<span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, <span class="va">gapminder_2007</span><span class="op">$</span><span class="va">pop</span>, .fun <span class="op">=</span> <span class="va">sum</span>, .desc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; [1] "Asia"     "Africa"   "Americas" "Europe"   "Oceania"</span>


<span class="co"># using median</span>
<span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, <span class="va">gapminder_2007</span><span class="op">$</span><span class="va">pop</span>, .fun <span class="op">=</span> <span class="va">median</span>, .desc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; [1] "Asia"     "Oceania"  "Africa"   "Europe"   "Americas"</span>

<span class="co"># ascending</span>
<span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, <span class="va">gapminder_2007</span><span class="op">$</span><span class="va">pop</span>, .fun <span class="op">=</span> <span class="va">median</span>, .desc <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; [1] "Americas" "Europe"   "Africa"   "Oceania"  "Asia"</span>

<span class="co"># population by continent</span>
<span class="op">(</span><span class="va">pop_cont</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">pop</span> <span class="op">~</span> <span class="va">continent</span>, <span class="va">gapminder</span>, <span class="va">sum</span>, subset <span class="op">=</span> <span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   continent        pop</span>
<span class="co">#&gt; 1    Africa  929539692</span>
<span class="co">#&gt; 2  Americas  898871184</span>
<span class="co">#&gt; 3      Asia 3811953827</span>
<span class="co">#&gt; 4    Europe  586098529</span>
<span class="co">#&gt; 5   Oceania   24549947</span>

<span class="co"># plotting a barchart </span>
<span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">pop_cont</span>, <span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html">barplot</a></span><span class="op">(</span><span class="va">pop</span><span class="op">/</span><span class="fl">1e6</span>, names.arg <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-tidyverser_files/figure-html/unnamed-chunk-26-1.png" width="672"></div>
<div class="sourceCode" id="cb137"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="co"># reordering continent by population</span>
<span class="va">pop_cont</span><span class="op">$</span><span class="va">continent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">pop_cont</span><span class="op">$</span><span class="va">continent</span>, <span class="va">pop_cont</span><span class="op">$</span><span class="va">pop</span>, .desc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">pop_cont</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; [1] "Asia"     "Africa"   "Americas" "Europe"   "Oceania"</span>

<span class="co"># sorting data frame by continent</span>
<span class="va">pop_cont</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">pop_cont</span>, <span class="va">pop_cont</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">continent</span><span class="op">)</span>,<span class="op">]</span><span class="op">)</span>
<span class="va">pop_cont</span>
<span class="co">#&gt;   continent        pop</span>
<span class="co">#&gt; 3      Asia 3811953827</span>
<span class="co">#&gt; 1    Africa  929539692</span>
<span class="co">#&gt; 2  Americas  898871184</span>
<span class="co">#&gt; 4    Europe  586098529</span>
<span class="co">#&gt; 5   Oceania   24549947</span>

<span class="co"># plotting barplot</span>
<span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">pop_cont</span>, <span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html">barplot</a></span><span class="op">(</span><span class="va">pop</span><span class="op">/</span><span class="fl">1e6</span>, names.arg <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-tidyverser_files/figure-html/unnamed-chunk-26-2.png" width="672"></div>
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># producing an ascending bar chart</span>
<span class="va">pop_cont</span><span class="op">$</span><span class="va">continent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">pop_cont</span><span class="op">$</span><span class="va">continent</span>, <span class="va">pop_cont</span><span class="op">$</span><span class="va">pop</span>, .desc <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">pop_cont</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">pop_cont</span>, <span class="va">pop_cont</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">continent</span><span class="op">)</span>,<span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">pop_cont</span>, <span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html">barplot</a></span><span class="op">(</span><span class="va">pop</span><span class="op">/</span><span class="fl">1e6</span>, names.arg <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-tidyverser_files/figure-html/unnamed-chunk-26-3.png" width="672"></div>
</div>
</div>
<div id="restructuring-levels-and-their-labels" class="section level3" number="5.2.3">
<h3>
<span class="header-section-number">5.2.3</span> Restructuring levels and their labels<a class="anchor" aria-label="anchor" href="#restructuring-levels-and-their-labels"><i class="fas fa-link"></i></a>
</h3>
<div id="renaming-labels" class="section level4" number="5.2.3.1">
<h4>
<span class="header-section-number">5.2.3.1</span> Renaming labels<a class="anchor" aria-label="anchor" href="#renaming-labels"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://forcats.tidyverse.org/reference/fct_recode.html">fct_recode()</a></code> is used to rename levels. It takes the form <code>new_name = old_name</code>.</p>
<div class="sourceCode" id="cb139"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_recode.html">fct_recode</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, <span class="st">'AS'</span> <span class="op">=</span> <span class="st">'Asia'</span>, <span class="st">'Af'</span> <span class="op">=</span> <span class="st">'Africa'</span>, <span class="st">'Eu'</span> <span class="op">=</span> <span class="st">'Europe'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "Americas" "Eu"       "Af"       "Oceania"  "AS"</span></code></pre></div>
</div>
<div id="collapsing-levels" class="section level4" number="5.2.3.2">
<h4>
<span class="header-section-number">5.2.3.2</span> collapsing levels<a class="anchor" aria-label="anchor" href="#collapsing-levels"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://forcats.tidyverse.org/reference/fct_collapse.html">fct_collapse()</a></code> is used to collapse levels into a new one.</p>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># collapsing europe and africa into euroafrica</span>
<span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_collapse.html">fct_collapse</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, Euroafrica <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Africa'</span>, <span class="st">'Europe'</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Americas Euroafrica    Oceania       Asia </span>
<span class="co">#&gt;         25         82          2         33</span>

<span class="co"># population by continent</span>
<span class="op">(</span><span class="va">pop_cont</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">pop</span> <span class="op">~</span> <span class="va">continent</span>, <span class="va">gapminder_2007</span>, <span class="va">sum</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;    continent        pop</span>
<span class="co">#&gt; 1   Americas  898871184</span>
<span class="co">#&gt; 2 Euroafrica 1515638221</span>
<span class="co">#&gt; 3    Oceania   24549947</span>
<span class="co">#&gt; 4       Asia 3811953827</span></code></pre></div>
</div>
<div id="combining-levels" class="section level4" number="5.2.3.3">
<h4>
<span class="header-section-number">5.2.3.3</span> combining levels<a class="anchor" aria-label="anchor" href="#combining-levels"><i class="fas fa-link"></i></a>
</h4>
<p>The functions <code><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump()</a></code> and <code><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_min()</a></code> combines levels together based on the frequency of occurrence of each level.</p>
<div class="sourceCode" id="cb141"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># combining the least frequent levels</span>
<span class="va">gapminder_2007</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span>, <span class="op">-</span><span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Africa   Asia Europe  Other </span>
<span class="co">#&gt;     52     33     30     27</span></code></pre></div>
<p>Using the arguments <code>n=</code> and <code>p=</code> we can specify the type of combining to perform; with positive values indicating combining rarest levels while negative values indicate combining most common levels.</p>
<div class="sourceCode" id="cb142"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># combining all except the first most common</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Africa  Other </span>
<span class="co">#&gt;     52     90</span>

<span class="co"># combining all except the first 2 most common</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Africa   Asia  Other </span>
<span class="co">#&gt;     52     33     57</span>

<span class="co"># combining all except the first 3 most common</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Africa   Asia Europe  Other </span>
<span class="co">#&gt;     52     33     30     27</span>

<span class="co"># combining all except the first rarest</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, n <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Oceania   Other </span>
<span class="co">#&gt;       2     140</span>

<span class="co"># combining all except the first 2 rarest</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, n <span class="op">=</span> <span class="op">-</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Americas  Oceania    Other </span>
<span class="co">#&gt;       25        2      115</span>

<span class="co"># combining all except the first 3 rarest</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, n <span class="op">=</span> <span class="op">-</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Americas   Europe  Oceania    Other </span>
<span class="co">#&gt;       25       30        2       85</span>

<span class="co"># using prop positive</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, prop <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Africa  Other </span>
<span class="co">#&gt;     52     90</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, prop <span class="op">=</span> <span class="fl">0.22</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Africa   Asia  Other </span>
<span class="co">#&gt;     52     33     57</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, prop <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Africa   Asia Europe  Other </span>
<span class="co">#&gt;     52     33     30     27</span>

<span class="co"># using prop negative</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, prop <span class="op">=</span> <span class="op">-</span><span class="fl">0.25</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Americas     Asia   Europe  Oceania    Other </span>
<span class="co">#&gt;       25       33       30        2       52</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, prop <span class="op">=</span> <span class="op">-</span><span class="fl">0.22</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Americas   Europe  Oceania    Other </span>
<span class="co">#&gt;       25       30        2       85</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, prop <span class="op">=</span> <span class="op">-</span><span class="fl">0.2</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Americas  Oceania    Other </span>
<span class="co">#&gt;       25        2      115</span></code></pre></div>
<p>With <code><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_min()</a></code> combining is done based on whether a threshold declared by the min argument is met.</p>
<div class="sourceCode" id="cb143"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Africa Americas     Asia   Europe  Oceania </span>
<span class="co">#&gt;       52       25       33       30        2</span>

<span class="co"># combining levels with less than 25 counts</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_min</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, min <span class="op">=</span> <span class="fl">25</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Africa Americas     Asia   Europe    Other </span>
<span class="co">#&gt;       52       25       33       30        2</span>

<span class="co"># combining levels with less than 30 counts</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_min</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, min <span class="op">=</span> <span class="fl">30</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Africa   Asia Europe  Other </span>
<span class="co">#&gt;     52     33     30     27</span>

<span class="co"># combining levels with less than 33 counts</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_min</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, min <span class="op">=</span> <span class="fl">33</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Africa   Asia  Other </span>
<span class="co">#&gt;     52     33     57</span></code></pre></div>
</div>
</div>
<div id="remove-and-add-levels" class="section level3" number="5.2.4">
<h3>
<span class="header-section-number">5.2.4</span> Remove and add levels<a class="anchor" aria-label="anchor" href="#remove-and-add-levels"><i class="fas fa-link"></i></a>
</h3>
<div id="dropping-levels-1" class="section level4" number="5.2.4.1">
<h4>
<span class="header-section-number">5.2.4.1</span> dropping levels<a class="anchor" aria-label="anchor" href="#dropping-levels-1"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://forcats.tidyverse.org/reference/fct_other.html">fct_other()</a></code> will drop levels and replace them with the argument other_level = other by default.</p>
<div class="sourceCode" id="cb144"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># keeping asia and europe </span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_other.html">fct_other</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Asia'</span>, <span class="st">'Europe'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Asia Europe  Other </span>
<span class="co">#&gt;     33     30     79</span>

<span class="co"># dropping asia and europe</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_other.html">fct_other</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, drop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Asia'</span>, <span class="st">'Europe'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Africa Americas  Oceania    Other </span>
<span class="co">#&gt;       52       25        2       63</span>

<span class="co"># replacing other continents with nonEurasia</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_other.html">fct_other</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, 
                keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Asia'</span>, <span class="st">'Europe'</span><span class="op">)</span>, 
                other_level <span class="op">=</span> <span class="st">'nonEurasia'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;       Asia     Europe nonEurasia </span>
<span class="co">#&gt;         33         30         79</span>

<span class="co"># replacing europe and asia with Eurasia</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_other.html">fct_other</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span>, 
                drop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Asia'</span>, <span class="st">'Europe'</span><span class="op">)</span>, 
                other_level <span class="op">=</span> <span class="st">'Eurasia'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Africa Americas  Oceania  Eurasia </span>
<span class="co">#&gt;       52       25        2       63</span></code></pre></div>
</div>
</div>
<div id="dropping-unused-levels" class="section level3" number="5.2.5">
<h3>
<span class="header-section-number">5.2.5</span> dropping unused levels<a class="anchor" aria-label="anchor" href="#dropping-unused-levels"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://forcats.tidyverse.org/reference/fct_drop.html">fct_drop()</a></code> is used to drop unused levels. Unused levels are usually a problem while plotting as they appear on the graph though they contain no data.</p>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># dropping Oceania</span>
<span class="va">gapminder_oc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">gapminder_2007</span>, <span class="va">continent</span> <span class="op">!=</span> <span class="st">'Oceania'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gapminder_oc</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Africa Americas     Asia   Europe  Oceania </span>
<span class="co">#&gt;       52       25       33       30        0</span>
<span class="co"># Because the level Oceania has not been dropped, it appears on the above plot.</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">gapminder_oc</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-tidyverser_files/figure-html/unnamed-chunk-33-1.png" width="672"></div>
<div class="sourceCode" id="cb146"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># dropping unused level</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_drop.html">fct_drop</a></span><span class="op">(</span><span class="va">gapminder_oc</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Africa Americas     Asia   Europe </span>
<span class="co">#&gt;       52       25       33       30</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_drop.html">fct_drop</a></span><span class="op">(</span><span class="va">gapminder_oc</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-tidyverser_files/figure-html/unnamed-chunk-33-2.png" width="672"></div>
<div id="adding-levels" class="section level4" number="5.2.5.1">
<h4>
<span class="header-section-number">5.2.5.1</span> adding levels<a class="anchor" aria-label="anchor" href="#adding-levels"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://forcats.tidyverse.org/reference/fct_expand.html">fct_expand()</a></code> is used to add levels.</p>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># adding the level arctic</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_expand.html">fct_expand</a></span><span class="op">(</span><span class="va">gapminder_oc</span><span class="op">$</span><span class="va">continent</span>, <span class="st">'arctic'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Africa Americas     Asia   Europe  Oceania   arctic </span>
<span class="co">#&gt;       52       25       33       30        0        0</span>

<span class="co"># adding the levels arctic and antarctica</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_expand.html">fct_expand</a></span><span class="op">(</span><span class="va">gapminder_oc</span><span class="op">$</span><span class="va">continent</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'arctic'</span>, <span class="st">'antarctica'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Africa   Americas       Asia     Europe    Oceania </span>
<span class="co">#&gt;         52         25         33         30          0 </span>
<span class="co">#&gt;     arctic antarctica </span>
<span class="co">#&gt;          0          0</span>
<span class="co"># newly added levels appear on the plot though they have no data</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_expand.html">fct_expand</a></span><span class="op">(</span><span class="va">gapminder_oc</span><span class="op">$</span><span class="va">continent</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'arctic'</span>, <span class="st">'antarctica'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-tidyverser_files/figure-html/unnamed-chunk-34-1.png" width="672"></div>
</div>
</div>
</div>
<div id="data-manipulation-with-dplyr-and-tidyr" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> Data Manipulation with dplyr and tidyr<a class="anchor" aria-label="anchor" href="#data-manipulation-with-dplyr-and-tidyr"><i class="fas fa-link"></i></a>
</h2>
<p>The package <strong>dplyr</strong> is one of the core packages in a group of packages known as the tidyverse. It was developed and released in 2014 by Hadley Wickham and others. <strong>dplyr</strong> is meant to be for data manipulation what <strong>ggplot2</strong> is for data visualization, that is the grammar of data manipulation. It focuses solely on data frame manipulation and transformation using a set of verbs (functions) which are consistent and easy to understand.</p>
<p>Since <strong>dyplr</strong> belongs to the tidyverse world, it can be installed either by installing tidyverse or by installing <strong>dplyr</strong> itself.</p>
<div id="rename-columns-and-rows" class="section level3" number="5.3.1">
<h3>
<span class="header-section-number">5.3.1</span> Rename columns and rows<a class="anchor" aria-label="anchor" href="#rename-columns-and-rows"><i class="fas fa-link"></i></a>
</h3>
<div id="tr-col-names" class="section level4" number="5.3.1.1">
<h4>
<span class="header-section-number">5.3.1.1</span> Renaming columns<a class="anchor" aria-label="anchor" href="#tr-col-names"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/rename.html">rename()</a></code> is used to rename columns.</p>
<p><code><a href="https://dplyr.tidyverse.org/reference/rename.html">rename(new_name = old_name)</a></code></p>
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>

<span class="co"># loading data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>
<span class="co"># get column names</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>
<span class="co">#&gt; [1] "country"   "continent" "year"      "lifeExp"  </span>
<span class="co">#&gt; [5] "pop"       "gdpPercap"</span>

<span class="co"># set column names</span>
<span class="va">gapminder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span><span class="va">gapminder</span>, 
                    Country <span class="op">=</span> <span class="va">country</span>, 
                    Continent <span class="op">=</span> <span class="va">continent</span>, 
                    Year <span class="op">=</span> <span class="va">year</span>, 
                    `Life Expectancy` <span class="op">=</span> <span class="va">lifeExp</span>, 
                    Population <span class="op">=</span> <span class="va">pop</span>, 
                    `GDP per Capita` <span class="op">=</span> <span class="va">gdpPercap</span><span class="op">)</span>
<span class="co"># get column names</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>
<span class="co">#&gt; [1] "Country"         "Continent"       "Year"           </span>
<span class="co">#&gt; [4] "Life Expectancy" "Population"      "GDP per Capita"</span></code></pre></div>
</div>
<div id="renaming-rows" class="section level4" number="5.3.1.2">
<h4>
<span class="header-section-number">5.3.1.2</span> Renaming rows<a class="anchor" aria-label="anchor" href="#renaming-rows"><i class="fas fa-link"></i></a>
</h4>
<p>Tibble does not support row names. See <a href="tidyverse-r.html#row-names">this</a>.</p>
</div>
</div>
<div id="select-columns-and-filter-rows" class="section level3" number="5.3.2">
<h3>
<span class="header-section-number">5.3.2</span> Select columns and filter rows<a class="anchor" aria-label="anchor" href="#select-columns-and-filter-rows"><i class="fas fa-link"></i></a>
</h3>
<div id="tr-filter-cols" class="section level4" number="5.3.2.1">
<h4>
<span class="header-section-number">5.3.2.1</span> Selecting and dropping columns<a class="anchor" aria-label="anchor" href="#tr-filter-cols"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> is used to select and rename columns.</p>
<div class="sourceCode" id="cb149"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># preparing data</span>
<span class="va">column_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Rank'</span>, <span class="st">'Title'</span>, <span class="st">'Genre'</span>, <span class="st">'Description'</span>, <span class="st">'Director'</span>, <span class="st">'Actors'</span>, 
                  <span class="st">'Year'</span>, <span class="st">'Runtime'</span>, <span class="st">'Rating'</span>, <span class="st">'Votes'</span>, <span class="st">'Revenue'</span>, <span class="st">'Metascore'</span><span class="op">)</span>
<span class="va">mov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/IMDB-Movie-Data.csv"</span>, header <span class="op">=</span> <span class="cn">T</span>, sep <span class="op">=</span> <span class="st">","</span>, dec <span class="op">=</span> <span class="st">"."</span>, fileEncoding <span class="op">=</span> <span class="st">"UTF-8"</span>, quote <span class="op">=</span> <span class="st">"\""</span>,
                  comment.char <span class="op">=</span> <span class="st">""</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;   Rank                   Title                    Genre</span>
<span class="co">#&gt; 1    1 Guardians of the Galaxy  Action,Adventure,Sci-Fi</span>
<span class="co">#&gt; 2    2              Prometheus Adventure,Mystery,Sci-Fi</span>
<span class="co">#&gt; 3    3                   Split          Horror,Thriller</span>
<span class="co">#&gt;                                                                                                                                                     Description</span>
<span class="co">#&gt; 1                               A group of intergalactic criminals are forced to work together to stop a fanatical warrior from taking control of the universe.</span>
<span class="co">#&gt; 2                               Following clues to the origin of mankind, a team finds a structure on a distant moon, but they soon realize they are not alone.</span>
<span class="co">#&gt; 3 Three girls are kidnapped by a man with a diagnosed 23 distinct personalities. They must try to escape before the apparent emergence of a frightful new 24th.</span>
<span class="co">#&gt;             Director</span>
<span class="co">#&gt; 1         James Gunn</span>
<span class="co">#&gt; 2       Ridley Scott</span>
<span class="co">#&gt; 3 M. Night Shyamalan</span>
<span class="co">#&gt;                                                                    Actors</span>
<span class="co">#&gt; 1                    Chris Pratt, Vin Diesel, Bradley Cooper, Zoe Saldana</span>
<span class="co">#&gt; 2 Noomi Rapace, Logan Marshall-Green, Michael Fassbender, Charlize Theron</span>
<span class="co">#&gt; 3        James McAvoy, Anya Taylor-Joy, Haley Lu Richardson, Jessica Sula</span>
<span class="co">#&gt;   Year Runtime..Minutes. Rating  Votes Revenue..Millions.</span>
<span class="co">#&gt; 1 2014               121    8.1 757074             333.13</span>
<span class="co">#&gt; 2 2012               124    7.0 485820             126.46</span>
<span class="co">#&gt; 3 2016               117    7.3 157606             138.12</span>
<span class="co">#&gt;   Metascore</span>
<span class="co">#&gt; 1        76</span>
<span class="co">#&gt; 2        65</span>
<span class="co">#&gt; 3        62</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">mov</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Rank'</span>, <span class="st">'Title'</span>, <span class="st">'Genre'</span>, <span class="st">'Description'</span>, <span class="st">'Director'</span>, <span class="st">'Actors'</span>, 
                  <span class="st">'Year'</span>, <span class="st">'Runtime'</span>, <span class="st">'Rating'</span>, <span class="st">'Votes'</span>, <span class="st">'Revenue'</span>, <span class="st">'Metascore'</span><span class="op">)</span>


<span class="co"># selecting columns by column names</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Title'</span>, <span class="st">'Year'</span>, <span class="st">'Revenue'</span>, <span class="st">'Metascore'</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016  138.12        62</span>

<span class="co"># columns can be passed directly without quotation marks</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016  138.12        62</span>

<span class="co"># renaming column</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, 
                 <span class="va">Title</span>, 
                 `Release Year` <span class="op">=</span> <span class="va">Year</span>, 
                 `Revenue in Millions` <span class="op">=</span> <span class="va">Revenue</span>, 
                 <span class="va">Metascore</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                     Title Release Year Revenue in Millions</span>
<span class="co">#&gt; 1 Guardians of the Galaxy         2014              333.13</span>
<span class="co">#&gt; 2              Prometheus         2012              126.46</span>
<span class="co">#&gt; 3                   Split         2016              138.12</span>
<span class="co">#&gt;   Metascore</span>
<span class="co">#&gt; 1        76</span>
<span class="co">#&gt; 2        65</span>
<span class="co">#&gt; 3        62</span>

<span class="co"># selecting columns by position</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">2</span>, <span class="fl">7</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016  138.12        62</span>

<span class="co"># selecting columns by sequencing</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">7</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;   Year Runtime Rating  Votes Revenue Metascore</span>
<span class="co">#&gt; 1 2014     121    8.1 757074  333.13        76</span>
<span class="co">#&gt; 2 2012     124    7.0 485820  126.46        65</span>
<span class="co">#&gt; 3 2016     117    7.3 157606  138.12        62</span>

<span class="co"># : works with column names</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="va">Year</span><span class="op">:</span><span class="va">Metascore</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;   Year Runtime Rating  Votes Revenue Metascore</span>
<span class="co">#&gt; 1 2014     121    8.1 757074  333.13        76</span>
<span class="co">#&gt; 2 2012     124    7.0 485820  126.46        65</span>
<span class="co">#&gt; 3 2016     117    7.3 157606  138.12        62</span>

<span class="co"># dropping columns by column names</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="op">-</span><span class="va">Rank</span>, <span class="op">-</span><span class="va">Genre</span>, <span class="op">-</span><span class="va">Description</span>, 
                  <span class="op">-</span><span class="va">Director</span>, <span class="op">-</span><span class="va">Actors</span>, <span class="op">-</span><span class="va">Runtime</span>, <span class="op">-</span><span class="va">Rating</span>, <span class="op">-</span><span class="va">Votes</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016  138.12        62</span>

<span class="co"># dropping columns by sequence</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;   Year Runtime Rating  Votes Revenue Metascore</span>
<span class="co">#&gt; 1 2014     121    8.1 757074  333.13        76</span>
<span class="co">#&gt; 2 2012     124    7.0 485820  126.46        65</span>
<span class="co">#&gt; 3 2016     117    7.3 157606  138.12        62</span>

<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="op">-</span><span class="op">(</span><span class="va">Rank</span><span class="op">:</span><span class="va">Actors</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;   Year Runtime Rating  Votes Revenue Metascore</span>
<span class="co">#&gt; 1 2014     121    8.1 757074  333.13        76</span>
<span class="co">#&gt; 2 2012     124    7.0 485820  126.46        65</span>
<span class="co">#&gt; 3 2016     117    7.3 157606  138.12        62</span>

<span class="co"># dropping columns by index position</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016  138.12        62</span>

<span class="co"># dropping columns by index position</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">3</span>, <span class="op">-</span><span class="fl">4</span>, <span class="op">-</span><span class="fl">5</span>, <span class="op">-</span><span class="fl">6</span>, <span class="op">-</span><span class="fl">8</span>, <span class="op">-</span><span class="fl">9</span>, <span class="op">-</span><span class="fl">10</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016  138.12        62</span></code></pre></div>
</div>
<div id="selecting-column-based-on-a-condition" class="section level4" number="5.3.2.2">
<h4>
<span class="header-section-number">5.3.2.2</span> Selecting column based on a condition<a class="anchor" aria-label="anchor" href="#selecting-column-based-on-a-condition"><i class="fas fa-link"></i></a>
</h4>
<p>The functions <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches()</a></code>, and <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains()</a></code> are used to select columns based on a specific pattern. The function</p>
<ul>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a></code>: returns columns that start with a specific prefix</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with()</a></code>: returns columns that end with a specific suffix</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches()</a></code>: returns columns that match a particular regex pattern</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains()</a></code>: returns columns that contain a particular string</li>
</ul>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># selecting columns starting with R</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">'R'</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;   Rank Runtime Rating Revenue</span>
<span class="co">#&gt; 1    1     121    8.1  333.13</span>
<span class="co">#&gt; 2    2     124    7.0  126.46</span>
<span class="co">#&gt; 3    3     117    7.3  138.12</span>

<span class="co"># selecting columns starting with R and D</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'R'</span>, <span class="st">'M'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span><span class="op">)</span>
<span class="co">#&gt;   Rank Runtime Rating Revenue Metascore</span>
<span class="co">#&gt; 1    1     121    8.1  333.13        76</span>
<span class="co">#&gt; 2    2     124    7.0  126.46        65</span>
<span class="co">#&gt; 3    3     117    7.3  138.12        62</span>
<span class="co">#&gt; 4    4     108    7.2  270.32        59</span>
<span class="co">#&gt; 5    5     123    6.2  325.02        40</span>
<span class="co">#&gt; 6    6     103    6.1   45.13        42</span>

<span class="co"># selecting columns containing ea</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">'ea'</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span><span class="op">)</span>
<span class="co">#&gt;   Year</span>
<span class="co">#&gt; 1 2014</span>
<span class="co">#&gt; 2 2012</span>
<span class="co">#&gt; 3 2016</span>
<span class="co">#&gt; 4 2016</span>
<span class="co">#&gt; 5 2016</span>
<span class="co">#&gt; 6 2016</span>

<span class="co"># selecting columns ending with r</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with</a></span><span class="op">(</span><span class="st">'r'</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span><span class="op">)</span>
<span class="co">#&gt;               Director Year</span>
<span class="co">#&gt; 1           James Gunn 2014</span>
<span class="co">#&gt; 2         Ridley Scott 2012</span>
<span class="co">#&gt; 3   M. Night Shyamalan 2016</span>
<span class="co">#&gt; 4 Christophe Lourdelet 2016</span>
<span class="co">#&gt; 5           David Ayer 2016</span>
<span class="co">#&gt; 6          Yimou Zhang 2016</span>

<span class="co"># selecting columns ending with r and e</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'k'</span>,<span class="st">'r'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span><span class="op">)</span>
<span class="co">#&gt;   Rank             Director Year</span>
<span class="co">#&gt; 1    1           James Gunn 2014</span>
<span class="co">#&gt; 2    2         Ridley Scott 2012</span>
<span class="co">#&gt; 3    3   M. Night Shyamalan 2016</span>
<span class="co">#&gt; 4    4 Christophe Lourdelet 2016</span>
<span class="co">#&gt; 5    5           David Ayer 2016</span>
<span class="co">#&gt; 6    6          Yimou Zhang 2016</span></code></pre></div>
</div>
</div>
<div id="selecting-a-single-column" class="section level3" number="5.3.3">
<h3>
<span class="header-section-number">5.3.3</span> Selecting a single column<a class="anchor" aria-label="anchor" href="#selecting-a-single-column"><i class="fas fa-link"></i></a>
</h3>
<p>Selecting a single column with <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> returns a one-column data frame. Often, a vector is wanted instead, to that end there is the function <code><a href="https://dplyr.tidyverse.org/reference/pull.html">pull()</a></code>.</p>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/pull.html">pull()</a></code> is used to select a single column and return a vector.</p>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Title'</span>, <span class="st">'Year'</span>, <span class="st">'Revenue'</span>, <span class="st">'Metascore'</span><span class="op">)</span><span class="op">)</span>

<span class="co"># using select returns a tibble</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">movies</span>, <span class="st">'Title'</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                     Title</span>
<span class="co">#&gt; 1 Guardians of the Galaxy</span>
<span class="co">#&gt; 2              Prometheus</span>
<span class="co">#&gt; 3                   Split</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">movies</span>, <span class="st">'Title'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.frame"</span>

<span class="co"># using pull returns a vector whose type depends on the data type of the column</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">movies</span>, var <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "Guardians of the Galaxy" "Prometheus"             </span>
<span class="co">#&gt; [3] "Split"                   "Sing"                   </span>
<span class="co">#&gt; [5] "Suicide Squad"           "The Great Wall"</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">movies</span>, var <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "character"</span></code></pre></div>
</div>
<div id="tr-filter-rows" class="section level3" number="5.3.4">
<h3>
<span class="header-section-number">5.3.4</span> Filtering rows<a class="anchor" aria-label="anchor" href="#tr-filter-rows"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> is used to filter rows.</p>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>

<span class="co"># using the filter() function</span>
<span class="va">movies.</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">movies</span>, <span class="va">Year</span> <span class="op">==</span> <span class="fl">2006</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies.</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                                        Title</span>
<span class="co">#&gt; 1                               The Prestige</span>
<span class="co">#&gt; 2 Pirates of the Caribbean: Dead Man's Chest</span>
<span class="co">#&gt; 3                               The Departed</span>
<span class="co">#&gt;            Director Year Rating Revenue Metascore</span>
<span class="co">#&gt; 1 Christopher Nolan 2006    8.5   53.08        66</span>
<span class="co">#&gt; 2    Gore Verbinski 2006    7.3  423.03        53</span>
<span class="co">#&gt; 3   Martin Scorsese 2006    8.5  132.37        85</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">movies.</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                                          Title</span>
<span class="co">#&gt; 42 Talladega Nights: The Ballad of Ricky Bobby</span>
<span class="co">#&gt; 43                         Lucky Number Slevin</span>
<span class="co">#&gt; 44                               Inland Empire</span>
<span class="co">#&gt;         Director Year Rating Revenue Metascore</span>
<span class="co">#&gt; 42    Adam McKay 2006    6.6  148.21        66</span>
<span class="co">#&gt; 43 Paul McGuigan 2006    7.8   22.49        53</span>
<span class="co">#&gt; 44   David Lynch 2006    7.0      NA        NA</span>

<span class="co"># selecting movies released in 2006 with a rating above 8</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">movies</span>, <span class="va">Year</span> <span class="op">==</span> <span class="fl">2006</span> <span class="op">&amp;</span> <span class="va">Rating</span> <span class="op">&gt;=</span> <span class="fl">8</span><span class="op">)</span>
<span class="co">#&gt;                      Title                         Director</span>
<span class="co">#&gt; 1             The Prestige                Christopher Nolan</span>
<span class="co">#&gt; 2             The Departed                  Martin Scorsese</span>
<span class="co">#&gt; 3            Casino Royale                  Martin Campbell</span>
<span class="co">#&gt; 4          Pan's Labyrinth               Guillermo del Toro</span>
<span class="co">#&gt; 5      The Lives of Others Florian Henckel von Donnersmarck</span>
<span class="co">#&gt; 6 The Pursuit of Happyness                 Gabriele Muccino</span>
<span class="co">#&gt; 7            Blood Diamond                     Edward Zwick</span>
<span class="co">#&gt;   Year Rating Revenue Metascore</span>
<span class="co">#&gt; 1 2006    8.5   53.08        66</span>
<span class="co">#&gt; 2 2006    8.5  132.37        85</span>
<span class="co">#&gt; 3 2006    8.0  167.01        80</span>
<span class="co">#&gt; 4 2006    8.2   37.62        98</span>
<span class="co">#&gt; 5 2006    8.5   11.28        89</span>
<span class="co">#&gt; 6 2006    8.0  162.59        64</span>
<span class="co">#&gt; 7 2006    8.0   57.37        64</span>

<span class="co"># without the &amp; operator</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">movies</span>, <span class="va">Year</span> <span class="op">==</span> <span class="fl">2006</span>, <span class="va">Rating</span> <span class="op">&gt;=</span> <span class="fl">8</span><span class="op">)</span>
<span class="co">#&gt;                      Title                         Director</span>
<span class="co">#&gt; 1             The Prestige                Christopher Nolan</span>
<span class="co">#&gt; 2             The Departed                  Martin Scorsese</span>
<span class="co">#&gt; 3            Casino Royale                  Martin Campbell</span>
<span class="co">#&gt; 4          Pan's Labyrinth               Guillermo del Toro</span>
<span class="co">#&gt; 5      The Lives of Others Florian Henckel von Donnersmarck</span>
<span class="co">#&gt; 6 The Pursuit of Happyness                 Gabriele Muccino</span>
<span class="co">#&gt; 7            Blood Diamond                     Edward Zwick</span>
<span class="co">#&gt;   Year Rating Revenue Metascore</span>
<span class="co">#&gt; 1 2006    8.5   53.08        66</span>
<span class="co">#&gt; 2 2006    8.5  132.37        85</span>
<span class="co">#&gt; 3 2006    8.0  167.01        80</span>
<span class="co">#&gt; 4 2006    8.2   37.62        98</span>
<span class="co">#&gt; 5 2006    8.5   11.28        89</span>
<span class="co">#&gt; 6 2006    8.0  162.59        64</span>
<span class="co">#&gt; 7 2006    8.0   57.37        64</span>

<span class="co"># selecting rows with NA values on the Metascore column</span>
<span class="va">movies.</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Metascore</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies.</span><span class="op">)</span>
<span class="co">#&gt;                     Title             Director Year Rating</span>
<span class="co">#&gt; 1         Paris pieds nus       Dominique Abel 2016    6.8</span>
<span class="co">#&gt; 2 Bahubali: The Beginning       S.S. Rajamouli 2015    8.3</span>
<span class="co">#&gt; 3              Dead Awake       Phillip Guzman 2016    4.7</span>
<span class="co">#&gt; 4               5- 25- 77 Patrick Read Johnson 2007    7.1</span>
<span class="co">#&gt; 5 Don't Fuck in the Woods        Shawn Burkett 2016    2.7</span>
<span class="co">#&gt; 6                  Fallen          Scott Hicks 2016    5.6</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1      NA        NA</span>
<span class="co">#&gt; 2    6.50        NA</span>
<span class="co">#&gt; 3    0.01        NA</span>
<span class="co">#&gt; 4      NA        NA</span>
<span class="co">#&gt; 5      NA        NA</span>
<span class="co">#&gt; 6      NA        NA</span>

<span class="co"># selecting rows with NA values on the Revenue and Metascore column</span>
<span class="va">movies.</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Revenue</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Metascore</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies.</span><span class="op">)</span>
<span class="co">#&gt;                     Title             Director Year Rating</span>
<span class="co">#&gt; 1         Paris pieds nus       Dominique Abel 2016    6.8</span>
<span class="co">#&gt; 2               5- 25- 77 Patrick Read Johnson 2007    7.1</span>
<span class="co">#&gt; 3 Don't Fuck in the Woods        Shawn Burkett 2016    2.7</span>
<span class="co">#&gt; 4                  Fallen          Scott Hicks 2016    5.6</span>
<span class="co">#&gt; 5            Contratiempo          Oriol Paulo 2016    7.9</span>
<span class="co">#&gt; 6    Boyka: Undisputed IV      Todor Chapkanov 2016    7.4</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1      NA        NA</span>
<span class="co">#&gt; 2      NA        NA</span>
<span class="co">#&gt; 3      NA        NA</span>
<span class="co">#&gt; 4      NA        NA</span>
<span class="co">#&gt; 5      NA        NA</span>
<span class="co">#&gt; 6      NA        NA</span>

<span class="co"># selecting rows with NA values on either the Revenue or Metascore column</span>
<span class="va">movies.</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Revenue</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Metascore</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies.</span><span class="op">)</span>
<span class="co">#&gt;                     Title             Director Year Rating</span>
<span class="co">#&gt; 1                Mindhorn           Sean Foley 2016    6.4</span>
<span class="co">#&gt; 2          Hounds of Love            Ben Young 2016    6.7</span>
<span class="co">#&gt; 3         Paris pieds nus       Dominique Abel 2016    6.8</span>
<span class="co">#&gt; 4 Bahubali: The Beginning       S.S. Rajamouli 2015    8.3</span>
<span class="co">#&gt; 5              Dead Awake       Phillip Guzman 2016    4.7</span>
<span class="co">#&gt; 6               5- 25- 77 Patrick Read Johnson 2007    7.1</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1      NA        71</span>
<span class="co">#&gt; 2      NA        72</span>
<span class="co">#&gt; 3      NA        NA</span>
<span class="co">#&gt; 4    6.50        NA</span>
<span class="co">#&gt; 5    0.01        NA</span>
<span class="co">#&gt; 6      NA        NA</span>

<span class="co"># selecting rows without NA values on the Metascore column </span>
<span class="va">movies.</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">movies</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Metascore</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies.</span><span class="op">)</span>
<span class="co">#&gt;                     Title             Director Year Rating</span>
<span class="co">#&gt; 1 Guardians of the Galaxy           James Gunn 2014    8.1</span>
<span class="co">#&gt; 2              Prometheus         Ridley Scott 2012    7.0</span>
<span class="co">#&gt; 3                   Split   M. Night Shyamalan 2016    7.3</span>
<span class="co">#&gt; 4                    Sing Christophe Lourdelet 2016    7.2</span>
<span class="co">#&gt; 5           Suicide Squad           David Ayer 2016    6.2</span>
<span class="co">#&gt; 6          The Great Wall          Yimou Zhang 2016    6.1</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1  333.13        76</span>
<span class="co">#&gt; 2  126.46        65</span>
<span class="co">#&gt; 3  138.12        62</span>
<span class="co">#&gt; 4  270.32        59</span>
<span class="co">#&gt; 5  325.02        40</span>
<span class="co">#&gt; 6   45.13        42</span>

<span class="co"># selecting rows without NA values on the Revenue and Metascore columns</span>
<span class="va">movies.</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">movies</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Revenue</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Metascore</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies.</span><span class="op">)</span>
<span class="co">#&gt;                     Title             Director Year Rating</span>
<span class="co">#&gt; 1 Guardians of the Galaxy           James Gunn 2014    8.1</span>
<span class="co">#&gt; 2              Prometheus         Ridley Scott 2012    7.0</span>
<span class="co">#&gt; 3                   Split   M. Night Shyamalan 2016    7.3</span>
<span class="co">#&gt; 4                    Sing Christophe Lourdelet 2016    7.2</span>
<span class="co">#&gt; 5           Suicide Squad           David Ayer 2016    6.2</span>
<span class="co">#&gt; 6          The Great Wall          Yimou Zhang 2016    6.1</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1  333.13        76</span>
<span class="co">#&gt; 2  126.46        65</span>
<span class="co">#&gt; 3  138.12        62</span>
<span class="co">#&gt; 4  270.32        59</span>
<span class="co">#&gt; 5  325.02        40</span>
<span class="co">#&gt; 6   45.13        42</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">movies.</span><span class="op">)</span>
<span class="co">#&gt; [1] 838</span>

<span class="co"># selecting rows without NA values on either the Revenue or Metascore columns</span>
<span class="va">movies.</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">movies</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Revenue</span><span class="op">)</span> <span class="op">|</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Metascore</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies.</span><span class="op">)</span>
<span class="co">#&gt;                     Title             Director Year Rating</span>
<span class="co">#&gt; 1 Guardians of the Galaxy           James Gunn 2014    8.1</span>
<span class="co">#&gt; 2              Prometheus         Ridley Scott 2012    7.0</span>
<span class="co">#&gt; 3                   Split   M. Night Shyamalan 2016    7.3</span>
<span class="co">#&gt; 4                    Sing Christophe Lourdelet 2016    7.2</span>
<span class="co">#&gt; 5           Suicide Squad           David Ayer 2016    6.2</span>
<span class="co">#&gt; 6          The Great Wall          Yimou Zhang 2016    6.1</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1  333.13        76</span>
<span class="co">#&gt; 2  126.46        65</span>
<span class="co">#&gt; 3  138.12        62</span>
<span class="co">#&gt; 4  270.32        59</span>
<span class="co">#&gt; 5  325.02        40</span>
<span class="co">#&gt; 6   45.13        42</span>

<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">movies.</span><span class="op">)</span>
<span class="co">#&gt; [1] 970</span>

<span class="co"># selecting films released in 2006 and 2008</span>
<span class="va">movies.</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">movies</span>, <span class="va">Year</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2006</span>, <span class="fl">2008</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies.</span><span class="op">)</span>
<span class="co">#&gt;                                        Title</span>
<span class="co">#&gt; 1                            The Dark Knight</span>
<span class="co">#&gt; 2                               The Prestige</span>
<span class="co">#&gt; 3 Pirates of the Caribbean: Dead Man's Chest</span>
<span class="co">#&gt; 4                               The Departed</span>
<span class="co">#&gt; 5                                        300</span>
<span class="co">#&gt; 6                                 Mamma Mia!</span>
<span class="co">#&gt;            Director Year Rating Revenue Metascore</span>
<span class="co">#&gt; 1 Christopher Nolan 2008    9.0  533.32        82</span>
<span class="co">#&gt; 2 Christopher Nolan 2006    8.5   53.08        66</span>
<span class="co">#&gt; 3    Gore Verbinski 2006    7.3  423.03        53</span>
<span class="co">#&gt; 4   Martin Scorsese 2006    8.5  132.37        85</span>
<span class="co">#&gt; 5       Zack Snyder 2006    7.7  210.59        52</span>
<span class="co">#&gt; 6    Phyllida Lloyd 2008    6.4  143.70        51</span>

<span class="co"># selecting films released by 'James Gunn' or 'James Marsh'</span>
<span class="va">movies.</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">movies</span>, <span class="va">Director</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'James Gunn'</span>, <span class="st">'James Marsh'</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies.</span><span class="op">)</span>
<span class="co">#&gt;                      Title    Director Year Rating Revenue</span>
<span class="co">#&gt; 1  Guardians of the Galaxy  James Gunn 2014    8.1  333.13</span>
<span class="co">#&gt; 2 The Theory of Everything James Marsh 2014    7.7   35.89</span>
<span class="co">#&gt; 3                  Slither  James Gunn 2006    6.5    7.77</span>
<span class="co">#&gt; 4                    Super  James Gunn 2010    6.8    0.32</span>
<span class="co">#&gt;   Metascore</span>
<span class="co">#&gt; 1        76</span>
<span class="co">#&gt; 2        72</span>
<span class="co">#&gt; 3        69</span>
<span class="co">#&gt; 4        50</span>

<span class="co"># selecting films released between 2006 and 2008</span>
<span class="va">movies.</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html">between</a></span><span class="op">(</span><span class="va">Year</span>, <span class="fl">2006</span>, <span class="fl">2008</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies.</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;             Title             Director Year Rating Revenue</span>
<span class="co">#&gt; 1       5- 25- 77 Patrick Read Johnson 2007    7.1      NA</span>
<span class="co">#&gt; 2 The Dark Knight    Christopher Nolan 2008    9.0  533.32</span>
<span class="co">#&gt; 3    The Prestige    Christopher Nolan 2006    8.5   53.08</span>
<span class="co">#&gt;   Metascore</span>
<span class="co">#&gt; 1        NA</span>
<span class="co">#&gt; 2        82</span>
<span class="co">#&gt; 3        66</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">movies.</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                      Title   Director Year Rating Revenue</span>
<span class="co">#&gt; 147       Taare Zameen Par Aamir Khan 2007    8.5    1.20</span>
<span class="co">#&gt; 148        Hostel: Part II   Eli Roth 2007    5.5   17.54</span>
<span class="co">#&gt; 149 Step Up 2: The Streets Jon M. Chu 2008    6.2   58.01</span>
<span class="co">#&gt;     Metascore</span>
<span class="co">#&gt; 147        42</span>
<span class="co">#&gt; 148        46</span>
<span class="co">#&gt; 149        50</span></code></pre></div>
<div id="randomly-selecting-rows-1" class="section level4" number="5.3.4.1">
<h4>
<span class="header-section-number">5.3.4.1</span> Randomly selecting rows<a class="anchor" aria-label="anchor" href="#randomly-selecting-rows-1"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_frac()</a></code> randomly samples rows and returns a fixed fraction of them.</p>
<div class="sourceCode" id="cb153"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># sampling by a proportion</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_frac</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">0.005</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt;               Title       Director Year Rating Revenue</span>
<span class="co">#&gt; 1          Bad Moms      Jon Lucas 2016    6.2  113.08</span>
<span class="co">#&gt; 2       Rescue Dawn  Werner Herzog 2006    7.3    5.48</span>
<span class="co">#&gt; 3       Rescue Dawn  Werner Herzog 2006    7.3    5.48</span>
<span class="co">#&gt; 4 The Warriors Gate Matthias Hoene 2016    5.3      NA</span>
<span class="co">#&gt; 5  Marie Antoinette  Sofia Coppola 2006    6.4   15.96</span>
<span class="co">#&gt;   Metascore</span>
<span class="co">#&gt; 1        60</span>
<span class="co">#&gt; 2        77</span>
<span class="co">#&gt; 3        77</span>
<span class="co">#&gt; 4        77</span>
<span class="co">#&gt; 5        65</span></code></pre></div>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n()</a></code> randomly samples rows and returns a fixed number of them.</p>
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># sampling by number</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">5</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt;                  Title         Director Year Rating Revenue</span>
<span class="co">#&gt; 1                Youth Paolo Sorrentino 2015    7.3    2.70</span>
<span class="co">#&gt; 2            Brimstone Martin Koolhoven 2016    7.1      NA</span>
<span class="co">#&gt; 3 Perfetti sconosciuti   Paolo Genovese 2016    7.7      NA</span>
<span class="co">#&gt; 4             Watchmen      Zack Snyder 2009    7.6  107.50</span>
<span class="co">#&gt; 5            Footloose     Craig Brewer 2011    5.9   51.78</span>
<span class="co">#&gt;   Metascore</span>
<span class="co">#&gt; 1        64</span>
<span class="co">#&gt; 2        44</span>
<span class="co">#&gt; 3        43</span>
<span class="co">#&gt; 4        56</span>
<span class="co">#&gt; 5        58</span></code></pre></div>
</div>
</div>
<div id="slicing" class="section level3" number="5.3.5">
<h3>
<span class="header-section-number">5.3.5</span> Slicing<a class="anchor" aria-label="anchor" href="#slicing"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice()</a></code> is used to slice a data set.</p>
<div class="sourceCode" id="cb155"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">200</span><span class="op">:</span><span class="fl">205</span><span class="op">)</span>
<span class="co">#&gt;                  Title                Director Year Rating</span>
<span class="co">#&gt; 1 Central Intelligence Rawson Marshall Thurber 2016    6.3</span>
<span class="co">#&gt; 2     Edge of Tomorrow              Doug Liman 2014    7.9</span>
<span class="co">#&gt; 3  A Cure for Wellness          Gore Verbinski 2016    6.5</span>
<span class="co">#&gt; 4              Snowden            Oliver Stone 2016    7.3</span>
<span class="co">#&gt; 5             Iron Man             Jon Favreau 2008    7.9</span>
<span class="co">#&gt; 6            Allegiant        Robert Schwentke 2016    5.7</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1  127.38        52</span>
<span class="co">#&gt; 2  100.19        71</span>
<span class="co">#&gt; 3    8.10        47</span>
<span class="co">#&gt; 4   21.48        58</span>
<span class="co">#&gt; 5  318.30        79</span>
<span class="co">#&gt; 6   66.00        33</span></code></pre></div>
</div>
<div id="top-values" class="section level3" number="5.3.6">
<h3>
<span class="header-section-number">5.3.6</span> Top values<a class="anchor" aria-label="anchor" href="#top-values"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n()</a></code> returns the top nth number of elements in a column.</p>
<div class="sourceCode" id="cb156"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># top 5 movies by revenue</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">5</span>, <span class="va">Revenue</span><span class="op">)</span>
<span class="co">#&gt;                                        Title</span>
<span class="co">#&gt; 1 Star Wars: Episode VII - The Force Awakens</span>
<span class="co">#&gt; 2                            The Dark Knight</span>
<span class="co">#&gt; 3                               The Avengers</span>
<span class="co">#&gt; 4                             Jurassic World</span>
<span class="co">#&gt; 5                                     Avatar</span>
<span class="co">#&gt;            Director Year Rating Revenue Metascore</span>
<span class="co">#&gt; 1       J.J. Abrams 2015    8.1  936.63        81</span>
<span class="co">#&gt; 2 Christopher Nolan 2008    9.0  533.32        82</span>
<span class="co">#&gt; 3       Joss Whedon 2012    8.1  623.28        69</span>
<span class="co">#&gt; 4   Colin Trevorrow 2015    7.0  652.18        59</span>
<span class="co">#&gt; 5     James Cameron 2009    7.8  760.51        83</span>

<span class="co"># if no column is specified, the last is used.</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt;                   Title           Director Year Rating</span>
<span class="co">#&gt; 1 Manchester by the Sea   Kenneth Lonergan 2016    7.9</span>
<span class="co">#&gt; 2             Moonlight      Barry Jenkins 2016    7.5</span>
<span class="co">#&gt; 3      12 Years a Slave      Steve McQueen 2013    8.1</span>
<span class="co">#&gt; 4       Pan's Labyrinth Guillermo del Toro 2006    8.2</span>
<span class="co">#&gt; 5           Ratatouille          Brad Bird 2007    8.0</span>
<span class="co">#&gt; 6               Gravity     Alfonso Cuarón 2013    7.8</span>
<span class="co">#&gt; 7               Boyhood  Richard Linklater 2014    7.9</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1   47.70        96</span>
<span class="co">#&gt; 2   27.85        99</span>
<span class="co">#&gt; 3   56.67        96</span>
<span class="co">#&gt; 4   37.62        98</span>
<span class="co">#&gt; 5  206.44        96</span>
<span class="co">#&gt; 6  274.08        96</span>
<span class="co">#&gt; 7   25.36       100</span></code></pre></div>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_frac()</a></code> returns the top nth elements in a column by proportion.</p>
<div class="sourceCode" id="cb157"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># top 0.5% of movies by revenue</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_frac</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">0.005</span>, <span class="va">Revenue</span><span class="op">)</span>
<span class="co">#&gt;                                        Title</span>
<span class="co">#&gt; 1 Star Wars: Episode VII - The Force Awakens</span>
<span class="co">#&gt; 2                            The Dark Knight</span>
<span class="co">#&gt; 3                               The Avengers</span>
<span class="co">#&gt; 4                             Jurassic World</span>
<span class="co">#&gt; 5                                     Avatar</span>
<span class="co">#&gt;            Director Year Rating Revenue Metascore</span>
<span class="co">#&gt; 1       J.J. Abrams 2015    8.1  936.63        81</span>
<span class="co">#&gt; 2 Christopher Nolan 2008    9.0  533.32        82</span>
<span class="co">#&gt; 3       Joss Whedon 2012    8.1  623.28        69</span>
<span class="co">#&gt; 4   Colin Trevorrow 2015    7.0  652.18        59</span>
<span class="co">#&gt; 5     James Cameron 2009    7.8  760.51        83</span>

<span class="co"># if no column is specified, the last is used.</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_frac</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fl">0.005</span><span class="op">)</span>
<span class="co">#&gt;                   Title           Director Year Rating</span>
<span class="co">#&gt; 1 Manchester by the Sea   Kenneth Lonergan 2016    7.9</span>
<span class="co">#&gt; 2             Moonlight      Barry Jenkins 2016    7.5</span>
<span class="co">#&gt; 3      12 Years a Slave      Steve McQueen 2013    8.1</span>
<span class="co">#&gt; 4       Pan's Labyrinth Guillermo del Toro 2006    8.2</span>
<span class="co">#&gt; 5           Ratatouille          Brad Bird 2007    8.0</span>
<span class="co">#&gt; 6               Gravity     Alfonso Cuarón 2013    7.8</span>
<span class="co">#&gt; 7               Boyhood  Richard Linklater 2014    7.9</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1   47.70        96</span>
<span class="co">#&gt; 2   27.85        99</span>
<span class="co">#&gt; 3   56.67        96</span>
<span class="co">#&gt; 4   37.62        98</span>
<span class="co">#&gt; 5  206.44        96</span>
<span class="co">#&gt; 6  274.08        96</span>
<span class="co">#&gt; 7   25.36       100</span></code></pre></div>
</div>
<div id="using-select-and-filter" class="section level3" number="5.3.7">
<h3>
<span class="header-section-number">5.3.7</span> Using select and filter<a class="anchor" aria-label="anchor" href="#using-select-and-filter"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb158"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">mov</span>, <span class="va">Year</span> <span class="op">==</span> <span class="fl">2006</span>, <span class="va">Rating</span> <span class="op">&gt;=</span> <span class="fl">8</span><span class="op">)</span>, <span class="fl">2</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span>
<span class="co">#&gt;                      Title Year Rating Revenue Metascore</span>
<span class="co">#&gt; 1             The Prestige 2006    8.5   53.08        66</span>
<span class="co">#&gt; 2             The Departed 2006    8.5  132.37        85</span>
<span class="co">#&gt; 3            Casino Royale 2006    8.0  167.01        80</span>
<span class="co">#&gt; 4          Pan's Labyrinth 2006    8.2   37.62        98</span>
<span class="co">#&gt; 5      The Lives of Others 2006    8.5   11.28        89</span>
<span class="co">#&gt; 6 The Pursuit of Happyness 2006    8.0  162.59        64</span>
<span class="co">#&gt; 7            Blood Diamond 2006    8.0   57.37        64</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">2</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span>, <span class="va">Year</span> <span class="op">==</span> <span class="fl">2006</span>, <span class="va">Rating</span> <span class="op">&gt;=</span> <span class="fl">8</span><span class="op">)</span>
<span class="co">#&gt;                      Title Year Rating Revenue Metascore</span>
<span class="co">#&gt; 1             The Prestige 2006    8.5   53.08        66</span>
<span class="co">#&gt; 2             The Departed 2006    8.5  132.37        85</span>
<span class="co">#&gt; 3            Casino Royale 2006    8.0  167.01        80</span>
<span class="co">#&gt; 4          Pan's Labyrinth 2006    8.2   37.62        98</span>
<span class="co">#&gt; 5      The Lives of Others 2006    8.5   11.28        89</span>
<span class="co">#&gt; 6 The Pursuit of Happyness 2006    8.0  162.59        64</span>
<span class="co">#&gt; 7            Blood Diamond 2006    8.0   57.37        64</span></code></pre></div>
<p>With such an operation, it is better to use the pipe operator.</p>
</div>
<div id="pipe-operator" class="section level3" number="5.3.8">
<h3>
<span class="header-section-number">5.3.8</span> Pipe operator<a class="anchor" aria-label="anchor" href="#pipe-operator"><i class="fas fa-link"></i></a>
</h3>
<p>The pipe operator (<code><a href="https://stringr.tidyverse.org/reference/pipe.html">%&gt;%</a></code>) passes an object forward into a function. The shortcut <code>Ctrl + Shift + M</code> for PC and <code>Cmd + Shift + M</code> for Mac is used to insert this operator. Below, we pass the dataset mov into the function <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>, which after processing, passes its output to <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>.</p>
<div class="sourceCode" id="cb159"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># passing movies dataset into filter and then to select</span>
<span class="va">mov</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Year</span> <span class="op">==</span> <span class="fl">2006</span> <span class="op">&amp;</span> <span class="va">Rating</span> <span class="op">&gt;=</span> <span class="fl">8</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span>
<span class="co">#&gt;                      Title Year Rating Revenue Metascore</span>
<span class="co">#&gt; 1             The Prestige 2006    8.5   53.08        66</span>
<span class="co">#&gt; 2             The Departed 2006    8.5  132.37        85</span>
<span class="co">#&gt; 3            Casino Royale 2006    8.0  167.01        80</span>
<span class="co">#&gt; 4          Pan's Labyrinth 2006    8.2   37.62        98</span>
<span class="co">#&gt; 5      The Lives of Others 2006    8.5   11.28        89</span>
<span class="co">#&gt; 6 The Pursuit of Happyness 2006    8.0  162.59        64</span>
<span class="co">#&gt; 7            Blood Diamond 2006    8.0   57.37        64</span>

<span class="va">mov</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Year</span> <span class="op">==</span> <span class="fl">2006</span> <span class="op">&amp;</span> <span class="va">Rating</span> <span class="op">&gt;=</span> <span class="fl">8</span><span class="op">)</span>
<span class="co">#&gt;                      Title Year Rating Revenue Metascore</span>
<span class="co">#&gt; 1             The Prestige 2006    8.5   53.08        66</span>
<span class="co">#&gt; 2             The Departed 2006    8.5  132.37        85</span>
<span class="co">#&gt; 3            Casino Royale 2006    8.0  167.01        80</span>
<span class="co">#&gt; 4          Pan's Labyrinth 2006    8.2   37.62        98</span>
<span class="co">#&gt; 5      The Lives of Others 2006    8.5   11.28        89</span>
<span class="co">#&gt; 6 The Pursuit of Happyness 2006    8.0  162.59        64</span>
<span class="co">#&gt; 7            Blood Diamond 2006    8.0   57.37        64</span></code></pre></div>
<p>Using <code>.</code> as a placeholder for the data set. The period will be replaced in the function by the data frame or tibble.</p>
<div class="sourceCode" id="cb160"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mov</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">Year</span> <span class="op">==</span> <span class="fl">2006</span> <span class="op">&amp;</span> <span class="va">.</span><span class="op">$</span><span class="va">Rating</span> <span class="op">&gt;=</span> <span class="fl">8</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span>
<span class="co">#&gt;                      Title Year Rating Revenue Metascore</span>
<span class="co">#&gt; 1             The Prestige 2006    8.5   53.08        66</span>
<span class="co">#&gt; 2             The Departed 2006    8.5  132.37        85</span>
<span class="co">#&gt; 3            Casino Royale 2006    8.0  167.01        80</span>
<span class="co">#&gt; 4          Pan's Labyrinth 2006    8.2   37.62        98</span>
<span class="co">#&gt; 5      The Lives of Others 2006    8.5   11.28        89</span>
<span class="co">#&gt; 6 The Pursuit of Happyness 2006    8.0  162.59        64</span>
<span class="co">#&gt; 7            Blood Diamond 2006    8.0   57.37        64</span></code></pre></div>
</div>
</div>
<div id="tr-changing" class="section level2" number="5.4">
<h2>
<span class="header-section-number">5.4</span> Manipulating Columns<a class="anchor" aria-label="anchor" href="#tr-changing"><i class="fas fa-link"></i></a>
</h2>
<div id="inserting-a-new-column-1" class="section level3" number="5.4.1">
<h3>
<span class="header-section-number">5.4.1</span> Inserting a new column<a class="anchor" aria-label="anchor" href="#inserting-a-new-column-1"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> and transmutate are used to manipulate columns. They are used to:</p>
<ul>
<li>insert new columns</li>
<li>duplicate columns</li>
<li>deriving new columns</li>
<li>update existing ones</li>
</ul>
<div class="sourceCode" id="cb161"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># adding a new column known as example</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Title'</span>, <span class="st">'Year'</span>, <span class="st">'Revenue'</span>, <span class="st">'Metascore'</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>example <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Revenue Metascore example</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014  333.13        76     459</span>
<span class="co">#&gt; 2              Prometheus 2012  126.46        65       4</span>
<span class="co">#&gt; 3                   Split 2016  138.12        62     130</span>
<span class="co">#&gt; 4                    Sing 2016  270.32        59     820</span>
<span class="co">#&gt; 5           Suicide Squad 2016  325.02        40     275</span>
<span class="co">#&gt; 6          The Great Wall 2016   45.13        42     153</span>

<span class="co"># duplicating the Revenue column</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Title'</span>, <span class="st">'Year'</span>, <span class="st">'Revenue'</span>, <span class="st">'Metascore'</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Metascore.2 <span class="op">=</span> <span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016  138.12        62</span>
<span class="co">#&gt; 4                    Sing 2016  270.32        59</span>
<span class="co">#&gt; 5           Suicide Squad 2016  325.02        40</span>
<span class="co">#&gt; 6          The Great Wall 2016   45.13        42</span>
<span class="co">#&gt;   Metascore.2</span>
<span class="co">#&gt; 1          76</span>
<span class="co">#&gt; 2          65</span>
<span class="co">#&gt; 3          62</span>
<span class="co">#&gt; 4          59</span>
<span class="co">#&gt; 5          40</span>
<span class="co">#&gt; 6          42</span>

<span class="co"># deriving the new column Movie Class</span>
<span class="va">labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Very Low'</span>, <span class="st">'Low'</span>, <span class="st">'Moderate'</span>, <span class="st">'High'</span>, <span class="st">'Very High'</span><span class="op">)</span>

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Title'</span>, <span class="st">'Year'</span>, <span class="st">'Rating'</span>, <span class="st">'Revenue'</span>, <span class="st">'Metascore'</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>`Movie Class` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="va">Rating</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5.5</span>, <span class="fl">6.5</span>, <span class="fl">7</span>, <span class="fl">7.5</span>, <span class="fl">10</span><span class="op">)</span>, 
                           labels <span class="op">=</span> <span class="va">labels</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Rating Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014    8.1  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012    7.0  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016    7.3  138.12        62</span>
<span class="co">#&gt; 4                    Sing 2016    7.2  270.32        59</span>
<span class="co">#&gt; 5           Suicide Squad 2016    6.2  325.02        40</span>
<span class="co">#&gt; 6          The Great Wall 2016    6.1   45.13        42</span>
<span class="co">#&gt;   Movie Class</span>
<span class="co">#&gt; 1   Very High</span>
<span class="co">#&gt; 2    Moderate</span>
<span class="co">#&gt; 3        High</span>
<span class="co">#&gt; 4        High</span>
<span class="co">#&gt; 5         Low</span>
<span class="co">#&gt; 6         Low</span>

<span class="co"># Updating the Director column to uppercase</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Title</span>, <span class="va">Director</span>, <span class="va">Year</span>, <span class="va">Rating</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Director <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html">toupper</a></span><span class="op">(</span><span class="va">Director</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                     Title             Director Year Rating</span>
<span class="co">#&gt; 1 Guardians of the Galaxy           JAMES GUNN 2014    8.1</span>
<span class="co">#&gt; 2              Prometheus         RIDLEY SCOTT 2012    7.0</span>
<span class="co">#&gt; 3                   Split   M. NIGHT SHYAMALAN 2016    7.3</span>
<span class="co">#&gt; 4                    Sing CHRISTOPHE LOURDELET 2016    7.2</span>
<span class="co">#&gt; 5           Suicide Squad           DAVID AYER 2016    6.2</span>
<span class="co">#&gt; 6          The Great Wall          YIMOU ZHANG 2016    6.1</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1  333.13        76</span>
<span class="co">#&gt; 2  126.46        65</span>
<span class="co">#&gt; 3  138.12        62</span>
<span class="co">#&gt; 4  270.32        59</span>
<span class="co">#&gt; 5  325.02        40</span>
<span class="co">#&gt; 6   45.13        42</span>

<span class="co"># using a customized function</span>
<span class="co"># defining a function</span>
<span class="va">fin_crisis</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw">if</span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">2008</span><span class="op">)</span><span class="op">{</span>
        <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="st">'pre financial crisis'</span><span class="op">)</span>
    <span class="op">}</span><span class="kw">else</span> <span class="kw">if</span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">2010</span> <span class="op">)</span><span class="op">{</span>
        <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="st">'financial crisis'</span><span class="op">)</span>
    <span class="op">}</span><span class="kw">else</span><span class="op">{</span>
        <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="st">'post financial crisis'</span><span class="op">)</span>
    <span class="op">}</span>
<span class="op">}</span>

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">2</span>, <span class="fl">7</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="st">'fin crisis Class'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">Year</span>, <span class="va">fin_crisis</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016  138.12        62</span>
<span class="co">#&gt; 4                    Sing 2016  270.32        59</span>
<span class="co">#&gt; 5           Suicide Squad 2016  325.02        40</span>
<span class="co">#&gt; 6          The Great Wall 2016   45.13        42</span>
<span class="co">#&gt;        fin crisis Class</span>
<span class="co">#&gt; 1 post financial crisis</span>
<span class="co">#&gt; 2 post financial crisis</span>
<span class="co">#&gt; 3 post financial crisis</span>
<span class="co">#&gt; 4 post financial crisis</span>
<span class="co">#&gt; 5 post financial crisis</span>
<span class="co">#&gt; 6 post financial crisis</span>

<span class="co"># deriving a new column from a calculation  </span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">11</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="st">'Rev/Run'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">Revenue</span><span class="op">/</span><span class="va">Runtime</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                     Title             Director Year Runtime</span>
<span class="co">#&gt; 1 Guardians of the Galaxy           James Gunn 2014     121</span>
<span class="co">#&gt; 2              Prometheus         Ridley Scott 2012     124</span>
<span class="co">#&gt; 3                   Split   M. Night Shyamalan 2016     117</span>
<span class="co">#&gt; 4                    Sing Christophe Lourdelet 2016     108</span>
<span class="co">#&gt; 5           Suicide Squad           David Ayer 2016     123</span>
<span class="co">#&gt; 6          The Great Wall          Yimou Zhang 2016     103</span>
<span class="co">#&gt;   Revenue Rev/Run</span>
<span class="co">#&gt; 1  333.13    2.75</span>
<span class="co">#&gt; 2  126.46    1.02</span>
<span class="co">#&gt; 3  138.12    1.18</span>
<span class="co">#&gt; 4  270.32    2.50</span>
<span class="co">#&gt; 5  325.02    2.64</span>
<span class="co">#&gt; 6   45.13    0.44</span></code></pre></div>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> is a condensed form of if else statement or CASE THEN in SQL.</p>
<div class="sourceCode" id="cb162"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># classifying movies by ratings</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">2</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>category <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span><span class="va">Rating</span> <span class="op">&lt;</span> <span class="fl">5.5</span> <span class="op">~</span> <span class="st">'Very Low'</span>, 
                              <span class="va">Rating</span> <span class="op">&lt;</span> <span class="fl">6.5</span> <span class="op">~</span> <span class="st">'Low'</span>, 
                              <span class="va">Rating</span> <span class="op">&lt;</span> <span class="fl">7</span> <span class="op">~</span> <span class="st">'Moderate'</span>, 
                              <span class="va">Rating</span> <span class="op">&lt;</span> <span class="fl">7.5</span> <span class="op">~</span> <span class="st">'High'</span>, 
                              <span class="va">Rating</span> <span class="op">&lt;=</span> <span class="fl">10</span> <span class="op">~</span> <span class="st">'Very High'</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Rating Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014    8.1  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012    7.0  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016    7.3  138.12        62</span>
<span class="co">#&gt; 4                    Sing 2016    7.2  270.32        59</span>
<span class="co">#&gt; 5           Suicide Squad 2016    6.2  325.02        40</span>
<span class="co">#&gt; 6          The Great Wall 2016    6.1   45.13        42</span>
<span class="co">#&gt;    category</span>
<span class="co">#&gt; 1 Very High</span>
<span class="co">#&gt; 2      High</span>
<span class="co">#&gt; 3      High</span>
<span class="co">#&gt; 4      High</span>
<span class="co">#&gt; 5       Low</span>
<span class="co">#&gt; 6       Low</span></code></pre></div>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/coalesce.html">coalesce()</a></code> which is modelled after the COALESCE function in SQL returns the first non-missing element. Using it, we can replace NA values in a column.</p>
<div class="sourceCode" id="cb163"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># selecting some rows containing NA values</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Revenue</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">23</span>, <span class="fl">26</span>, <span class="fl">40</span>, <span class="fl">43</span>, <span class="fl">48</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;                      Title        Director Year Rating</span>
<span class="co">#&gt; 1  The Autopsy of Jane Doe   André Ovredal 2016    6.8</span>
<span class="co">#&gt; 2                  Old Boy       Spike Lee 2013    5.8</span>
<span class="co">#&gt; 3                  Satanic Jeffrey G. Hunt 2016    3.7</span>
<span class="co">#&gt; 4      Absolutely Anything     Terry Jones 2015    6.0</span>
<span class="co">#&gt; 5 The Headhunter's Calling   Mark Williams 2016    6.9</span>
<span class="co">#&gt; 6           Predestination Michael Spierig 2014    7.5</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1      NA        65</span>
<span class="co">#&gt; 2      NA        49</span>
<span class="co">#&gt; 3      NA        NA</span>
<span class="co">#&gt; 4      NA        31</span>
<span class="co">#&gt; 5      NA        85</span>
<span class="co">#&gt; 6      NA        69</span>

<span class="co"># replacing NA values with a value</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Revenue <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/coalesce.html">coalesce</a></span><span class="op">(</span><span class="va">Revenue</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">23</span>, <span class="fl">26</span>, <span class="fl">40</span>, <span class="fl">43</span>, <span class="fl">48</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;                     Title             Director Year Rating</span>
<span class="co">#&gt; 1                Mindhorn           Sean Foley 2016    6.4</span>
<span class="co">#&gt; 2          Hounds of Love            Ben Young 2016    6.7</span>
<span class="co">#&gt; 3         Paris pieds nus       Dominique Abel 2016    6.8</span>
<span class="co">#&gt; 4               5- 25- 77 Patrick Read Johnson 2007    7.1</span>
<span class="co">#&gt; 5 Don't Fuck in the Woods        Shawn Burkett 2016    2.7</span>
<span class="co">#&gt; 6                  Fallen          Scott Hicks 2016    5.6</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1      50        71</span>
<span class="co">#&gt; 2      50        72</span>
<span class="co">#&gt; 3      50        NA</span>
<span class="co">#&gt; 4      50        NA</span>
<span class="co">#&gt; 5      50        NA</span>
<span class="co">#&gt; 6      50        NA</span>

<span class="co"># replacing NA values with a computed value (mean/median)</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Revenue <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/coalesce.html">coalesce</a></span><span class="op">(</span><span class="va">Revenue</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">Revenue</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, 
         Metascore <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/coalesce.html">coalesce</a></span><span class="op">(</span><span class="va">Metascore</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Metascore</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">23</span>, <span class="fl">26</span>, <span class="fl">40</span>, <span class="fl">43</span>, <span class="fl">48</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;                     Title             Director Year Rating</span>
<span class="co">#&gt; 1                Mindhorn           Sean Foley 2016    6.4</span>
<span class="co">#&gt; 2          Hounds of Love            Ben Young 2016    6.7</span>
<span class="co">#&gt; 3         Paris pieds nus       Dominique Abel 2016    6.8</span>
<span class="co">#&gt; 4               5- 25- 77 Patrick Read Johnson 2007    7.1</span>
<span class="co">#&gt; 5 Don't Fuck in the Woods        Shawn Burkett 2016    2.7</span>
<span class="co">#&gt; 6                  Fallen          Scott Hicks 2016    5.6</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1      48        71</span>
<span class="co">#&gt; 2      48        72</span>
<span class="co">#&gt; 3      48        59</span>
<span class="co">#&gt; 4      48        59</span>
<span class="co">#&gt; 5      48        59</span>
<span class="co">#&gt; 6      48        59</span></code></pre></div>
<p>The function <code>transmutate()</code> behaves like <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> but drops other columns that are not selected.</p>
<div class="sourceCode" id="cb164"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># transmutate drops unselected columns</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Title</span>, <span class="va">Director</span>, <span class="va">Year</span>, <span class="va">Rating</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">transmute</a></span><span class="op">(</span>Director <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html">toupper</a></span><span class="op">(</span><span class="va">Director</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;               Director</span>
<span class="co">#&gt; 1           JAMES GUNN</span>
<span class="co">#&gt; 2         RIDLEY SCOTT</span>
<span class="co">#&gt; 3   M. NIGHT SHYAMALAN</span>
<span class="co">#&gt; 4 CHRISTOPHE LOURDELET</span>
<span class="co">#&gt; 5           DAVID AYER</span>
<span class="co">#&gt; 6          YIMOU ZHANG</span>

<span class="co"># transmutate keeps selected columns</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Title</span>, <span class="va">Director</span>, <span class="va">Year</span>, <span class="va">Runtime</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">transmute</a></span><span class="op">(</span>Director <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html">toupper</a></span><span class="op">(</span><span class="va">Director</span><span class="op">)</span>, 
            <span class="va">Year</span>,
            Revenue <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">Revenue</span><span class="op">/</span><span class="va">Runtime</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;               Director Year Revenue</span>
<span class="co">#&gt; 1           JAMES GUNN 2014    2.75</span>
<span class="co">#&gt; 2         RIDLEY SCOTT 2012    1.02</span>
<span class="co">#&gt; 3   M. NIGHT SHYAMALAN 2016    1.18</span>
<span class="co">#&gt; 4 CHRISTOPHE LOURDELET 2016    2.50</span>
<span class="co">#&gt; 5           DAVID AYER 2016    2.64</span>
<span class="co">#&gt; 6          YIMOU ZHANG 2016    0.44</span></code></pre></div>
</div>
</div>
<div id="sorting-and-ranking-1" class="section level2" number="5.5">
<h2>
<span class="header-section-number">5.5</span> Sorting and ranking<a class="anchor" aria-label="anchor" href="#sorting-and-ranking-1"><i class="fas fa-link"></i></a>
</h2>
<div id="tr-sort" class="section level3" number="5.5.1">
<h3>
<span class="header-section-number">5.5.1</span> Sorting<a class="anchor" aria-label="anchor" href="#tr-sort"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> is used to sort data frames. It does an ascending sort but to do a descending sort, we use the function <code><a href="https://dplyr.tidyverse.org/reference/desc.html">desc()</a></code> or the negative sign.</p>
<div class="sourceCode" id="cb165"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># sort increasing</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Runtime</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">Revenue</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;                       Title Year Runtime Revenue Metascore</span>
<span class="co">#&gt; 1          A Kind of Murder 2016      95    0.00        50</span>
<span class="co">#&gt; 2                Dead Awake 2016      99    0.01        NA</span>
<span class="co">#&gt; 3                 Wakefield 2016     106    0.01        61</span>
<span class="co">#&gt; 4                  Lovesong 2016      84    0.01        74</span>
<span class="co">#&gt; 5               Love, Rosie 2014     102    0.01        44</span>
<span class="co">#&gt; 6           Into the Forest 2015     101    0.01        59</span>
<span class="co">#&gt; 7                Stake Land 2010      98    0.02        66</span>
<span class="co">#&gt; 8            The First Time 2012      95    0.02        55</span>
<span class="co">#&gt; 9  The Blackcoat's Daughter 2015      93    0.02        68</span>
<span class="co">#&gt; 10         The Sea of Trees 2015     110    0.02        23</span>

<span class="co"># sort decreasing using the negative sign</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Runtime</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="op">-</span><span class="va">Revenue</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;                                         Title Year Runtime</span>
<span class="co">#&gt; 1  Star Wars: Episode VII - The Force Awakens 2015     136</span>
<span class="co">#&gt; 2                                      Avatar 2009     162</span>
<span class="co">#&gt; 3                              Jurassic World 2015     124</span>
<span class="co">#&gt; 4                                The Avengers 2012     143</span>
<span class="co">#&gt; 5                             The Dark Knight 2008     152</span>
<span class="co">#&gt; 6                                   Rogue One 2016     133</span>
<span class="co">#&gt; 7                                Finding Dory 2016      97</span>
<span class="co">#&gt; 8                     Avengers: Age of Ultron 2015     141</span>
<span class="co">#&gt; 9                       The Dark Knight Rises 2012     164</span>
<span class="co">#&gt; 10            The Hunger Games: Catching Fire 2013     146</span>
<span class="co">#&gt;    Revenue Metascore</span>
<span class="co">#&gt; 1   936.63        81</span>
<span class="co">#&gt; 2   760.51        83</span>
<span class="co">#&gt; 3   652.18        59</span>
<span class="co">#&gt; 4   623.28        69</span>
<span class="co">#&gt; 5   533.32        82</span>
<span class="co">#&gt; 6   532.17        65</span>
<span class="co">#&gt; 7   486.29        77</span>
<span class="co">#&gt; 8   458.99        66</span>
<span class="co">#&gt; 9   448.13        78</span>
<span class="co">#&gt; 10  424.65        76</span>

<span class="co"># sort decreasing using desc()</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Runtime</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">Revenue</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;                                         Title Year Runtime</span>
<span class="co">#&gt; 1  Star Wars: Episode VII - The Force Awakens 2015     136</span>
<span class="co">#&gt; 2                                      Avatar 2009     162</span>
<span class="co">#&gt; 3                              Jurassic World 2015     124</span>
<span class="co">#&gt; 4                                The Avengers 2012     143</span>
<span class="co">#&gt; 5                             The Dark Knight 2008     152</span>
<span class="co">#&gt; 6                                   Rogue One 2016     133</span>
<span class="co">#&gt; 7                                Finding Dory 2016      97</span>
<span class="co">#&gt; 8                     Avengers: Age of Ultron 2015     141</span>
<span class="co">#&gt; 9                       The Dark Knight Rises 2012     164</span>
<span class="co">#&gt; 10            The Hunger Games: Catching Fire 2013     146</span>
<span class="co">#&gt;    Revenue Metascore</span>
<span class="co">#&gt; 1   936.63        81</span>
<span class="co">#&gt; 2   760.51        83</span>
<span class="co">#&gt; 3   652.18        59</span>
<span class="co">#&gt; 4   623.28        69</span>
<span class="co">#&gt; 5   533.32        82</span>
<span class="co">#&gt; 6   532.17        65</span>
<span class="co">#&gt; 7   486.29        77</span>
<span class="co">#&gt; 8   458.99        66</span>
<span class="co">#&gt; 9   448.13        78</span>
<span class="co">#&gt; 10  424.65        76</span>


<span class="co"># sorting on multiple columns</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Runtime</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="op">-</span><span class="va">Metascore</span>, <span class="va">Revenue</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;                    Title Year Runtime Revenue Metascore</span>
<span class="co">#&gt; 1                Boyhood 2014     165   25.36       100</span>
<span class="co">#&gt; 2              Moonlight 2016     111   27.85        99</span>
<span class="co">#&gt; 3        Pan's Labyrinth 2006     118   37.62        98</span>
<span class="co">#&gt; 4  Manchester by the Sea 2016     137   47.70        96</span>
<span class="co">#&gt; 5       12 Years a Slave 2013     134   56.67        96</span>
<span class="co">#&gt; 6            Ratatouille 2007     111  206.44        96</span>
<span class="co">#&gt; 7                Gravity 2013      91  274.08        96</span>
<span class="co">#&gt; 8                  Carol 2015     118    0.25        95</span>
<span class="co">#&gt; 9       Zero Dark Thirty 2012     157   95.72        95</span>
<span class="co">#&gt; 10    The Social Network 2010     120   96.92        95</span></code></pre></div>
</div>
<div id="ranking-1" class="section level3" number="5.5.2">
<h3>
<span class="header-section-number">5.5.2</span> Ranking<a class="anchor" aria-label="anchor" href="#ranking-1"><i class="fas fa-link"></i></a>
</h3>
<p>The functions <code><a href="https://dplyr.tidyverse.org/reference/ranking.html">row_number()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/ranking.html">ntile()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/ranking.html">min_rank()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/ranking.html">dense_rank()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/ranking.html">percent_rank()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/ranking.html">cume_dist()</a></code> are used for ranking.</p>
<div class="sourceCode" id="cb166"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ranking by revenue ascending</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>rank_by_revenue <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html">dense_rank</a></span><span class="op">(</span><span class="va">Revenue</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016  138.12        62</span>
<span class="co">#&gt; 4                    Sing 2016  270.32        59</span>
<span class="co">#&gt; 5           Suicide Squad 2016  325.02        40</span>
<span class="co">#&gt; 6          The Great Wall 2016   45.13        42</span>
<span class="co">#&gt;   rank_by_revenue</span>
<span class="co">#&gt; 1             783</span>
<span class="co">#&gt; 2             623</span>
<span class="co">#&gt; 3             646</span>
<span class="co">#&gt; 4             761</span>
<span class="co">#&gt; 5             781</span>
<span class="co">#&gt; 6             370</span>

<span class="co"># ranking by revenue decreasing using desc()</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>rank_by_revenue <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html">dense_rank</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">Revenue</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016  138.12        62</span>
<span class="co">#&gt; 4                    Sing 2016  270.32        59</span>
<span class="co">#&gt; 5           Suicide Squad 2016  325.02        40</span>
<span class="co">#&gt; 6          The Great Wall 2016   45.13        42</span>
<span class="co">#&gt;   rank_by_revenue</span>
<span class="co">#&gt; 1              32</span>
<span class="co">#&gt; 2             192</span>
<span class="co">#&gt; 3             169</span>
<span class="co">#&gt; 4              54</span>
<span class="co">#&gt; 5              34</span>
<span class="co">#&gt; 6             445</span>

<span class="co"># ranking by revenue decreasing using negative sign</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>rank_by_revenue <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html">dense_rank</a></span><span class="op">(</span><span class="op">-</span><span class="va">Revenue</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016  138.12        62</span>
<span class="co">#&gt; 4                    Sing 2016  270.32        59</span>
<span class="co">#&gt; 5           Suicide Squad 2016  325.02        40</span>
<span class="co">#&gt; 6          The Great Wall 2016   45.13        42</span>
<span class="co">#&gt;   rank_by_revenue</span>
<span class="co">#&gt; 1              32</span>
<span class="co">#&gt; 2             192</span>
<span class="co">#&gt; 3             169</span>
<span class="co">#&gt; 4              54</span>
<span class="co">#&gt; 5              34</span>
<span class="co">#&gt; 6             445</span>

<span class="co"># rank and arrange</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>rank_by_revenue <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html">dense_rank</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">Revenue</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">Revenue</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                                        Title Year Revenue</span>
<span class="co">#&gt; 1 Star Wars: Episode VII - The Force Awakens 2015  936.63</span>
<span class="co">#&gt; 2                                     Avatar 2009  760.51</span>
<span class="co">#&gt; 3                             Jurassic World 2015  652.18</span>
<span class="co">#&gt; 4                               The Avengers 2012  623.28</span>
<span class="co">#&gt; 5                            The Dark Knight 2008  533.32</span>
<span class="co">#&gt; 6                                  Rogue One 2016  532.17</span>
<span class="co">#&gt;   Metascore rank_by_revenue</span>
<span class="co">#&gt; 1        81               1</span>
<span class="co">#&gt; 2        83               2</span>
<span class="co">#&gt; 3        59               3</span>
<span class="co">#&gt; 4        69               4</span>
<span class="co">#&gt; 5        82               5</span>
<span class="co">#&gt; 6        65               6</span>

<span class="co"># adding row numbers</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">Year</span>, <span class="va">Revenue</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>`row number` <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                              Title Year Revenue Metascore</span>
<span class="co">#&gt; 1                        Idiocracy 2006    0.44        66</span>
<span class="co">#&gt; 2                         The Host 2006    2.20        85</span>
<span class="co">#&gt; 3 Perfume: The Story of a Murderer 2006    2.21        56</span>
<span class="co">#&gt; 4                         The Fall 2006    2.28        64</span>
<span class="co">#&gt; 5                    She's the Man 2006    2.34        45</span>
<span class="co">#&gt; 6                      Rescue Dawn 2006    5.48        77</span>
<span class="co">#&gt;   row number</span>
<span class="co">#&gt; 1          1</span>
<span class="co">#&gt; 2          2</span>
<span class="co">#&gt; 3          3</span>
<span class="co">#&gt; 4          4</span>
<span class="co">#&gt; 5          5</span>
<span class="co">#&gt; 6          6</span>

<span class="co"># dividing data into evenly sized buckets</span>
<span class="va">movies</span> <span class="op">&lt;-</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">Year</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>buckets <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html">ntile</a></span><span class="op">(</span><span class="va">Revenue</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">movies</span><span class="op">)</span>
<span class="co">#&gt;                                        Title Year Revenue</span>
<span class="co">#&gt; 1                               The Prestige 2006   53.08</span>
<span class="co">#&gt; 2 Pirates of the Caribbean: Dead Man's Chest 2006  423.03</span>
<span class="co">#&gt; 3                               The Departed 2006  132.37</span>
<span class="co">#&gt; 4                                        300 2006  210.59</span>
<span class="co">#&gt; 5                              Casino Royale 2006  167.01</span>
<span class="co">#&gt; 6                                       Cars 2006  244.05</span>
<span class="co">#&gt;   Metascore buckets</span>
<span class="co">#&gt; 1        66       3</span>
<span class="co">#&gt; 2        53       5</span>
<span class="co">#&gt; 3        85       4</span>
<span class="co">#&gt; 4        52       5</span>
<span class="co">#&gt; 5        80       5</span>
<span class="co">#&gt; 6        73       5</span>

<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">movies</span><span class="op">$</span><span class="va">buckets</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   1   2   3   4   5 </span>
<span class="co">#&gt; 175 175 174 174 174</span>

<span class="co"># calculating mean by buckets</span>
<span class="fu"><a href="https://rdrr.io/r/base/tapply.html">tapply</a></span><span class="op">(</span><span class="va">movies</span><span class="op">$</span><span class="va">Metascore</span>, <span class="va">movies</span><span class="op">$</span><span class="va">buckets</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;    1    2    3    4    5 </span>
<span class="co">#&gt; 62.4 57.7 54.3 58.5 64.9</span></code></pre></div>
</div>
</div>
<div id="splitting-and-merging-columns-1" class="section level2" number="5.6">
<h2>
<span class="header-section-number">5.6</span> Splitting and Merging columns<a class="anchor" aria-label="anchor" href="#splitting-and-merging-columns-1"><i class="fas fa-link"></i></a>
</h2>
<div id="splitting-columns-1" class="section level3" number="5.6.1">
<h3>
<span class="header-section-number">5.6.1</span> Splitting columns<a class="anchor" aria-label="anchor" href="#splitting-columns-1"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://tidyr.tidyverse.org/reference/separate.html">separate()</a></code> from the package tidyr is used to split columns.</p>
<div class="sourceCode" id="cb167"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># reading data</span>
<span class="va">busiestAirports</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/busiestAirports.csv"</span>, 
                              header <span class="op">=</span> <span class="cn">T</span>, 
                              sep<span class="op">=</span><span class="st">","</span>, 
                              dec <span class="op">=</span> <span class="st">"."</span>, 
                              quote <span class="op">=</span> <span class="st">"\""</span><span class="op">)</span>

<span class="va">busiestAirports</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">busiestAirports</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'iata_icao'</span> <span class="op">=</span> <span class="fl">5</span>, <span class="st">'location'</span>, <span class="st">'country'</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">busiestAirports</span><span class="op">)</span>
<span class="co">#&gt;   iata_icao                 location              country</span>
<span class="co">#&gt; 1  ATL/KATL         Atlanta, Georgia        United States</span>
<span class="co">#&gt; 2  PEK/ZBAA Chaoyang-Shunyi, Beijing                China</span>
<span class="co">#&gt; 3  DXB/OMDB           Garhoud, Dubai United Arab Emirates</span>
<span class="co">#&gt; 4  LAX/KLAX  Los Angeles, California        United States</span>
<span class="co">#&gt; 5  HND/RJTT               Ota, Tokyo                Japan</span>
<span class="co">#&gt; 6  ORD/KORD        Chicago, Illinois        United States</span>

<span class="co"># splitting the column iata_icao into iata and icao</span>
<span class="va">busiest_Airports</span> <span class="op">&lt;-</span> 
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html">separate</a></span><span class="op">(</span><span class="va">busiestAirports</span>, col <span class="op">=</span> <span class="st">'iata_icao'</span>, into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'iata'</span>, <span class="st">'icao'</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">'/'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">busiest_Airports</span><span class="op">)</span>
<span class="co">#&gt;   iata icao                 location              country</span>
<span class="co">#&gt; 1  ATL KATL         Atlanta, Georgia        United States</span>
<span class="co">#&gt; 2  PEK ZBAA Chaoyang-Shunyi, Beijing                China</span>
<span class="co">#&gt; 3  DXB OMDB           Garhoud, Dubai United Arab Emirates</span>
<span class="co">#&gt; 4  LAX KLAX  Los Angeles, California        United States</span>
<span class="co">#&gt; 5  HND RJTT               Ota, Tokyo                Japan</span>
<span class="co">#&gt; 6  ORD KORD        Chicago, Illinois        United States</span></code></pre></div>
<p>Also, we can make use of mutate() and substring() from base R or str_sub() from stringr to split by position.</p>
<div class="sourceCode" id="cb168"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># using substring</span>
<span class="va">busiestAirports</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>iata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html">substring</a></span><span class="op">(</span><span class="va">iata_icao</span>, <span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>, icao <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html">substring</a></span><span class="op">(</span><span class="va">iata_icao</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                   location              country iata icao</span>
<span class="co">#&gt; 1         Atlanta, Georgia        United States  ATL  KAT</span>
<span class="co">#&gt; 2 Chaoyang-Shunyi, Beijing                China  PEK  ZBA</span>
<span class="co">#&gt; 3           Garhoud, Dubai United Arab Emirates  DXB  OMD</span>
<span class="co">#&gt; 4  Los Angeles, California        United States  LAX  KLA</span>
<span class="co">#&gt; 5               Ota, Tokyo                Japan  HND  RJT</span>
<span class="co">#&gt; 6        Chicago, Illinois        United States  ORD  KOR</span>

<span class="co"># using str_sub</span>
<span class="va">busiestAirports</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>iata <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">iata_icao</span>, <span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>, icao <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">iata_icao</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                   location              country iata icao</span>
<span class="co">#&gt; 1         Atlanta, Georgia        United States  ATL  KAT</span>
<span class="co">#&gt; 2 Chaoyang-Shunyi, Beijing                China  PEK  ZBA</span>
<span class="co">#&gt; 3           Garhoud, Dubai United Arab Emirates  DXB  OMD</span>
<span class="co">#&gt; 4  Los Angeles, California        United States  LAX  KLA</span>
<span class="co">#&gt; 5               Ota, Tokyo                Japan  HND  RJT</span>
<span class="co">#&gt; 6        Chicago, Illinois        United States  ORD  KOR</span></code></pre></div>
</div>
<div id="merging-columns-1" class="section level3" number="5.6.2">
<h3>
<span class="header-section-number">5.6.2</span> Merging columns<a class="anchor" aria-label="anchor" href="#merging-columns-1"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://tidyr.tidyverse.org/reference/unite.html">unite()</a></code> from the package tidyr is used to merge columns.</p>
<div class="sourceCode" id="cb169"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># reading data</span>
<span class="va">busiestAirports</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/busiestAirports.csv"</span>, 
                              header <span class="op">=</span> <span class="cn">T</span>, 
                              sep<span class="op">=</span><span class="st">","</span>, 
                              dec <span class="op">=</span> <span class="st">"."</span>, 
                              quote <span class="op">=</span> <span class="st">"\""</span><span class="op">)</span>
<span class="va">busiestAirports</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">busiestAirports</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'iata_icao'</span> <span class="op">=</span> <span class="fl">5</span>, <span class="st">'location'</span>, <span class="st">'country'</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">busiestAirports</span><span class="op">)</span>
<span class="co">#&gt;   iata_icao                 location              country</span>
<span class="co">#&gt; 1  ATL/KATL         Atlanta, Georgia        United States</span>
<span class="co">#&gt; 2  PEK/ZBAA Chaoyang-Shunyi, Beijing                China</span>
<span class="co">#&gt; 3  DXB/OMDB           Garhoud, Dubai United Arab Emirates</span>
<span class="co">#&gt; 4  LAX/KLAX  Los Angeles, California        United States</span>
<span class="co">#&gt; 5  HND/RJTT               Ota, Tokyo                Japan</span>
<span class="co">#&gt; 6  ORD/KORD        Chicago, Illinois        United States</span>

<span class="co"># merging the columns iata, icao into iata_icao</span>
<span class="va">busiestAirports</span> <span class="op">&lt;-</span> 
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unite.html">unite</a></span><span class="op">(</span><span class="va">busiestAirports</span>, <span class="va">location</span>, <span class="va">country</span>, col <span class="op">=</span> <span class="va">`location country`</span>, sep <span class="op">=</span> <span class="st">', '</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">busiestAirports</span><span class="op">)</span>
<span class="co">#&gt;   iata_icao                       location country</span>
<span class="co">#&gt; 1  ATL/KATL        Atlanta, Georgia, United States</span>
<span class="co">#&gt; 2  PEK/ZBAA        Chaoyang-Shunyi, Beijing, China</span>
<span class="co">#&gt; 3  DXB/OMDB   Garhoud, Dubai, United Arab Emirates</span>
<span class="co">#&gt; 4  LAX/KLAX Los Angeles, California, United States</span>
<span class="co">#&gt; 5  HND/RJTT                      Ota, Tokyo, Japan</span>
<span class="co">#&gt; 6  ORD/KORD       Chicago, Illinois, United States</span></code></pre></div>
</div>
<div id="rearranging-columns" class="section level3" number="5.6.3">
<h3>
<span class="header-section-number">5.6.3</span> Rearranging columns<a class="anchor" aria-label="anchor" href="#rearranging-columns"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate()</a></code> is used to rearrange columns. It was added with dplr 1.0.0.</p>
<div class="sourceCode" id="cb170"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># rearranging columns</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Runtime</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;   Revenue Metascore                   Title Year Runtime</span>
<span class="co">#&gt; 1  333.13        76 Guardians of the Galaxy 2014     121</span>
<span class="co">#&gt; 2  126.46        65              Prometheus 2012     124</span>
<span class="co">#&gt; 3  138.12        62                   Split 2016     117</span>

<span class="co"># placing year after metascore</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Runtime</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">Year</span>, .after <span class="op">=</span> <span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                     Title Runtime Revenue Metascore Year</span>
<span class="co">#&gt; 1 Guardians of the Galaxy     121  333.13        76 2014</span>
<span class="co">#&gt; 2              Prometheus     124  126.46        65 2012</span>
<span class="co">#&gt; 3                   Split     117  138.12        62 2016</span>

<span class="co"># placing year before title</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Runtime</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">Year</span>, .before <span class="op">=</span> <span class="va">Title</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;   Year                   Title Runtime Revenue Metascore</span>
<span class="co">#&gt; 1 2014 Guardians of the Galaxy     121  333.13        76</span>
<span class="co">#&gt; 2 2012              Prometheus     124  126.46        65</span>
<span class="co">#&gt; 3 2016                   Split     117  138.12        62</span>

<span class="co"># placing year at the end</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Runtime</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">Year</span>, .after <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">last_col</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                     Title Runtime Revenue Metascore Year</span>
<span class="co">#&gt; 1 Guardians of the Galaxy     121  333.13        76 2014</span>
<span class="co">#&gt; 2              Prometheus     124  126.46        65 2012</span>
<span class="co">#&gt; 3                   Split     117  138.12        62 2016</span>

<span class="co"># numeric columns last</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Runtime</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, .after <span class="op">=</span> <span class="fu">where</span><span class="op">(</span><span class="va">is.character</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Runtime Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014     121  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012     124  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016     117  138.12        62</span>

<span class="co"># numeric columns first</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Runtime</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, .before <span class="op">=</span> <span class="fu">where</span><span class="op">(</span><span class="va">is.character</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;   Year Runtime Revenue Metascore                   Title</span>
<span class="co">#&gt; 1 2014     121  333.13        76 Guardians of the Galaxy</span>
<span class="co">#&gt; 2 2012     124  126.46        65              Prometheus</span>
<span class="co">#&gt; 3 2016     117  138.12        62                   Split</span>

<span class="co"># selecting character columns only</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Runtime</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.character</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;                     Title Year Runtime Revenue Metascore</span>
<span class="co">#&gt; 1 Guardians of the Galaxy 2014     121  333.13        76</span>
<span class="co">#&gt; 2              Prometheus 2012     124  126.46        65</span>
<span class="co">#&gt; 3                   Split 2016     117  138.12        62</span></code></pre></div>
</div>
<div id="deleting-columns-of-data" class="section level3" number="5.6.4">
<h3>
<span class="header-section-number">5.6.4</span> Deleting columns of data<a class="anchor" aria-label="anchor" href="#deleting-columns-of-data"><i class="fas fa-link"></i></a>
</h3>
<p>There is no special function to delete columns but the function <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> can be used to select or drop columns.</p>
</div>
</div>
<div id="manipulating-rows-1" class="section level2" number="5.7">
<h2>
<span class="header-section-number">5.7</span> Manipulating Rows<a class="anchor" aria-label="anchor" href="#manipulating-rows-1"><i class="fas fa-link"></i></a>
</h2>
<div id="inserting-rows" class="section level3" number="5.7.1">
<h3>
<span class="header-section-number">5.7.1</span> Inserting rows<a class="anchor" aria-label="anchor" href="#inserting-rows"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://tibble.tidyverse.org/reference/add_row.html">add_row()</a></code> is used to add row(s) to data frames. It adds:</p>
<ul>
<li>single row with add_row(dt, column_name = value)</li>
<li>multiple rows with add_row(dt, column_name = values)</li>
</ul>
<div class="sourceCode" id="cb171"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># adding a single row of data</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/add_row.html">add_row</a></span><span class="op">(</span>Title <span class="op">=</span> <span class="st">"the big g"</span>, 
        Director <span class="op">=</span> <span class="st">"goro lovic"</span>, 
        Year <span class="op">=</span> <span class="fl">2015</span>, 
        Rating <span class="op">=</span> <span class="fl">9.9</span>, 
        Revenue <span class="op">=</span> <span class="fl">1000</span>, 
        Metascore <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                       Title         Director Year Rating</span>
<span class="co">#&gt; 996    Secret in Their Eyes        Billy Ray 2015    6.2</span>
<span class="co">#&gt; 997         Hostel: Part II         Eli Roth 2007    5.5</span>
<span class="co">#&gt; 998  Step Up 2: The Streets       Jon M. Chu 2008    6.2</span>
<span class="co">#&gt; 999            Search Party   Scot Armstrong 2014    5.6</span>
<span class="co">#&gt; 1000             Nine Lives Barry Sonnenfeld 2016    5.3</span>
<span class="co">#&gt; 1001              the big g       goro lovic 2015    9.9</span>
<span class="co">#&gt;      Revenue Metascore</span>
<span class="co">#&gt; 996       NA        45</span>
<span class="co">#&gt; 997    17.54        46</span>
<span class="co">#&gt; 998    58.01        50</span>
<span class="co">#&gt; 999       NA        22</span>
<span class="co">#&gt; 1000   19.64        11</span>
<span class="co">#&gt; 1001 1000.00       100</span>

<span class="co"># adding multiple rows of data</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/add_row.html">add_row</a></span><span class="op">(</span>Title<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"the big g"</span>, <span class="st">"everyday"</span>, <span class="st">"true colors"</span><span class="op">)</span>, 
          Director <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"goro lovic"</span>, <span class="st">"fk"</span>, <span class="st">"tupac"</span><span class="op">)</span>, 
          Year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="fl">2016</span>, <span class="fl">2014</span><span class="op">)</span>, 
          Rating <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">9.9</span>, <span class="fl">6.6</span>, <span class="fl">8</span><span class="op">)</span>, 
          Revenue <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">250</span>, <span class="fl">350</span><span class="op">)</span>, 
          Metascore <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">60</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                       Title         Director Year Rating</span>
<span class="co">#&gt; 998  Step Up 2: The Streets       Jon M. Chu 2008    6.2</span>
<span class="co">#&gt; 999            Search Party   Scot Armstrong 2014    5.6</span>
<span class="co">#&gt; 1000             Nine Lives Barry Sonnenfeld 2016    5.3</span>
<span class="co">#&gt; 1001              the big g       goro lovic 2015    9.9</span>
<span class="co">#&gt; 1002               everyday               fk 2016    6.6</span>
<span class="co">#&gt; 1003            true colors            tupac 2014    8.0</span>
<span class="co">#&gt;      Revenue Metascore</span>
<span class="co">#&gt; 998    58.01        50</span>
<span class="co">#&gt; 999       NA        22</span>
<span class="co">#&gt; 1000   19.64        11</span>
<span class="co">#&gt; 1001 1000.00       100</span>
<span class="co">#&gt; 1002  250.00        60</span>
<span class="co">#&gt; 1003  350.00        40</span></code></pre></div>
<p>Rows can also be added using the function <code><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows()</a></code> which is an efficient implementation of <code><a href="https://rdrr.io/r/base/do.call.html">do.call(rbind, dfs)</a></code> in base R.</p>
<div class="sourceCode" id="cb172"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># adding a single row</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>Title <span class="op">=</span> <span class="st">"the big g"</span>, 
                 Director <span class="op">=</span> <span class="st">"goro lovic"</span>, 
                 Year <span class="op">=</span> <span class="fl">2015</span>, 
                 Rating <span class="op">=</span> <span class="fl">9.9</span>, 
                 Revenue <span class="op">=</span> <span class="fl">1000</span>, 
                 Metascore <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;             Title         Director Year Rating Revenue</span>
<span class="co">#&gt; 999  Search Party   Scot Armstrong 2014    5.6      NA</span>
<span class="co">#&gt; 1000   Nine Lives Barry Sonnenfeld 2016    5.3   19.64</span>
<span class="co">#&gt; 1001    the big g       goro lovic 2015    9.9 1000.00</span>
<span class="co">#&gt;      Metascore</span>
<span class="co">#&gt; 999         22</span>
<span class="co">#&gt; 1000        11</span>
<span class="co">#&gt; 1001       100</span>

<span class="co"># adding multiple rows</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>Rank<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span>,
                 Title<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"the big g"</span>, <span class="st">"everyday"</span>, <span class="st">"true colors"</span><span class="op">)</span>, 
                 Director <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"goro lovic"</span>, <span class="st">"fk"</span>, <span class="st">"tupac"</span><span class="op">)</span>, 
                 Year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="fl">2016</span>, <span class="fl">2014</span><span class="op">)</span>, 
                 Rating <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">9.9</span>, <span class="fl">6.6</span>, <span class="fl">8</span><span class="op">)</span>, 
                 Revenue <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">250</span>, <span class="fl">350</span><span class="op">)</span>, 
                 Metascore <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">60</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;                       Title         Director Year Rating</span>
<span class="co">#&gt; 998  Step Up 2: The Streets       Jon M. Chu 2008    6.2</span>
<span class="co">#&gt; 999            Search Party   Scot Armstrong 2014    5.6</span>
<span class="co">#&gt; 1000             Nine Lives Barry Sonnenfeld 2016    5.3</span>
<span class="co">#&gt; 1001              the big g       goro lovic 2015    9.9</span>
<span class="co">#&gt; 1002               everyday               fk 2016    6.6</span>
<span class="co">#&gt; 1003            true colors            tupac 2014    8.0</span>
<span class="co">#&gt;      Revenue Metascore Rank</span>
<span class="co">#&gt; 998    58.01        50   NA</span>
<span class="co">#&gt; 999       NA        22   NA</span>
<span class="co">#&gt; 1000   19.64        11   NA</span>
<span class="co">#&gt; 1001 1000.00       100    1</span>
<span class="co">#&gt; 1002  250.00        60    3</span>
<span class="co">#&gt; 1003  350.00        40    5</span></code></pre></div>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/rows.html">rows_insert()</a></code> which is modelled after the SQL INSERT clause is also used to insert rows. It requires a column with unique value to uniquely identify each row. This function works on two tibbles, therefore the rows to be inserted must be converted to a tibble using the function <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble()</a></code> before use.
It should be noted that this function was added in version 1.0.0 of the package, therefore you should do well to update your package to make use of it.
The function <code><a href="https://dplyr.tidyverse.org/reference/rows.html">rows_insert()</a></code> requires the argument by which identifies the unique row.</p>
<div class="sourceCode" id="cb173"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># creating a tibble</span>
<span class="va">tb</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>Rank <span class="op">=</span> <span class="fl">1001</span>, 
         Title <span class="op">=</span> <span class="st">"the big g"</span>, 
         Director <span class="op">=</span> <span class="st">"goro lovic"</span>, 
         Year <span class="op">=</span> <span class="fl">2015</span>, 
         Rating <span class="op">=</span> <span class="fl">9.9</span>, 
         Revenue <span class="op">=</span> <span class="fl">1000</span>, 
         Metascore <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>
         
<span class="co"># inserting a single value</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rows.html">rows_insert</a></span><span class="op">(</span><span class="va">tb</span>, by <span class="op">=</span> <span class="st">"Rank"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;      Rank                  Title         Director Year</span>
<span class="co">#&gt; 996   996   Secret in Their Eyes        Billy Ray 2015</span>
<span class="co">#&gt; 997   997        Hostel: Part II         Eli Roth 2007</span>
<span class="co">#&gt; 998   998 Step Up 2: The Streets       Jon M. Chu 2008</span>
<span class="co">#&gt; 999   999           Search Party   Scot Armstrong 2014</span>
<span class="co">#&gt; 1000 1000             Nine Lives Barry Sonnenfeld 2016</span>
<span class="co">#&gt; 1001 1001              the big g       goro lovic 2015</span>
<span class="co">#&gt;      Rating Revenue Metascore</span>
<span class="co">#&gt; 996     6.2      NA        45</span>
<span class="co">#&gt; 997     5.5   17.54        46</span>
<span class="co">#&gt; 998     6.2   58.01        50</span>
<span class="co">#&gt; 999     5.6      NA        22</span>
<span class="co">#&gt; 1000    5.3   19.64        11</span>
<span class="co">#&gt; 1001    9.9 1000.00       100</span>

<span class="co"># inserting multiple values</span>
<span class="va">tb</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>Rank<span class="op">=</span> <span class="fl">1001</span><span class="op">:</span><span class="fl">1003</span>,
         Title<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"the big g"</span>, <span class="st">"everyday"</span>, <span class="st">"true colors"</span><span class="op">)</span>, 
         Director <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"goro lovic"</span>, <span class="st">"fk"</span>, <span class="st">"tupac"</span><span class="op">)</span>, 
         Year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="fl">2016</span>, <span class="fl">2014</span><span class="op">)</span>, 
         Rating <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">9.9</span>, <span class="fl">6.6</span>, <span class="fl">8</span><span class="op">)</span>, 
         Revenue <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">250</span>, <span class="fl">350</span><span class="op">)</span>, 
         Metascore <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">60</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rows.html">rows_insert</a></span><span class="op">(</span><span class="va">tb</span>, by <span class="op">=</span> <span class="st">"Rank"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;      Rank                  Title         Director Year</span>
<span class="co">#&gt; 998   998 Step Up 2: The Streets       Jon M. Chu 2008</span>
<span class="co">#&gt; 999   999           Search Party   Scot Armstrong 2014</span>
<span class="co">#&gt; 1000 1000             Nine Lives Barry Sonnenfeld 2016</span>
<span class="co">#&gt; 1001 1001              the big g       goro lovic 2015</span>
<span class="co">#&gt; 1002 1002               everyday               fk 2016</span>
<span class="co">#&gt; 1003 1003            true colors            tupac 2014</span>
<span class="co">#&gt;      Rating Revenue Metascore</span>
<span class="co">#&gt; 998     6.2   58.01        50</span>
<span class="co">#&gt; 999     5.6      NA        22</span>
<span class="co">#&gt; 1000    5.3   19.64        11</span>
<span class="co">#&gt; 1001    9.9 1000.00       100</span>
<span class="co">#&gt; 1002    6.6  250.00        60</span>
<span class="co">#&gt; 1003    8.0  350.00        40</span></code></pre></div>
</div>
<div id="updating-rows-of-data-1" class="section level3" number="5.7.2">
<h3>
<span class="header-section-number">5.7.2</span> Updating rows of data<a class="anchor" aria-label="anchor" href="#updating-rows-of-data-1"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/rows.html">rows_update()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/rows.html">rows_upsert()</a></code> which are modelled after the SQL UPDATE and UPSERT clauses are used to update row values. While the former updates row values, the later updates existing rows and inserts new ones, if not present. They both required a column with unique value to uniquely identify each row. As with <code><a href="https://dplyr.tidyverse.org/reference/rows.html">rows_insert()</a></code>, these functions work on two tibbles, therefore the rows to be inserted must be converted to a tibble using the function <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble()</a></code> before use.</p>
<div class="sourceCode" id="cb174"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># updating a single row</span>
<span class="va">tb</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>Rank <span class="op">=</span> <span class="fl">5</span>, 
         Title <span class="op">=</span> <span class="st">"the big g"</span>, 
         Director <span class="op">=</span> <span class="st">"goro lovic"</span>, 
         Year <span class="op">=</span> <span class="fl">2015</span>, 
         Rating <span class="op">=</span> <span class="fl">9.9</span>, 
         Revenue <span class="op">=</span> <span class="fl">1000</span>, 
         Metascore <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rows.html">rows_update</a></span><span class="op">(</span><span class="va">tb</span>, by <span class="op">=</span> <span class="st">"Rank"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   Rank                   Title             Director Year</span>
<span class="co">#&gt; 1    1 Guardians of the Galaxy           James Gunn 2014</span>
<span class="co">#&gt; 2    2              Prometheus         Ridley Scott 2012</span>
<span class="co">#&gt; 3    3                   Split   M. Night Shyamalan 2016</span>
<span class="co">#&gt; 4    4                    Sing Christophe Lourdelet 2016</span>
<span class="co">#&gt; 5    5               the big g           goro lovic 2015</span>
<span class="co">#&gt; 6    6          The Great Wall          Yimou Zhang 2016</span>
<span class="co">#&gt;   Rating Revenue Metascore</span>
<span class="co">#&gt; 1    8.1  333.13        76</span>
<span class="co">#&gt; 2    7.0  126.46        65</span>
<span class="co">#&gt; 3    7.3  138.12        62</span>
<span class="co">#&gt; 4    7.2  270.32        59</span>
<span class="co">#&gt; 5    9.9 1000.00       100</span>
<span class="co">#&gt; 6    6.1   45.13        42</span>
  
<span class="co"># updating multiple rows</span>
<span class="va">tb</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>Rank<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span>,
         Title<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"the big g"</span>, <span class="st">"everyday"</span>, <span class="st">"true colors"</span><span class="op">)</span>, 
         Director <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"goro lovic"</span>, <span class="st">"fk"</span>, <span class="st">"tupac"</span><span class="op">)</span>, 
         Year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="fl">2016</span>, <span class="fl">2014</span><span class="op">)</span>, 
         Rating <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">9.9</span>, <span class="fl">6.6</span>, <span class="fl">8</span><span class="op">)</span>, 
         Revenue <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">250</span>, <span class="fl">350</span><span class="op">)</span>, 
         Metascore <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">60</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rows.html">rows_update</a></span><span class="op">(</span><span class="va">tb</span>, by <span class="op">=</span> <span class="st">"Rank"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   Rank          Title             Director Year Rating</span>
<span class="co">#&gt; 1    1      the big g           goro lovic 2015    9.9</span>
<span class="co">#&gt; 2    2     Prometheus         Ridley Scott 2012    7.0</span>
<span class="co">#&gt; 3    3       everyday                   fk 2016    6.6</span>
<span class="co">#&gt; 4    4           Sing Christophe Lourdelet 2016    7.2</span>
<span class="co">#&gt; 5    5    true colors                tupac 2014    8.0</span>
<span class="co">#&gt; 6    6 The Great Wall          Yimou Zhang 2016    6.1</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1 1000.00       100</span>
<span class="co">#&gt; 2  126.46        65</span>
<span class="co">#&gt; 3  250.00        60</span>
<span class="co">#&gt; 4  270.32        59</span>
<span class="co">#&gt; 5  350.00        40</span>
<span class="co">#&gt; 6   45.13        42</span>

<span class="co"># update existing rows and insert new ones</span>
<span class="va">tb</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>Rank<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>, <span class="fl">1001</span><span class="op">)</span>,
         Title<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"the big g"</span>, <span class="st">"everyday"</span>, <span class="st">"true colors"</span><span class="op">)</span>, 
         Director <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"goro lovic"</span>, <span class="st">"fk"</span>, <span class="st">"tupac"</span><span class="op">)</span>, 
         Year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="fl">2016</span>, <span class="fl">2014</span><span class="op">)</span>, 
         Rating <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">9.9</span>, <span class="fl">6.6</span>, <span class="fl">8</span><span class="op">)</span>, 
         Revenue <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">250</span>, <span class="fl">350</span><span class="op">)</span>, 
         Metascore <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">60</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rows.html">rows_upsert</a></span><span class="op">(</span><span class="va">tb</span>, by <span class="op">=</span> <span class="st">"Rank"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1001</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Rank                   Title             Director Year</span>
<span class="co">#&gt; 1    1 Guardians of the Galaxy           James Gunn 2014</span>
<span class="co">#&gt; 2    2               the big g           goro lovic 2015</span>
<span class="co">#&gt; 3    3                everyday                   fk 2016</span>
<span class="co">#&gt; 4    4                    Sing Christophe Lourdelet 2016</span>
<span class="co">#&gt; 5    5           Suicide Squad           David Ayer 2016</span>
<span class="co">#&gt; 6 1001             true colors                tupac 2014</span>
<span class="co">#&gt;   Rating Revenue Metascore</span>
<span class="co">#&gt; 1    8.1  333.13        76</span>
<span class="co">#&gt; 2    9.9 1000.00       100</span>
<span class="co">#&gt; 3    6.6  250.00        60</span>
<span class="co">#&gt; 4    7.2  270.32        59</span>
<span class="co">#&gt; 5    6.2  325.02        40</span>
<span class="co">#&gt; 6    8.0  350.00        40</span></code></pre></div>
</div>
<div id="updating-a-single-value-1" class="section level3" number="5.7.3">
<h3>
<span class="header-section-number">5.7.3</span> Updating a single value<a class="anchor" aria-label="anchor" href="#updating-a-single-value-1"><i class="fas fa-link"></i></a>
</h3>
<p>To update a single value, we make use of mutate() with either ifelse() from base R or if_else() from dplyr or replace() from base R. The function if_else() is an implementation of ifelse() in dplyr.</p>
<div class="sourceCode" id="cb175"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mov</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Director</span> <span class="op">==</span> <span class="st">'Christopher Nolan'</span><span class="op">)</span>
<span class="co">#&gt;   Rank                 Title          Director Year Rating</span>
<span class="co">#&gt; 1   37          Interstellar Christopher Nolan 2014    8.6</span>
<span class="co">#&gt; 2   55       The Dark Knight Christopher Nolan 2008    9.0</span>
<span class="co">#&gt; 3   65          The Prestige Christopher Nolan 2006    8.5</span>
<span class="co">#&gt; 4   81             Inception Christopher Nolan 2010    8.8</span>
<span class="co">#&gt; 5  125 The Dark Knight Rises Christopher Nolan 2012    8.5</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1  187.99        74</span>
<span class="co">#&gt; 2  533.32        82</span>
<span class="co">#&gt; 3   53.08        66</span>
<span class="co">#&gt; 4  292.57        74</span>
<span class="co">#&gt; 5  448.13        78</span>

<span class="co"># replacing a value using ifelse()</span>
<span class="va">mov</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Director <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">Director</span> <span class="op">==</span> <span class="st">'Christopher Nolan'</span>, <span class="st">'C. Nolan'</span>, <span class="va">Director</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">37</span>, <span class="fl">55</span>, <span class="fl">65</span>, <span class="fl">81</span>, <span class="fl">125</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Rank                 Title Director Year Rating Revenue</span>
<span class="co">#&gt; 1   37          Interstellar C. Nolan 2014    8.6  187.99</span>
<span class="co">#&gt; 2   55       The Dark Knight C. Nolan 2008    9.0  533.32</span>
<span class="co">#&gt; 3   65          The Prestige C. Nolan 2006    8.5   53.08</span>
<span class="co">#&gt; 4   81             Inception C. Nolan 2010    8.8  292.57</span>
<span class="co">#&gt; 5  125 The Dark Knight Rises C. Nolan 2012    8.5  448.13</span>
<span class="co">#&gt;   Metascore</span>
<span class="co">#&gt; 1        74</span>
<span class="co">#&gt; 2        82</span>
<span class="co">#&gt; 3        66</span>
<span class="co">#&gt; 4        74</span>
<span class="co">#&gt; 5        78</span>

<span class="co"># increasing revenues for movies produced by Christopher Nolan by 20%</span>
<span class="va">mov</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Revenue <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">Director</span> <span class="op">==</span> <span class="st">'Christopher Nolan'</span>, <span class="va">Revenue</span> <span class="op">*</span> <span class="fl">1.2</span>, <span class="va">Revenue</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">37</span>, <span class="fl">55</span>, <span class="fl">65</span>, <span class="fl">81</span>, <span class="fl">125</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Rank                 Title          Director Year Rating</span>
<span class="co">#&gt; 1   37          Interstellar Christopher Nolan 2014    8.6</span>
<span class="co">#&gt; 2   55       The Dark Knight Christopher Nolan 2008    9.0</span>
<span class="co">#&gt; 3   65          The Prestige Christopher Nolan 2006    8.5</span>
<span class="co">#&gt; 4   81             Inception Christopher Nolan 2010    8.8</span>
<span class="co">#&gt; 5  125 The Dark Knight Rises Christopher Nolan 2012    8.5</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1 225.588        74</span>
<span class="co">#&gt; 2 639.984        82</span>
<span class="co">#&gt; 3  63.696        66</span>
<span class="co">#&gt; 4 351.084        74</span>
<span class="co">#&gt; 5 537.756        78</span>

<span class="co"># replacing a value using if_else()</span>
<span class="va">mov</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Director <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">Director</span> <span class="op">==</span> <span class="st">'Christopher Nolan'</span>, <span class="st">'C. Nolan'</span>, <span class="va">Director</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">37</span>, <span class="fl">55</span>, <span class="fl">65</span>, <span class="fl">81</span>, <span class="fl">125</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Rank                 Title Director Year Rating Revenue</span>
<span class="co">#&gt; 1   37          Interstellar C. Nolan 2014    8.6  187.99</span>
<span class="co">#&gt; 2   55       The Dark Knight C. Nolan 2008    9.0  533.32</span>
<span class="co">#&gt; 3   65          The Prestige C. Nolan 2006    8.5   53.08</span>
<span class="co">#&gt; 4   81             Inception C. Nolan 2010    8.8  292.57</span>
<span class="co">#&gt; 5  125 The Dark Knight Rises C. Nolan 2012    8.5  448.13</span>
<span class="co">#&gt;   Metascore</span>
<span class="co">#&gt; 1        74</span>
<span class="co">#&gt; 2        82</span>
<span class="co">#&gt; 3        66</span>
<span class="co">#&gt; 4        74</span>
<span class="co">#&gt; 5        78</span>

<span class="co"># replacing a value using replace()</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Director <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html">replace</a></span><span class="op">(</span><span class="va">Director</span>, <span class="va">Director</span> <span class="op">==</span> <span class="st">'Christopher Nolan'</span>, <span class="st">'C. Nolan'</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">37</span>, <span class="fl">55</span>, <span class="fl">65</span>, <span class="fl">81</span>, <span class="fl">125</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;                   Title Director Year Rating Revenue</span>
<span class="co">#&gt; 1          Interstellar C. Nolan 2014    8.6  187.99</span>
<span class="co">#&gt; 2       The Dark Knight C. Nolan 2008    9.0  533.32</span>
<span class="co">#&gt; 3          The Prestige C. Nolan 2006    8.5   53.08</span>
<span class="co">#&gt; 4             Inception C. Nolan 2010    8.8  292.57</span>
<span class="co">#&gt; 5 The Dark Knight Rises C. Nolan 2012    8.5  448.13</span>
<span class="co">#&gt;   Metascore</span>
<span class="co">#&gt; 1        74</span>
<span class="co">#&gt; 2        82</span>
<span class="co">#&gt; 3        66</span>
<span class="co">#&gt; 4        74</span>
<span class="co">#&gt; 5        78</span>

<span class="co"># increasing revenues for movies produced by Christopher Nolan by 20%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Revenue <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html">replace</a></span><span class="op">(</span><span class="va">Director</span>, <span class="va">Director</span> <span class="op">==</span> <span class="st">'Christopher Nolan'</span>, 
                           <span class="va">Revenue</span><span class="op">[</span><span class="va">Director</span> <span class="op">==</span> <span class="st">'Christopher Nolan'</span><span class="op">]</span> <span class="op">*</span> <span class="fl">1.2</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">37</span>, <span class="fl">55</span>, <span class="fl">65</span>, <span class="fl">81</span>, <span class="fl">125</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;                   Title          Director Year Rating</span>
<span class="co">#&gt; 1          Interstellar Christopher Nolan 2014    8.6</span>
<span class="co">#&gt; 2       The Dark Knight Christopher Nolan 2008    9.0</span>
<span class="co">#&gt; 3          The Prestige Christopher Nolan 2006    8.5</span>
<span class="co">#&gt; 4             Inception Christopher Nolan 2010    8.8</span>
<span class="co">#&gt; 5 The Dark Knight Rises Christopher Nolan 2012    8.5</span>
<span class="co">#&gt;   Revenue Metascore</span>
<span class="co">#&gt; 1 225.588        74</span>
<span class="co">#&gt; 2 639.984        82</span>
<span class="co">#&gt; 3  63.696        66</span>
<span class="co">#&gt; 4 351.084        74</span>
<span class="co">#&gt; 5 537.756        78</span></code></pre></div>
</div>
<div id="deleting-rows-of-data" class="section level3" number="5.7.4">
<h3>
<span class="header-section-number">5.7.4</span> Deleting rows of data<a class="anchor" aria-label="anchor" href="#deleting-rows-of-data"><i class="fas fa-link"></i></a>
</h3>
<p>There is no special function to delete rows but the functions <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice()</a></code> can be used to keep or drop rows.</p>
<div id="unique-rows" class="section level4" number="5.7.4.1">
<h4>
<span class="header-section-number">5.7.4.1</span> Unique rows<a class="anchor" aria-label="anchor" href="#unique-rows"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct()</a></code> removes duplicate rows.</p>
<div class="sourceCode" id="cb176"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># selecting unique values</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">Year</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;  [1] 2014 2012 2016 2015 2007 2011 2008 2006 2009 2010 2013</span>

<span class="co"># selecting unique rows</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">Year</span>, <span class="va">Director</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 987</span></code></pre></div>
</div>
</div>
</div>
<div id="tr-joins" class="section level2" number="5.8">
<h2>
<span class="header-section-number">5.8</span> Combine data: concatenate, join and merge<a class="anchor" aria-label="anchor" href="#tr-joins"><i class="fas fa-link"></i></a>
</h2>
<div id="concatenating-tibbles" class="section level3" number="5.8.1">
<h3>
<span class="header-section-number">5.8.1</span> Concatenating tibbles<a class="anchor" aria-label="anchor" href="#concatenating-tibbles"><i class="fas fa-link"></i></a>
</h3>
<p>Combining datasets using <code><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows()</a></code></p>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows()</a></code> acts like <code><a href="https://rdrr.io/r/base/cbind.html">rbind()</a></code> in Base R.</p>
<div class="sourceCode" id="cb177"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">top_5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'China'</span>, <span class="st">'India'</span>, <span class="st">'United States'</span>, <span class="st">'Indonesia'</span>, <span class="st">'Brazil'</span><span class="op">)</span>,
                continent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Asia'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span><span class="op">)</span>,
                population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1318683096</span>, <span class="fl">1110396331</span>, <span class="fl">301139947</span>, <span class="fl">223547000</span>, <span class="fl">190010647</span><span class="op">)</span>,
                lifeExpectancy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">72.961</span>, <span class="fl">64.698</span>, <span class="fl">78.242</span>, <span class="fl">70.65</span>, <span class="fl">72.39</span><span class="op">)</span><span class="op">)</span>
<span class="va">top_5</span>
<span class="co">#&gt; # A tibble: 5 x 4</span>
<span class="co">#&gt;   country       continent population lifeExpectancy</span>
<span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;          &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt; 1 China         Asia      1318683096           73.0</span>
<span class="co">#&gt; 2 India         Asia      1110396331           64.7</span>
<span class="co">#&gt; 3 United States Americas   301139947           78.2</span>
<span class="co">#&gt; 4 Indonesia     Asia       223547000           70.6</span>
<span class="co">#&gt; 5 Brazil        Americas   190010647           72.4</span>

<span class="va">top_5_10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Pakistan'</span>, <span class="st">'Bangladesh'</span>, <span class="st">'Nigeria'</span>, <span class="st">'Japan'</span>, <span class="st">'Mexico'</span><span class="op">)</span>,
                   continent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Asia'</span>, <span class="st">'Asia'</span>, <span class="st">'Africa'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span><span class="op">)</span>,
                   population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">169270617</span>, <span class="fl">150448339</span>, <span class="fl">135031164</span>, <span class="fl">127467972</span>, <span class="fl">108700891</span><span class="op">)</span>,
                   lifeExpectancy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">65.483</span>, <span class="fl">64.062</span>, <span class="fl">46.859</span>, <span class="fl">82.603</span>, <span class="fl">76.195</span><span class="op">)</span><span class="op">)</span>
<span class="va">top_5_10</span>
<span class="co">#&gt; # A tibble: 5 x 4</span>
<span class="co">#&gt;   country    continent population lifeExpectancy</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Pakistan   Asia       169270617           65.5</span>
<span class="co">#&gt; 2 Bangladesh Asia       150448339           64.1</span>
<span class="co">#&gt; 3 Nigeria    Africa     135031164           46.9</span>
<span class="co">#&gt; 4 Japan      Asia       127467972           82.6</span>
<span class="co">#&gt; 5 Mexico     Americas   108700891           76.2</span>

<span class="co"># binding data frames</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="va">top_5</span>, <span class="va">top_5_10</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 4</span>
<span class="co">#&gt;    country       continent population lifeExpectancy</span>
<span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;          &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt;  1 China         Asia      1318683096           73.0</span>
<span class="co">#&gt;  2 India         Asia      1110396331           64.7</span>
<span class="co">#&gt;  3 United States Americas   301139947           78.2</span>
<span class="co">#&gt;  4 Indonesia     Asia       223547000           70.6</span>
<span class="co">#&gt;  5 Brazil        Americas   190010647           72.4</span>
<span class="co">#&gt;  6 Pakistan      Asia       169270617           65.5</span>
<span class="co">#&gt;  7 Bangladesh    Asia       150448339           64.1</span>
<span class="co">#&gt;  8 Nigeria       Africa     135031164           46.9</span>
<span class="co">#&gt;  9 Japan         Asia       127467972           82.6</span>
<span class="co">#&gt; 10 Mexico        Americas   108700891           76.2</span></code></pre></div>
</div>
<div id="combining-datasets-using-bind_cols" class="section level3" number="5.8.2">
<h3>
<span class="header-section-number">5.8.2</span> Combining datasets using <code>bind_cols()</code><a class="anchor" aria-label="anchor" href="#combining-datasets-using-bind_cols"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_cols()</a></code> acts like <code><a href="https://rdrr.io/r/base/cbind.html">cbind()</a></code> in Base R.</p>
<div class="sourceCode" id="cb178"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">country</span> <span class="op">&lt;-</span> 
<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'China'</span>, <span class="st">'India'</span>, <span class="st">'United States'</span>, <span class="st">'Indonesia'</span>, <span class="st">'Brazil'</span><span class="op">)</span>,
       continent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Asia'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span>, <span class="st">'Asia'</span>, <span class="st">'Americas'</span><span class="op">)</span><span class="op">)</span>
<span class="va">country</span>
<span class="co">#&gt; # A tibble: 5 x 2</span>
<span class="co">#&gt;   country       continent</span>
<span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;    </span>
<span class="co">#&gt; 1 China         Asia     </span>
<span class="co">#&gt; 2 India         Asia     </span>
<span class="co">#&gt; 3 United States Americas </span>
<span class="co">#&gt; 4 Indonesia     Asia     </span>
<span class="co">#&gt; 5 Brazil        Americas</span>

<span class="va">variables</span> <span class="op">&lt;-</span> 
<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'China'</span>, <span class="st">'India'</span>, <span class="st">'United States'</span>, <span class="st">'Indonesia'</span>, <span class="st">'Brazil'</span><span class="op">)</span>,
       population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1318683096</span>, <span class="fl">1110396331</span>, <span class="fl">301139947</span>, <span class="fl">223547000</span>, <span class="fl">190010647</span><span class="op">)</span>,
       lifeExpectancy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">72.961</span>, <span class="fl">64.698</span>, <span class="fl">78.242</span>, <span class="fl">70.65</span>, <span class="fl">72.39</span><span class="op">)</span>,
       perCapita <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4959</span>, <span class="fl">2452</span>, <span class="fl">42952</span>, <span class="fl">3541</span>, <span class="fl">9066</span><span class="op">)</span><span class="op">)</span>
<span class="va">variables</span>
<span class="co">#&gt; # A tibble: 5 x 4</span>
<span class="co">#&gt;   country       population lifeExpectancy perCapita</span>
<span class="co">#&gt;   &lt;chr&gt;              &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 China         1318683096           73.0      4959</span>
<span class="co">#&gt; 2 India         1110396331           64.7      2452</span>
<span class="co">#&gt; 3 United States  301139947           78.2     42952</span>
<span class="co">#&gt; 4 Indonesia      223547000           70.6      3541</span>
<span class="co">#&gt; 5 Brazil         190010647           72.4      9066</span>

<span class="co"># binding data frames</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_cols</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">variables</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 x 5</span>
<span class="co">#&gt;   country       continent population lifeExpectancy perCapita</span>
<span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;          &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 China         Asia      1318683096           73.0      4959</span>
<span class="co">#&gt; 2 India         Asia      1110396331           64.7      2452</span>
<span class="co">#&gt; 3 United States Americas   301139947           78.2     42952</span>
<span class="co">#&gt; 4 Indonesia     Asia       223547000           70.6      3541</span>
<span class="co">#&gt; 5 Brazil        Americas   190010647           72.4      9066</span></code></pre></div>
</div>
<div id="joining-data-frames-using-set-operations" class="section level3" number="5.8.3">
<h3>
<span class="header-section-number">5.8.3</span> Joining data frames using Set Operations<a class="anchor" aria-label="anchor" href="#joining-data-frames-using-set-operations"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb179"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">group_one</span> <span class="op">&lt;-</span> 
<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Ethiopia'</span>, <span class="st">'Congo, Dem. Rep.'</span>, <span class="st">'Egypt'</span>, <span class="st">'United States'</span>, 
                   <span class="st">'Mexico'</span>, <span class="st">'India'</span>, <span class="st">'Pakistan'</span>, <span class="st">'Thailand'</span>, <span class="st">'Japan'</span><span class="op">)</span>,
       population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">76511887</span>, <span class="fl">64606759</span>, <span class="fl">80264543</span>, <span class="fl">301139947</span>, <span class="fl">108700891</span>, 
                      <span class="fl">1110396331</span>, <span class="fl">169270617</span>, <span class="fl">65068149</span>, <span class="fl">127467972</span><span class="op">)</span><span class="op">)</span>
<span class="va">group_one</span>
<span class="co">#&gt; # A tibble: 9 x 2</span>
<span class="co">#&gt;   country          population</span>
<span class="co">#&gt;   &lt;chr&gt;                 &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Ethiopia           76511887</span>
<span class="co">#&gt; 2 Congo, Dem. Rep.   64606759</span>
<span class="co">#&gt; 3 Egypt              80264543</span>
<span class="co">#&gt; 4 United States     301139947</span>
<span class="co">#&gt; 5 Mexico            108700891</span>
<span class="co">#&gt; 6 India            1110396331</span>
<span class="co">#&gt; 7 Pakistan          169270617</span>
<span class="co">#&gt; 8 Thailand           65068149</span>
<span class="co">#&gt; 9 Japan             127467972</span>
<span class="va">group_two</span> <span class="op">&lt;-</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Ethiopia'</span>, <span class="st">'Vietnam'</span>, <span class="st">'Bangladesh'</span>, <span class="st">'Thailand'</span>, <span class="st">'India'</span><span class="op">)</span>,           
       population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">76511887</span>, <span class="fl">85262356</span>, <span class="fl">150448339</span>, <span class="fl">65068149</span>, <span class="fl">111039633</span><span class="op">)</span><span class="op">)</span>
<span class="va">group_two</span>
<span class="co">#&gt; # A tibble: 5 x 2</span>
<span class="co">#&gt;   country    population</span>
<span class="co">#&gt;   &lt;chr&gt;           &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Ethiopia     76511887</span>
<span class="co">#&gt; 2 Vietnam      85262356</span>
<span class="co">#&gt; 3 Bangladesh  150448339</span>
<span class="co">#&gt; 4 Thailand     65068149</span>
<span class="co">#&gt; 5 India       111039633</span></code></pre></div>
<div id="intersection" class="section level4" number="5.8.3.1">
<h4>
<span class="header-section-number">5.8.3.1</span> Intersection<a class="anchor" aria-label="anchor" href="#intersection"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://generics.r-lib.org/reference/setops.html">intersect()</a></code> keeps rows that appear in both datasets.</p>
<div class="sourceCode" id="cb180"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">intersect</a></span><span class="op">(</span><span class="va">group_one</span>, <span class="va">group_two</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 x 2</span>
<span class="co">#&gt;   country  population</span>
<span class="co">#&gt;   &lt;chr&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Ethiopia   76511887</span>
<span class="co">#&gt; 2 Thailand   65068149</span></code></pre></div>
</div>
</div>
<div id="union" class="section level3" number="5.8.4">
<h3>
<span class="header-section-number">5.8.4</span> Union<a class="anchor" aria-label="anchor" href="#union"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://generics.r-lib.org/reference/setops.html">union()</a></code> keeps rows that appear in either of the datasets.</p>
<p><code><a href="https://generics.r-lib.org/reference/setops.html">union(group_one, group_two)</a></code></p>
</div>
<div id="differences" class="section level3" number="5.8.5">
<h3>
<span class="header-section-number">5.8.5</span> Differences<a class="anchor" aria-label="anchor" href="#differences"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://generics.r-lib.org/reference/setops.html">setdiff()</a></code> keeps rows that appear in the first dataset but not in the second.</p>
<div class="sourceCode" id="cb181"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">setdiff</a></span><span class="op">(</span><span class="va">group_one</span>, <span class="va">group_two</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 7 x 2</span>
<span class="co">#&gt;   country          population</span>
<span class="co">#&gt;   &lt;chr&gt;                 &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Congo, Dem. Rep.   64606759</span>
<span class="co">#&gt; 2 Egypt              80264543</span>
<span class="co">#&gt; 3 United States     301139947</span>
<span class="co">#&gt; 4 Mexico            108700891</span>
<span class="co">#&gt; 5 India            1110396331</span>
<span class="co">#&gt; 6 Pakistan          169270617</span>
<span class="co">#&gt; 7 Japan             127467972</span></code></pre></div>
<div id="sql-like-joins" class="section level4" number="5.8.5.1">
<h4>
<span class="header-section-number">5.8.5.1</span> SQL like joins<a class="anchor" aria-label="anchor" href="#sql-like-joins"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb182"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># preparing data</span>
<span class="va">employees</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
    name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'john'</span>, <span class="st">'mary'</span>, <span class="st">'david'</span>, <span class="st">'paul'</span>, <span class="st">'susan'</span>, <span class="st">'cynthia'</span>, <span class="st">'Joss'</span>, <span class="st">'dennis'</span><span class="op">)</span>,
    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">45</span>, <span class="fl">55</span>, <span class="fl">35</span>, <span class="fl">58</span>, <span class="fl">40</span>, <span class="fl">30</span>, <span class="fl">39</span>, <span class="fl">25</span><span class="op">)</span>,
    gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'m'</span>, <span class="st">'f'</span>, <span class="st">'m'</span>, <span class="st">'m'</span>, <span class="st">'f'</span>, <span class="st">'f'</span>, <span class="st">'m'</span>, <span class="st">'m'</span><span class="op">)</span>,
    salary <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">40000</span>, <span class="fl">50000</span>, <span class="fl">35000</span>, <span class="fl">25000</span>, <span class="fl">48000</span>, <span class="fl">32000</span>, <span class="fl">20000</span>, <span class="fl">45000</span><span class="op">)</span>,
    department <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'commercial'</span>, <span class="st">'production'</span>, <span class="cn">NA</span>, <span class="st">'human resources'</span>, 
                   <span class="st">'commercial'</span>, <span class="st">'commercial'</span>, <span class="st">'production'</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>
<span class="va">employees</span>
<span class="co">#&gt; # A tibble: 8 x 5</span>
<span class="co">#&gt;   name      age gender salary department     </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;          </span>
<span class="co">#&gt; 1 john       45 m       40000 commercial     </span>
<span class="co">#&gt; 2 mary       55 f       50000 production     </span>
<span class="co">#&gt; 3 david      35 m       35000 &lt;NA&gt;           </span>
<span class="co">#&gt; 4 paul       58 m       25000 human resources</span>
<span class="co">#&gt; 5 susan      40 f       48000 commercial     </span>
<span class="co">#&gt; 6 cynthia    30 f       32000 commercial     </span>
<span class="co">#&gt; 7 Joss       39 m       20000 production     </span>
<span class="co">#&gt; 8 dennis     25 m       45000 &lt;NA&gt;</span>

<span class="va">departments</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
    department <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'commercial'</span>, <span class="st">'human resources'</span>, <span class="st">'production'</span>, <span class="st">'finance'</span>, <span class="st">'maintenance'</span><span class="op">)</span>,
    location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'washington'</span>, <span class="st">'london'</span>, <span class="st">'paris'</span>, <span class="st">'dubai'</span>, <span class="st">'dublin'</span><span class="op">)</span><span class="op">)</span>
<span class="va">departments</span>
<span class="co">#&gt; # A tibble: 5 x 2</span>
<span class="co">#&gt;   department      location  </span>
<span class="co">#&gt;   &lt;chr&gt;           &lt;chr&gt;     </span>
<span class="co">#&gt; 1 commercial      washington</span>
<span class="co">#&gt; 2 human resources london    </span>
<span class="co">#&gt; 3 production      paris     </span>
<span class="co">#&gt; 4 finance         dubai     </span>
<span class="co">#&gt; 5 maintenance     dublin</span></code></pre></div>
</div>
</div>
<div id="left-join-1" class="section level3" number="5.8.6">
<h3>
<span class="header-section-number">5.8.6</span> Left join<a class="anchor" aria-label="anchor" href="#left-join-1"><i class="fas fa-link"></i></a>
</h3>
<p>The left join returns all records from the left dataset and the matched records from the right dataset. The result is NULL from the right side if there is no match.</p>
<div class="sourceCode" id="cb183"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">employees</span>, <span class="va">departments</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 8 x 6</span>
<span class="co">#&gt;   name      age gender salary department      location  </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;     </span>
<span class="co">#&gt; 1 john       45 m       40000 commercial      washington</span>
<span class="co">#&gt; 2 mary       55 f       50000 production      paris     </span>
<span class="co">#&gt; 3 david      35 m       35000 &lt;NA&gt;            &lt;NA&gt;      </span>
<span class="co">#&gt; 4 paul       58 m       25000 human resources london    </span>
<span class="co">#&gt; 5 susan      40 f       48000 commercial      washington</span>
<span class="co">#&gt; 6 cynthia    30 f       32000 commercial      washington</span>
<span class="co">#&gt; 7 Joss       39 m       20000 production      paris     </span>
<span class="co">#&gt; 8 dennis     25 m       45000 &lt;NA&gt;            &lt;NA&gt;</span></code></pre></div>
</div>
<div id="right-join-1" class="section level3" number="5.8.7">
<h3>
<span class="header-section-number">5.8.7</span> Right join<a class="anchor" aria-label="anchor" href="#right-join-1"><i class="fas fa-link"></i></a>
</h3>
<p>The right join returns all records from the right dataset, and the matched records from the left dataset. The result is NULL from the left side when there is no match.</p>
<div class="sourceCode" id="cb184"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join</a></span><span class="op">(</span><span class="va">employees</span>, <span class="va">departments</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 8 x 6</span>
<span class="co">#&gt;   name      age gender salary department      location  </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;     </span>
<span class="co">#&gt; 1 john       45 m       40000 commercial      washington</span>
<span class="co">#&gt; 2 mary       55 f       50000 production      paris     </span>
<span class="co">#&gt; 3 paul       58 m       25000 human resources london    </span>
<span class="co">#&gt; 4 susan      40 f       48000 commercial      washington</span>
<span class="co">#&gt; 5 cynthia    30 f       32000 commercial      washington</span>
<span class="co">#&gt; 6 Joss       39 m       20000 production      paris     </span>
<span class="co">#&gt; 7 &lt;NA&gt;       NA &lt;NA&gt;       NA finance         dubai     </span>
<span class="co">#&gt; 8 &lt;NA&gt;       NA &lt;NA&gt;       NA maintenance     dublin</span>

<span class="co"># reversing tables produces the same results as a left join</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join</a></span><span class="op">(</span><span class="va">departments</span>, <span class="va">employees</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 8 x 6</span>
<span class="co">#&gt;   department      location   name      age gender salary</span>
<span class="co">#&gt;   &lt;chr&gt;           &lt;chr&gt;      &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 commercial      washington john       45 m       40000</span>
<span class="co">#&gt; 2 commercial      washington susan      40 f       48000</span>
<span class="co">#&gt; 3 commercial      washington cynthia    30 f       32000</span>
<span class="co">#&gt; 4 human resources london     paul       58 m       25000</span>
<span class="co">#&gt; 5 production      paris      mary       55 f       50000</span>
<span class="co">#&gt; 6 production      paris      Joss       39 m       20000</span>
<span class="co">#&gt; 7 &lt;NA&gt;            &lt;NA&gt;       david      35 m       35000</span>
<span class="co">#&gt; 8 &lt;NA&gt;            &lt;NA&gt;       dennis     25 m       45000</span></code></pre></div>
</div>
<div id="inner-join-1" class="section level3" number="5.8.8">
<h3>
<span class="header-section-number">5.8.8</span> Inner join<a class="anchor" aria-label="anchor" href="#inner-join-1"><i class="fas fa-link"></i></a>
</h3>
<p>The inner join selects records that have matching values in both datasets</p>
<div class="sourceCode" id="cb185"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">employees</span>, <span class="va">departments</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 6</span>
<span class="co">#&gt;   name      age gender salary department      location  </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;     </span>
<span class="co">#&gt; 1 john       45 m       40000 commercial      washington</span>
<span class="co">#&gt; 2 mary       55 f       50000 production      paris     </span>
<span class="co">#&gt; 3 paul       58 m       25000 human resources london    </span>
<span class="co">#&gt; 4 susan      40 f       48000 commercial      washington</span>
<span class="co">#&gt; 5 cynthia    30 f       32000 commercial      washington</span>
<span class="co">#&gt; 6 Joss       39 m       20000 production      paris</span></code></pre></div>
</div>
<div id="full-join" class="section level3" number="5.8.9">
<h3>
<span class="header-section-number">5.8.9</span> Full join<a class="anchor" aria-label="anchor" href="#full-join"><i class="fas fa-link"></i></a>
</h3>
<p>The full join returns all records between the left and right dataset</p>
<div class="sourceCode" id="cb186"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span><span class="va">employees</span>, <span class="va">departments</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 6</span>
<span class="co">#&gt;    name      age gender salary department      location  </span>
<span class="co">#&gt;    &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;     </span>
<span class="co">#&gt;  1 john       45 m       40000 commercial      washington</span>
<span class="co">#&gt;  2 mary       55 f       50000 production      paris     </span>
<span class="co">#&gt;  3 david      35 m       35000 &lt;NA&gt;            &lt;NA&gt;      </span>
<span class="co">#&gt;  4 paul       58 m       25000 human resources london    </span>
<span class="co">#&gt;  5 susan      40 f       48000 commercial      washington</span>
<span class="co">#&gt;  6 cynthia    30 f       32000 commercial      washington</span>
<span class="co">#&gt;  7 Joss       39 m       20000 production      paris     </span>
<span class="co">#&gt;  8 dennis     25 m       45000 &lt;NA&gt;            &lt;NA&gt;      </span>
<span class="co">#&gt;  9 &lt;NA&gt;       NA &lt;NA&gt;       NA finance         dubai     </span>
<span class="co">#&gt; 10 &lt;NA&gt;       NA &lt;NA&gt;       NA maintenance     dublin</span></code></pre></div>
</div>
<div id="anti-join" class="section level3" number="5.8.10">
<h3>
<span class="header-section-number">5.8.10</span> Anti join<a class="anchor" aria-label="anchor" href="#anti-join"><i class="fas fa-link"></i></a>
</h3>
<p>The anti join returns all records found on the left dataset but absent in the right one</p>
<div class="sourceCode" id="cb187"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">employees</span>, <span class="va">departments</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 x 5</span>
<span class="co">#&gt;   name     age gender salary department</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;     </span>
<span class="co">#&gt; 1 david     35 m       35000 &lt;NA&gt;      </span>
<span class="co">#&gt; 2 dennis    25 m       45000 &lt;NA&gt;</span></code></pre></div>
<p>Tibbles with different column names</p>
<div class="sourceCode" id="cb188"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># recreating employee table with different column names</span>
<span class="va">employees</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
    name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'john'</span>, <span class="st">'mary'</span>, <span class="st">'david'</span>, <span class="st">'paul'</span>, <span class="st">'susan'</span>, <span class="st">'cynthia'</span>, <span class="st">'Joss'</span>, <span class="st">'dennis'</span><span class="op">)</span>,
    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">45</span>, <span class="fl">55</span>, <span class="fl">35</span>, <span class="fl">58</span>, <span class="fl">40</span>, <span class="fl">30</span>, <span class="fl">39</span>, <span class="fl">25</span><span class="op">)</span>,
    gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'m'</span>, <span class="st">'f'</span>, <span class="st">'m'</span>, <span class="st">'m'</span>, <span class="st">'f'</span>, <span class="st">'f'</span>, <span class="st">'m'</span>, <span class="st">'m'</span><span class="op">)</span>,
    salary <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">40000</span>, <span class="fl">50000</span>, <span class="fl">35000</span>, <span class="fl">25000</span>, <span class="fl">48000</span>, <span class="fl">32000</span>, <span class="fl">20000</span>, <span class="fl">45000</span><span class="op">)</span>,
    dep_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'commercial'</span>, <span class="st">'production'</span>, <span class="cn">NA</span>, <span class="st">'human resources'</span>, 
                 <span class="st">'commercial'</span>, <span class="st">'commercial'</span>, <span class="st">'production'</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>
<span class="va">employees</span>
<span class="co">#&gt; # A tibble: 8 x 5</span>
<span class="co">#&gt;   name      age gender salary dep_name       </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;          </span>
<span class="co">#&gt; 1 john       45 m       40000 commercial     </span>
<span class="co">#&gt; 2 mary       55 f       50000 production     </span>
<span class="co">#&gt; 3 david      35 m       35000 &lt;NA&gt;           </span>
<span class="co">#&gt; 4 paul       58 m       25000 human resources</span>
<span class="co">#&gt; 5 susan      40 f       48000 commercial     </span>
<span class="co">#&gt; 6 cynthia    30 f       32000 commercial     </span>
<span class="co">#&gt; 7 Joss       39 m       20000 production     </span>
<span class="co">#&gt; 8 dennis     25 m       45000 &lt;NA&gt;</span>

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">employees</span>, <span class="va">departments</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'dep_name'</span> <span class="op">=</span> <span class="st">'department'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 8 x 6</span>
<span class="co">#&gt;   name      age gender salary dep_name        location  </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;     </span>
<span class="co">#&gt; 1 john       45 m       40000 commercial      washington</span>
<span class="co">#&gt; 2 mary       55 f       50000 production      paris     </span>
<span class="co">#&gt; 3 david      35 m       35000 &lt;NA&gt;            &lt;NA&gt;      </span>
<span class="co">#&gt; 4 paul       58 m       25000 human resources london    </span>
<span class="co">#&gt; 5 susan      40 f       48000 commercial      washington</span>
<span class="co">#&gt; 6 cynthia    30 f       32000 commercial      washington</span>
<span class="co">#&gt; 7 Joss       39 m       20000 production      paris     </span>
<span class="co">#&gt; 8 dennis     25 m       45000 &lt;NA&gt;            &lt;NA&gt;</span></code></pre></div>
<p>Joining on more than one joining column</p>
<div class="sourceCode" id="cb189"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># adding a subdepartment</span>
<span class="va">employees</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
    name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'john'</span>, <span class="st">'mary'</span>, <span class="st">'david'</span>, <span class="st">'paul'</span>, <span class="st">'susan'</span>, <span class="st">'cynthia'</span>, <span class="st">'Joss'</span>, <span class="st">'dennis'</span><span class="op">)</span>,
    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">45</span>, <span class="fl">55</span>, <span class="fl">35</span>, <span class="fl">58</span>, <span class="fl">40</span>, <span class="fl">30</span>, <span class="fl">39</span>, <span class="fl">25</span><span class="op">)</span>,
    gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'m'</span>, <span class="st">'f'</span>, <span class="st">'m'</span>, <span class="st">'m'</span>, <span class="st">'f'</span>, <span class="st">'f'</span>, <span class="st">'m'</span>, <span class="st">'m'</span><span class="op">)</span>,
    salary <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">40000</span>, <span class="fl">50000</span>, <span class="fl">35000</span>, <span class="fl">25000</span>, <span class="fl">48000</span>, <span class="fl">32000</span>, <span class="fl">20000</span>, <span class="fl">45000</span><span class="op">)</span>,
    department <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'commercial'</span>, <span class="st">'production'</span>, <span class="cn">NA</span>, <span class="st">'human resources'</span>, <span class="st">'commercial'</span>, 
                   <span class="st">'commercial'</span>, <span class="st">'production'</span>, <span class="cn">NA</span><span class="op">)</span>,
    subdepartment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'marketing'</span>, <span class="st">'production'</span>, <span class="cn">NA</span>, <span class="st">'human resources'</span>, <span class="st">'sales'</span>, 
                      <span class="st">'sales'</span>, <span class="st">'production'</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>
<span class="va">employees</span>
<span class="co">#&gt; # A tibble: 8 x 6</span>
<span class="co">#&gt;   name      age gender salary department      subdepartment </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;         </span>
<span class="co">#&gt; 1 john       45 m       40000 commercial      marketing     </span>
<span class="co">#&gt; 2 mary       55 f       50000 production      production    </span>
<span class="co">#&gt; 3 david      35 m       35000 &lt;NA&gt;            &lt;NA&gt;          </span>
<span class="co">#&gt; 4 paul       58 m       25000 human resources human resourc~</span>
<span class="co">#&gt; 5 susan      40 f       48000 commercial      sales         </span>
<span class="co">#&gt; 6 cynthia    30 f       32000 commercial      sales         </span>
<span class="co">#&gt; 7 Joss       39 m       20000 production      production    </span>
<span class="co">#&gt; 8 dennis     25 m       45000 &lt;NA&gt;            &lt;NA&gt;</span>

<span class="va">departments</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
    department <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'commercial'</span>, <span class="st">'commercial'</span>, <span class="st">'human resources'</span>, <span class="st">'production'</span>, 
                   <span class="st">'finance'</span>, <span class="st">'finance'</span>, <span class="st">'maintenance'</span><span class="op">)</span>,
    subdepartment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'marketing'</span>, <span class="st">'sales'</span>, <span class="st">'human resources'</span>, <span class="st">'production'</span>, <span class="st">'finance'</span>, 
                      <span class="st">'accounting'</span>, <span class="st">'maintenance'</span><span class="op">)</span>,
    location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'washington'</span>, <span class="st">'washington'</span>, <span class="st">'london'</span>, <span class="st">'paris'</span>, <span class="st">'dubai'</span>, <span class="st">'dubai'</span>, <span class="st">'dublin'</span><span class="op">)</span><span class="op">)</span>
<span class="va">departments</span>
<span class="co">#&gt; # A tibble: 7 x 3</span>
<span class="co">#&gt;   department      subdepartment   location  </span>
<span class="co">#&gt;   &lt;chr&gt;           &lt;chr&gt;           &lt;chr&gt;     </span>
<span class="co">#&gt; 1 commercial      marketing       washington</span>
<span class="co">#&gt; 2 commercial      sales           washington</span>
<span class="co">#&gt; 3 human resources human resources london    </span>
<span class="co">#&gt; 4 production      production      paris     </span>
<span class="co">#&gt; 5 finance         finance         dubai     </span>
<span class="co">#&gt; 6 finance         accounting      dubai     </span>
<span class="co">#&gt; 7 maintenance     maintenance     dublin</span>

<span class="co"># since columns have the same names, joining is done automatically</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">employees</span>, <span class="va">departments</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 8 x 7</span>
<span class="co">#&gt;   name      age gender salary department      subdepartment </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;         </span>
<span class="co">#&gt; 1 john       45 m       40000 commercial      marketing     </span>
<span class="co">#&gt; 2 mary       55 f       50000 production      production    </span>
<span class="co">#&gt; 3 david      35 m       35000 &lt;NA&gt;            &lt;NA&gt;          </span>
<span class="co">#&gt; 4 paul       58 m       25000 human resources human resourc~</span>
<span class="co">#&gt; 5 susan      40 f       48000 commercial      sales         </span>
<span class="co">#&gt; 6 cynthia    30 f       32000 commercial      sales         </span>
<span class="co">#&gt; 7 Joss       39 m       20000 production      production    </span>
<span class="co">#&gt; 8 dennis     25 m       45000 &lt;NA&gt;            &lt;NA&gt;          </span>
<span class="co">#&gt; # ... with 1 more variable: location &lt;chr&gt;</span>


<span class="co"># declaring column names explicitly</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">employees</span>, <span class="va">departments</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"department"</span>, <span class="st">"subdepartment"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 8 x 7</span>
<span class="co">#&gt;   name      age gender salary department      subdepartment </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;         </span>
<span class="co">#&gt; 1 john       45 m       40000 commercial      marketing     </span>
<span class="co">#&gt; 2 mary       55 f       50000 production      production    </span>
<span class="co">#&gt; 3 david      35 m       35000 &lt;NA&gt;            &lt;NA&gt;          </span>
<span class="co">#&gt; 4 paul       58 m       25000 human resources human resourc~</span>
<span class="co">#&gt; 5 susan      40 f       48000 commercial      sales         </span>
<span class="co">#&gt; 6 cynthia    30 f       32000 commercial      sales         </span>
<span class="co">#&gt; 7 Joss       39 m       20000 production      production    </span>
<span class="co">#&gt; 8 dennis     25 m       45000 &lt;NA&gt;            &lt;NA&gt;          </span>
<span class="co">#&gt; # ... with 1 more variable: location &lt;chr&gt;</span>

<span class="co"># with different names</span>
<span class="va">employees</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
    name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'john'</span>, <span class="st">'mary'</span>, <span class="st">'david'</span>, <span class="st">'paul'</span>, <span class="st">'susan'</span>, <span class="st">'cynthia'</span>, <span class="st">'Joss'</span>, <span class="st">'dennis'</span><span class="op">)</span>,
    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">45</span>, <span class="fl">55</span>, <span class="fl">35</span>, <span class="fl">58</span>, <span class="fl">40</span>, <span class="fl">30</span>, <span class="fl">39</span>, <span class="fl">25</span><span class="op">)</span>,
    gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'m'</span>, <span class="st">'f'</span>, <span class="st">'m'</span>, <span class="st">'m'</span>, <span class="st">'f'</span>, <span class="st">'f'</span>, <span class="st">'m'</span>, <span class="st">'m'</span><span class="op">)</span>,
    salary <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">40000</span>, <span class="fl">50000</span>, <span class="fl">35000</span>, <span class="fl">25000</span>, <span class="fl">48000</span>, <span class="fl">32000</span>, <span class="fl">20000</span>, <span class="fl">45000</span><span class="op">)</span>,
    dep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'commercial'</span>, <span class="st">'production'</span>, <span class="cn">NA</span>, <span class="st">'human resources'</span>, <span class="st">'commercial'</span>, 
            <span class="st">'commercial'</span>, <span class="st">'production'</span>, <span class="cn">NA</span><span class="op">)</span>,
    sub <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'marketing'</span>, <span class="st">'production'</span>, <span class="cn">NA</span>, <span class="st">'human resources'</span>, <span class="st">'sales'</span>, 
            <span class="st">'sales'</span>, <span class="st">'production'</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>
<span class="va">employees</span>
<span class="co">#&gt; # A tibble: 8 x 6</span>
<span class="co">#&gt;   name      age gender salary dep             sub           </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;         </span>
<span class="co">#&gt; 1 john       45 m       40000 commercial      marketing     </span>
<span class="co">#&gt; 2 mary       55 f       50000 production      production    </span>
<span class="co">#&gt; 3 david      35 m       35000 &lt;NA&gt;            &lt;NA&gt;          </span>
<span class="co">#&gt; 4 paul       58 m       25000 human resources human resourc~</span>
<span class="co">#&gt; 5 susan      40 f       48000 commercial      sales         </span>
<span class="co">#&gt; 6 cynthia    30 f       32000 commercial      sales         </span>
<span class="co">#&gt; 7 Joss       39 m       20000 production      production    </span>
<span class="co">#&gt; 8 dennis     25 m       45000 &lt;NA&gt;            &lt;NA&gt;</span>

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">employees</span>, <span class="va">departments</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'dep'</span> <span class="op">=</span> <span class="st">'department'</span>, <span class="st">'sub'</span> <span class="op">=</span> <span class="st">'subdepartment'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 8 x 7</span>
<span class="co">#&gt;   name      age gender salary dep             sub   location</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt; &lt;chr&gt;   </span>
<span class="co">#&gt; 1 john       45 m       40000 commercial      mark~ washing~</span>
<span class="co">#&gt; 2 mary       55 f       50000 production      prod~ paris   </span>
<span class="co">#&gt; 3 david      35 m       35000 &lt;NA&gt;            &lt;NA&gt;  &lt;NA&gt;    </span>
<span class="co">#&gt; 4 paul       58 m       25000 human resources huma~ london  </span>
<span class="co">#&gt; 5 susan      40 f       48000 commercial      sales washing~</span>
<span class="co">#&gt; 6 cynthia    30 f       32000 commercial      sales washing~</span>
<span class="co">#&gt; 7 Joss       39 m       20000 production      prod~ paris   </span>
<span class="co">#&gt; 8 dennis     25 m       45000 &lt;NA&gt;            &lt;NA&gt;  &lt;NA&gt;</span></code></pre></div>
</div>
</div>
<div id="tr-summary" class="section level2" number="5.9">
<h2>
<span class="header-section-number">5.9</span> Aggregating and grouping data<a class="anchor" aria-label="anchor" href="#tr-summary"><i class="fas fa-link"></i></a>
</h2>
<div id="aggregating" class="section level3" number="5.9.1">
<h3>
<span class="header-section-number">5.9.1</span> Aggregating<a class="anchor" aria-label="anchor" href="#aggregating"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> aggregates data using various summarization functions from both Base R and dplyr itself. In addition to the summarization functions like <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>, <code><a href="https://rdrr.io/r/stats/median.html">median()</a></code>, <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code>, etc. Which come with base R, dplyr comes with the following:</p>
<ul>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/context.html">n()</a></code> for counts of rows,</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct()</a></code> for counts of unique elements</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/nth.html">first()</a></code> for first value</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/nth.html">last()</a></code> for last value</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/nth.html">nth()</a></code> for nth value</li>
</ul>
<div class="sourceCode" id="cb190"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>

<span class="co"># performing aggregations</span>
<span class="va">gapminder</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>`total pop` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">pop</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, 
            `mean pop` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pop</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, 
            `median pop` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">pop</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, 
            `country count` <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 x 4</span>
<span class="co">#&gt;   `total pop` `mean pop` `median pop` `country count`</span>
<span class="co">#&gt;         &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;           &lt;int&gt;</span>
<span class="co">#&gt; 1  6251013179  44021220.     10517531             142</span></code></pre></div>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/summarise_all.html">summarise_at()</a></code> affects variables selected with a character vector or <code><a href="https://dplyr.tidyverse.org/reference/vars.html">vars()</a></code>.</p>
<div class="sourceCode" id="cb191"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># using multiple summarization function</span>
<span class="va">gapminder</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise_all.html">summarise_at</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="va">mean</span>, median <span class="op">=</span> <span class="va">median</span>, count <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;    mean median count</span>
<span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1  67.0   71.9   142</span>

<span class="va">gapminder</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise_all.html">summarise_at</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;    mean median     n</span>
<span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1  67.0   71.9   142</span>

<span class="co"># multiple columns with vars</span>
<span class="va">gapminder</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise_all.html">summarise_at</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">lifeExp</span>, <span class="va">gdpPercap</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="va">mean</span>, median <span class="op">=</span> <span class="va">median</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 x 4</span>
<span class="co">#&gt;   lifeExp_mean gdpPercap_mean lifeExp_median</span>
<span class="co">#&gt;          &lt;dbl&gt;          &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt; 1         67.0         11680.           71.9</span>
<span class="co">#&gt; # ... with 1 more variable: gdpPercap_median &lt;dbl&gt;</span>

<span class="co"># multiple columns with vectors</span>
<span class="va">gapminder</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise_all.html">summarise_at</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'lifeExp'</span>, <span class="st">'gdpPercap'</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="va">mean</span>, median <span class="op">=</span> <span class="va">median</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 x 4</span>
<span class="co">#&gt;   lifeExp_mean gdpPercap_mean lifeExp_median</span>
<span class="co">#&gt;          &lt;dbl&gt;          &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt; 1         67.0         11680.           71.9</span>
<span class="co">#&gt; # ... with 1 more variable: gdpPercap_median &lt;dbl&gt;</span>

<span class="co"># using a custom function</span>
<span class="va">gapminder</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise_all.html">summarise_at</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">lifeExp</span>, <span class="va">gdpPercap</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>, 
                                              median <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  
<span class="co">#&gt; # A tibble: 1 x 4</span>
<span class="co">#&gt;   lifeExp_mean gdpPercap_mean lifeExp_median</span>
<span class="co">#&gt;          &lt;dbl&gt;          &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt; 1           67         11680.           71.9</span>
<span class="co">#&gt; # ... with 1 more variable: gdpPercap_median &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="grouping-data" class="section level3" number="5.9.2">
<h3>
<span class="header-section-number">5.9.2</span> Grouping data<a class="anchor" aria-label="anchor" href="#grouping-data"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> is used to group data while the function <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup()</a></code> is used to ungroup data after applying grouping. It is always a good idea to ungroup data after working with groupings as functions in dplyr will behave differently with grouped data.</p>
<div class="sourceCode" id="cb192"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># grouping by single column (continent)</span>
<span class="va">gapminder</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>`total pop` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">pop</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, 
            `mean pop` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pop</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, 
            `median pop` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">pop</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, 
            `country count` <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 x 5</span>
<span class="co">#&gt;   continent `total pop` `mean pop` `median pop`</span>
<span class="co">#&gt;   &lt;fct&gt;           &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Africa      929539692  17875763.    10093310.</span>
<span class="co">#&gt; 2 Americas    898871184  35954847.     9319622 </span>
<span class="co">#&gt; 3 Asia       3811953827 115513752.    24821286 </span>
<span class="co">#&gt; 4 Europe      586098529  19536618.     9493598 </span>
<span class="co">#&gt; 5 Oceania      24549947  12274974.    12274974.</span>
<span class="co">#&gt; # ... with 1 more variable: country count &lt;int&gt;</span>

<span class="co"># grouping by two categorical columns (continent and year)</span>
<span class="va">gapminder</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1987</span>, <span class="fl">2007</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">continent</span>, <span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>`total pop` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">pop</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, 
            `mean pop` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pop</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, 
            `median pop` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">pop</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, 
            `country count` <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 6</span>
<span class="co">#&gt;    continent  year `total pop` `mean pop` `median pop`</span>
<span class="co">#&gt;    &lt;fct&gt;     &lt;int&gt;       &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Africa     1987   574834110  11054502.     6635612.</span>
<span class="co">#&gt;  2 Africa     2007   929539692  17875763.    10093310.</span>
<span class="co">#&gt;  3 Americas   1987   682753971  27310159.     6655297 </span>
<span class="co">#&gt;  4 Americas   2007   898871184  35954847.     9319622 </span>
<span class="co">#&gt;  5 Asia       1987  2871220762  87006690.    16495304 </span>
<span class="co">#&gt;  6 Asia       2007  3811953827 115513752.    24821286 </span>
<span class="co">#&gt;  7 Europe     1987   543094160  18103139.     9101370.</span>
<span class="co">#&gt;  8 Europe     2007   586098529  19536618.     9493598 </span>
<span class="co">#&gt;  9 Oceania    1987    19574415   9787208.     9787208.</span>
<span class="co">#&gt; 10 Oceania    2007    24549947  12274974.    12274974.</span>
<span class="co">#&gt; # ... with 1 more variable: country count &lt;int&gt;</span>

<span class="co"># sorting by group</span>
<span class="va">gap_data</span> <span class="op">&lt;-</span>
<span class="va">gapminder</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">pop</span>, .by_group <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">gap_data</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 6</span>
<span class="co">#&gt;   country               continent  year lifeExp    pop gdpPercap</span>
<span class="co">#&gt;   &lt;fct&gt;                 &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;  &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Sao Tome and Principe Africa     1952    46.5  60011      880.</span>
<span class="co">#&gt; 2 Djibouti              Africa     1952    34.8  63149     2670.</span>
<span class="co">#&gt; 3 Bahrain               Asia       1952    50.9 120447     9867.</span>
<span class="co">#&gt; 4 Iceland               Europe     1952    72.5 147962     7268.</span>
<span class="co">#&gt; 5 Comoros               Africa     1952    40.7 153936     1103.</span>
<span class="co">#&gt; 6 Kuwait                Asia       1952    55.6 160000   108382.</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">gap_data</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 6</span>
<span class="co">#&gt;   country       continent  year lifeExp        pop gdpPercap</span>
<span class="co">#&gt;   &lt;fct&gt;         &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;      &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Pakistan      Asia       2007    65.5  169270617     2606.</span>
<span class="co">#&gt; 2 Brazil        Americas   2007    72.4  190010647     9066.</span>
<span class="co">#&gt; 3 Indonesia     Asia       2007    70.6  223547000     3541.</span>
<span class="co">#&gt; 4 United States Americas   2007    78.2  301139947    42952.</span>
<span class="co">#&gt; 5 India         Asia       2007    64.7 1110396331     2452.</span>
<span class="co">#&gt; 6 China         Asia       2007    73.0 1318683096     4959.</span>

<span class="co"># ranking by group</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">Year</span>, <span class="va">Revenue</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">Year</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>rank_by_revenue <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rank.html">rank</a></span><span class="op">(</span><span class="va">Revenue</span>, ties.method <span class="op">=</span> <span class="st">"first"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">43</span><span class="op">:</span><span class="fl">47</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 x 5</span>
<span class="co">#&gt;   Title             Year Revenue Metascore rank_by_revenue</span>
<span class="co">#&gt;   &lt;chr&gt;            &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;           &lt;int&gt;</span>
<span class="co">#&gt; 1 Deja Vu           2006   NA           NA              43</span>
<span class="co">#&gt; 2 Inland Empire     2006   NA           NA              44</span>
<span class="co">#&gt; 3 The Babysitters   2007    0.04        35               1</span>
<span class="co">#&gt; 4 Taare Zameen Par  2007    1.2         42               2</span>
<span class="co">#&gt; 5 Funny Games       2007    1.29        NA               3</span>

<span class="co">## NB: Notice as ranking restarts once as 2007 is reached.</span></code></pre></div>
</div>
<div id="splitting-data-frame-by-groups" class="section level3" number="5.9.3">
<h3>
<span class="header-section-number">5.9.3</span> Splitting data frame by groups<a class="anchor" aria-label="anchor" href="#splitting-data-frame-by-groups"><i class="fas fa-link"></i></a>
</h3>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/group_split.html">group_split()</a></code> is like <code><a href="https://rdrr.io/r/base/split.html">base::split()</a></code> in that it splits a data frame.</p>
<div class="sourceCode" id="cb193"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">movies_year</span> <span class="op">&lt;-</span> 
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mov</span>, <span class="va">Title</span>, <span class="va">Year</span>, <span class="va">Revenue</span>, <span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html">group_split</a></span><span class="op">(</span><span class="va">Year</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">movies_year</span><span class="op">)</span>
<span class="co">#&gt; [1] 11</span>
<span class="va">movies_year</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>
<span class="co">#&gt; &lt;list_of&lt;</span>
<span class="co">#&gt;   tbl_df&lt;</span>
<span class="co">#&gt;     Title    : character</span>
<span class="co">#&gt;     Year     : integer</span>
<span class="co">#&gt;     Revenue  : double</span>
<span class="co">#&gt;     Metascore: integer</span>
<span class="co">#&gt;   &gt;</span>
<span class="co">#&gt; &gt;[1]&gt;</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; # A tibble: 44 x 4</span>
<span class="co">#&gt;    Title                              Year Revenue Metascore</span>
<span class="co">#&gt;    &lt;chr&gt;                             &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;</span>
<span class="co">#&gt;  1 The Prestige                       2006    53.1        66</span>
<span class="co">#&gt;  2 Pirates of the Caribbean: Dead M~  2006   423.         53</span>
<span class="co">#&gt;  3 The Departed                       2006   132.         85</span>
<span class="co">#&gt;  4 300                                2006   211.         52</span>
<span class="co">#&gt;  5 Casino Royale                      2006   167.         80</span>
<span class="co">#&gt;  6 Cars                               2006   244.         73</span>
<span class="co">#&gt;  7 Pan's Labyrinth                    2006    37.6        98</span>
<span class="co">#&gt;  8 Apocalypto                         2006    50.9        68</span>
<span class="co">#&gt;  9 Children of Men                    2006    35.3        84</span>
<span class="co">#&gt; 10 The Devil Wears Prada              2006   125.         62</span>
<span class="co">#&gt; # ... with 34 more rows</span></code></pre></div>
</div>
</div>
<div id="tr-reshape" class="section level2" number="5.10">
<h2>
<span class="header-section-number">5.10</span> Pivoting and unpivoting data with tidyr<a class="anchor" aria-label="anchor" href="#tr-reshape"><i class="fas fa-link"></i></a>
</h2>
<div id="pivoting-1" class="section level3" number="5.10.1">
<h3>
<span class="header-section-number">5.10.1</span> Pivoting<a class="anchor" aria-label="anchor" href="#pivoting-1"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider()</a></code> pivots data that is converting it from long to wide. It expects the following:</p>
<ul>
<li>names_from: rows to move to columns</li>
<li>values_from: values to be placed between the intersection of rows and columns (cell values)</li>
</ul>
<div class="sourceCode" id="cb194"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span>

<span class="co"># preparing data</span>
<span class="va">dt</span> <span class="op">&lt;-</span>
<span class="va">gapminder</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1987</span>, <span class="fl">1997</span>, <span class="fl">2007</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">continent</span>, <span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>total_pop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">pop</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">dt</span>
<span class="co">#&gt; # A tibble: 15 x 3</span>
<span class="co">#&gt;    continent  year  total_pop</span>
<span class="co">#&gt;    &lt;fct&gt;     &lt;int&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Africa     1987  574834110</span>
<span class="co">#&gt;  2 Africa     1997  743832984</span>
<span class="co">#&gt;  3 Africa     2007  929539692</span>
<span class="co">#&gt;  4 Americas   1987  682753971</span>
<span class="co">#&gt;  5 Americas   1997  796900410</span>
<span class="co">#&gt;  6 Americas   2007  898871184</span>
<span class="co">#&gt;  7 Asia       1987 2871220762</span>
<span class="co">#&gt;  8 Asia       1997 3383285500</span>
<span class="co">#&gt;  9 Asia       2007 3811953827</span>
<span class="co">#&gt; 10 Europe     1987  543094160</span>
<span class="co">#&gt; 11 Europe     1997  568944148</span>
<span class="co">#&gt; 12 Europe     2007  586098529</span>
<span class="co">#&gt; 13 Oceania    1987   19574415</span>
<span class="co">#&gt; 14 Oceania    1997   22241430</span>
<span class="co">#&gt; 15 Oceania    2007   24549947</span>

<span class="co"># pivoting data</span>
<span class="va">dt</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">year</span>, values_from <span class="op">=</span> <span class="va">total_pop</span>, names_prefix <span class="op">=</span> <span class="st">'Y'</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 x 4</span>
<span class="co">#&gt;   continent      Y1987      Y1997      Y2007</span>
<span class="co">#&gt;   &lt;fct&gt;          &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Africa     574834110  743832984  929539692</span>
<span class="co">#&gt; 2 Americas   682753971  796900410  898871184</span>
<span class="co">#&gt; 3 Asia      2871220762 3383285500 3811953827</span>
<span class="co">#&gt; 4 Europe     543094160  568944148  586098529</span>
<span class="co">#&gt; 5 Oceania     19574415   22241430   24549947</span></code></pre></div>
</div>
<div id="unpivoting-1" class="section level3" number="5.10.2">
<h3>
<span class="header-section-number">5.10.2</span> Unpivoting<a class="anchor" aria-label="anchor" href="#unpivoting-1"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code> unpivots data, that is converting it from wide to long. It expects:</p>
<ul>
<li>cols: columns to move to row</li>
<li>names_to: name of the new column for moved columns</li>
<li>values_to: name of the new column for moved cell values</li>
</ul>
<div class="sourceCode" id="cb195"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># preparing data </span>
<span class="va">dt_wide</span> <span class="op">&lt;-</span>
<span class="va">dt</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">year</span>, values_from <span class="op">=</span> <span class="va">total_pop</span>, names_prefix <span class="op">=</span> <span class="st">'Y'</span><span class="op">)</span>
<span class="va">dt_wide</span>
<span class="co">#&gt; # A tibble: 5 x 4</span>
<span class="co">#&gt;   continent      Y1987      Y1997      Y2007</span>
<span class="co">#&gt;   &lt;fct&gt;          &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Africa     574834110  743832984  929539692</span>
<span class="co">#&gt; 2 Americas   682753971  796900410  898871184</span>
<span class="co">#&gt; 3 Asia      2871220762 3383285500 3811953827</span>
<span class="co">#&gt; 4 Europe     543094160  568944148  586098529</span>
<span class="co">#&gt; 5 Oceania     19574415   22241430   24549947</span>

<span class="co"># unpivoting data</span>
<span class="va">dt_wide</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Y1987</span>, <span class="va">Y1997</span>, <span class="va">Y2007</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;   continent name      value</span>
<span class="co">#&gt;   &lt;fct&gt;     &lt;chr&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Africa    Y1987 574834110</span>
<span class="co">#&gt; 2 Africa    Y1997 743832984</span>
<span class="co">#&gt; 3 Africa    Y2007 929539692</span>
<span class="co">#&gt; 4 Americas  Y1987 682753971</span>
<span class="co">#&gt; 5 Americas  Y1997 796900410</span>
<span class="co">#&gt; 6 Americas  Y2007 898871184</span>

<span class="co"># replacing name and value</span>
<span class="va">dt_wide</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Y1987</span>, <span class="va">Y1997</span>, <span class="va">Y2007</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">'year'</span>, values_to <span class="op">=</span> <span class="st">'population'</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;   continent year  population</span>
<span class="co">#&gt;   &lt;fct&gt;     &lt;chr&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Africa    Y1987  574834110</span>
<span class="co">#&gt; 2 Africa    Y1997  743832984</span>
<span class="co">#&gt; 3 Africa    Y2007  929539692</span>
<span class="co">#&gt; 4 Americas  Y1987  682753971</span>
<span class="co">#&gt; 5 Americas  Y1997  796900410</span>
<span class="co">#&gt; 6 Americas  Y2007  898871184</span></code></pre></div>
</div>
</div>
<div id="dealing-with-duplicate-values-with-dplyr" class="section level2" number="5.11">
<h2>
<span class="header-section-number">5.11</span> Dealing with duplicate values with dplyr<a class="anchor" aria-label="anchor" href="#dealing-with-duplicate-values-with-dplyr"><i class="fas fa-link"></i></a>
</h2>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct()</a></code> is used to extract unique values while <code><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct()</a></code> returns the count of unique values.</p>
<div class="sourceCode" id="cb196"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>

<span class="co"># reading data</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/IMDB-Movie-Data.csv"</span>, header <span class="op">=</span> <span class="cn">T</span>, sep <span class="op">=</span> <span class="st">","</span>, dec <span class="op">=</span> <span class="st">"."</span>, fileEncoding <span class="op">=</span> <span class="st">"UTF-8"</span>, quote <span class="op">=</span> <span class="st">"\""</span>,
                  comment.char <span class="op">=</span> <span class="st">""</span><span class="op">)</span>


<span class="co"># preparing data</span>
<span class="va">movies</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Year</span> <span class="op">==</span> <span class="fl">2006</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   Year Metascore</span>
<span class="co">#&gt; 1 2006        36</span>
<span class="co">#&gt; 2 2006        45</span>
<span class="co">#&gt; 3 2006        45</span>
<span class="co">#&gt; 4 2006        45</span>
<span class="co">#&gt; 5 2006        46</span>
<span class="co">#&gt; 6 2006        47</span>

<span class="co"># extracting unique values</span>
<span class="va">movies</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Year</span> <span class="op">==</span> <span class="fl">2006</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   Year Metascore</span>
<span class="co">#&gt; 1 2006        36</span>
<span class="co">#&gt; 2 2006        45</span>
<span class="co">#&gt; 3 2006        46</span>
<span class="co">#&gt; 4 2006        47</span>
<span class="co">#&gt; 5 2006        48</span>
<span class="co">#&gt; 6 2006        51</span>

<span class="co"># count of unique values</span>
<span class="va">movies</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Year</span> <span class="op">==</span> <span class="fl">2006</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">Year</span>, <span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 27</span>

<span class="co"># extracting unique values by column</span>
<span class="va">movies</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">Year</span>, <span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">Year</span><span class="op">)</span>
<span class="co">#&gt;    Year</span>
<span class="co">#&gt; 1  2006</span>
<span class="co">#&gt; 2  2007</span>
<span class="co">#&gt; 3  2008</span>
<span class="co">#&gt; 4  2009</span>
<span class="co">#&gt; 5  2010</span>
<span class="co">#&gt; 6  2011</span>
<span class="co">#&gt; 7  2012</span>
<span class="co">#&gt; 8  2013</span>
<span class="co">#&gt; 9  2014</span>
<span class="co">#&gt; 10 2015</span>
<span class="co">#&gt; 11 2016</span>

<span class="co"># keeping other columns</span>
<span class="va">movies</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">Year</span>, <span class="va">Metascore</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">Year</span>, .keep_all<span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt;    Year Metascore</span>
<span class="co">#&gt; 1  2006        36</span>
<span class="co">#&gt; 2  2007        29</span>
<span class="co">#&gt; 3  2008        15</span>
<span class="co">#&gt; 4  2009        23</span>
<span class="co">#&gt; 5  2010        20</span>
<span class="co">#&gt; 6  2011        31</span>
<span class="co">#&gt; 7  2012        31</span>
<span class="co">#&gt; 8  2013        18</span>
<span class="co">#&gt; 9  2014        22</span>
<span class="co">#&gt; 10 2015        18</span>
<span class="co">#&gt; 11 2016        11</span></code></pre></div>
</div>
<div id="dealing-with-na-values-with-tidyr" class="section level2" number="5.12">
<h2>
<span class="header-section-number">5.12</span> Dealing with NA values with tidyr<a class="anchor" aria-label="anchor" href="#dealing-with-na-values-with-tidyr"><i class="fas fa-link"></i></a>
</h2>
<div id="replacing-missing-values-by-locf" class="section level3" number="5.12.1">
<h3>
<span class="header-section-number">5.12.1</span> Replacing missing values by LOCF<a class="anchor" aria-label="anchor" href="#replacing-missing-values-by-locf"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://tidyr.tidyverse.org/reference/fill.html">fill()</a></code> performs NA replacement both by LOCF and NOCB.</p>
<div class="sourceCode" id="cb197"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span>


<span class="co"># reading data</span>
<span class="va">movies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/IMDB-Movie-Data.csv"</span>, header <span class="op">=</span> <span class="cn">T</span>, sep <span class="op">=</span> <span class="st">","</span>, dec <span class="op">=</span> <span class="st">"."</span>, fileEncoding <span class="op">=</span> <span class="st">"UTF-8"</span>, quote <span class="op">=</span> <span class="st">"\""</span>,
                  comment.char <span class="op">=</span> <span class="st">""</span><span class="op">)</span>


<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">movies</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">7</span>,<span class="fl">11</span>,<span class="fl">12</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Title'</span>, <span class="st">'Year'</span>, <span class="st">'RevenueMillions'</span>, <span class="st">'Metascore'</span><span class="op">)</span>

<span class="co"># replacing NA values to values that precede it</span>
<span class="va">movies</span> <span class="op">%&gt;%</span>
<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">Year</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://tidyr.tidyverse.org/reference/fill.html">fill</a></span><span class="op">(</span><span class="va">RevenueMillions</span>, .direction <span class="op">=</span> <span class="st">"down"</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;      Rank                          Title</span>
<span class="co">#&gt; 991   948                     King Cobra</span>
<span class="co">#&gt; 992   950                          Kicks</span>
<span class="co">#&gt; 993   965                        Custody</span>
<span class="co">#&gt; 994   967                      L'odyssée</span>
<span class="co">#&gt; 995   975                 Queen of Katwe</span>
<span class="co">#&gt; 996   976     My Big Fat Greek Wedding 2</span>
<span class="co">#&gt; 997   978                  Amateur Night</span>
<span class="co">#&gt; 998   979 It's Only the End of the World</span>
<span class="co">#&gt; 999   981           Miracles from Heaven</span>
<span class="co">#&gt; 1000 1000                     Nine Lives</span>
<span class="co">#&gt;                       Genre</span>
<span class="co">#&gt; 991             Crime,Drama</span>
<span class="co">#&gt; 992               Adventure</span>
<span class="co">#&gt; 993                   Drama</span>
<span class="co">#&gt; 994     Adventure,Biography</span>
<span class="co">#&gt; 995   Biography,Drama,Sport</span>
<span class="co">#&gt; 996   Comedy,Family,Romance</span>
<span class="co">#&gt; 997                  Comedy</span>
<span class="co">#&gt; 998                   Drama</span>
<span class="co">#&gt; 999  Biography,Drama,Family</span>
<span class="co">#&gt; 1000  Comedy,Family,Fantasy</span>
<span class="co">#&gt;                                                                                                                                                                                                                                        Description</span>
<span class="co">#&gt; 991                            This ripped-from-the-headlines drama covers the early rise of gay porn headliner Sean Paul Lockhart a.k.a. Brent Corrigan, before his falling out with the producer who made him famous. When... See full summary »</span>
<span class="co">#&gt; 992  Brandon is a 15 year old whose dream is a pair of fresh Air Jordans. Soon after he gets his hands on them, they're stolen by a local hood, causing Brandon and his two friends to go on a dangerous mission through Oakland to retrieve them.</span>
<span class="co">#&gt; 993                                                                                                                                            The lives of three women are unexpectedly changed when they cross paths at a New York Family Court.</span>
<span class="co">#&gt; 994                 Highly influential and a fearlessly ambitious pioneer, innovator, filmmaker, researcher and conservationist, Jacques-Yves Cousteau's aquatic adventure covers roughly thirty years of an inarguably rich in achievements life.</span>
<span class="co">#&gt; 995                                                                                                                                                      A Ugandan girl sees her world rapidly change after being introduced to the game of chess.</span>
<span class="co">#&gt; 996                                                                                                                                 A Portokalos family secret brings the beloved characters back together for an even bigger and Greeker wedding.</span>
<span class="co">#&gt; 997                               Guy Carter is an award-winning graduate student of architecture. He's got a beautiful wife and a baby on the way. The problem? He doesn't have "his ducks in a row," which only fuels his ... See full summary »</span>
<span class="co">#&gt; 998                                                                                                                        Louis (Gaspard Ulliel), a terminally ill writer, returns home after a long absence to tell his family that he is dying.</span>
<span class="co">#&gt; 999                                                                                                                    A young girl suffering from a rare digestive disorder finds herself miraculously cured after surviving a terrible accident.</span>
<span class="co">#&gt; 1000                                                                                                                                                               A stuffy businessman finds himself trapped inside the body of his family's cat.</span>
<span class="co">#&gt;              Director</span>
<span class="co">#&gt; 991      Justin Kelly</span>
<span class="co">#&gt; 992    Justin Tipping</span>
<span class="co">#&gt; 993      James Lapine</span>
<span class="co">#&gt; 994      Jérôme Salle</span>
<span class="co">#&gt; 995         Mira Nair</span>
<span class="co">#&gt; 996        Kirk Jones</span>
<span class="co">#&gt; 997      Lisa Addario</span>
<span class="co">#&gt; 998      Xavier Dolan</span>
<span class="co">#&gt; 999   Patricia Riggen</span>
<span class="co">#&gt; 1000 Barry Sonnenfeld</span>
<span class="co">#&gt;                                                                            Actors</span>
<span class="co">#&gt; 991                Garrett Clayton, Christian Slater, Molly Ringwald,James Kelley</span>
<span class="co">#&gt; 992  Jahking Guillory, Christopher Jordan Wallace,Christopher Meyer, Kofi Siriboe</span>
<span class="co">#&gt; 993        Viola Davis, Hayden Panettiere, Catalina Sandino Moreno, Ellen Burstyn</span>
<span class="co">#&gt; 994                     Lambert Wilson, Pierre Niney, Audrey Tautou,Laurent Lucas</span>
<span class="co">#&gt; 995                Madina Nalwanga, David Oyelowo, Lupita Nyong'o, Martin Kabanza</span>
<span class="co">#&gt; 996                 Nia Vardalos, John Corbett, Michael Constantine, Lainie Kazan</span>
<span class="co">#&gt; 997                  Jason Biggs, Janet Montgomery,Ashley Tisdale, Bria L. Murphy</span>
<span class="co">#&gt; 998                  Nathalie Baye, Vincent Cassel, Marion Cotillard, Léa Seydoux</span>
<span class="co">#&gt; 999             Jennifer Garner, Kylie Rogers, Martin Henderson,Brighton Sharbino</span>
<span class="co">#&gt; 1000                     Kevin Spacey, Jennifer Garner, Robbie Amell,Cheryl Hines</span>
<span class="co">#&gt;      Year Runtime..Minutes. Rating Votes RevenueMillions</span>
<span class="co">#&gt; 991  2016                91    5.6  3990            0.03</span>
<span class="co">#&gt; 992  2016                80    6.1  2417            0.15</span>
<span class="co">#&gt; 993  2016               104    6.9   280            0.15</span>
<span class="co">#&gt; 994  2016               122    6.7  1810            0.15</span>
<span class="co">#&gt; 995  2016               124    7.4  6753            8.81</span>
<span class="co">#&gt; 996  2016                94    6.0 20966           59.57</span>
<span class="co">#&gt; 997  2016                92    5.0  2229           59.57</span>
<span class="co">#&gt; 998  2016                97    7.0 10658           59.57</span>
<span class="co">#&gt; 999  2016               109    7.0 12048           61.69</span>
<span class="co">#&gt; 1000 2016                87    5.3 12435           19.64</span>
<span class="co">#&gt;      Metascore</span>
<span class="co">#&gt; 991         48</span>
<span class="co">#&gt; 992         69</span>
<span class="co">#&gt; 993         72</span>
<span class="co">#&gt; 994         70</span>
<span class="co">#&gt; 995         73</span>
<span class="co">#&gt; 996         37</span>
<span class="co">#&gt; 997         38</span>
<span class="co">#&gt; 998         48</span>
<span class="co">#&gt; 999         44</span>
<span class="co">#&gt; 1000        11</span></code></pre></div>
</div>
<div id="replacing-missing-values-by-nocb" class="section level3" number="5.12.2">
<h3>
<span class="header-section-number">5.12.2</span> Replacing missing values by NOCB<a class="anchor" aria-label="anchor" href="#replacing-missing-values-by-nocb"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb198"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># replacing NA values with proceeding values</span>
<span class="fu"><a href="https://tidyr.tidyverse.org/reference/fill.html">fill</a></span><span class="op">(</span><span class="va">movies</span>, <span class="va">RevenueMillions</span>, .direction <span class="op">=</span> <span class="st">"up"</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;    Rank                   Title                      Genre</span>
<span class="co">#&gt; 1     1 Guardians of the Galaxy    Action,Adventure,Sci-Fi</span>
<span class="co">#&gt; 2     2              Prometheus   Adventure,Mystery,Sci-Fi</span>
<span class="co">#&gt; 3     3                   Split            Horror,Thriller</span>
<span class="co">#&gt; 4     4                    Sing    Animation,Comedy,Family</span>
<span class="co">#&gt; 5     5           Suicide Squad   Action,Adventure,Fantasy</span>
<span class="co">#&gt; 6     6          The Great Wall   Action,Adventure,Fantasy</span>
<span class="co">#&gt; 7     7              La La Land         Comedy,Drama,Music</span>
<span class="co">#&gt; 8     8                Mindhorn                     Comedy</span>
<span class="co">#&gt; 9     9      The Lost City of Z Action,Adventure,Biography</span>
<span class="co">#&gt; 10   10              Passengers    Adventure,Drama,Romance</span>
<span class="co">#&gt;                                                                                                                                                                                                                                        Description</span>
<span class="co">#&gt; 1                                                                                                                  A group of intergalactic criminals are forced to work together to stop a fanatical warrior from taking control of the universe.</span>
<span class="co">#&gt; 2                                                                                                                  Following clues to the origin of mankind, a team finds a structure on a distant moon, but they soon realize they are not alone.</span>
<span class="co">#&gt; 3                                                                                    Three girls are kidnapped by a man with a diagnosed 23 distinct personalities. They must try to escape before the apparent emergence of a frightful new 24th.</span>
<span class="co">#&gt; 4                   In a city of humanoid animals, a hustling theater impresario's attempt to save his theater with a singing competition becomes grander than he anticipates even as its finalists' find that their lives will never be the same.</span>
<span class="co">#&gt; 5                                                              A secret government agency recruits some of the most dangerous incarcerated super-villains to form a defensive task force. Their first mission: save the world from the apocalypse.</span>
<span class="co">#&gt; 6                                                                                               European mercenaries searching for black powder become embroiled in the defense of the Great Wall of China against a horde of monstrous creatures.</span>
<span class="co">#&gt; 7                                                                                                                                                                                     A jazz pianist falls for an aspiring actress in Los Angeles.</span>
<span class="co">#&gt; 8  A has-been actor best known for playing the title character in the 1980s detective series "Mindhorn" must work with the police when a serial killer says that he will only speak with Detective Mindhorn, whom he believes to be a real person.</span>
<span class="co">#&gt; 9                                                                                        A true-life drama, centering on British explorer Col. Percival Fawcett, who disappeared while searching for a mysterious city in the Amazon in the 1920s.</span>
<span class="co">#&gt; 10                                                        A spacecraft traveling to a distant colony planet and transporting thousands of people has a malfunction in its sleep chambers. As a result, two passengers are awakened 90 years early.</span>
<span class="co">#&gt;                Director</span>
<span class="co">#&gt; 1            James Gunn</span>
<span class="co">#&gt; 2          Ridley Scott</span>
<span class="co">#&gt; 3    M. Night Shyamalan</span>
<span class="co">#&gt; 4  Christophe Lourdelet</span>
<span class="co">#&gt; 5            David Ayer</span>
<span class="co">#&gt; 6           Yimou Zhang</span>
<span class="co">#&gt; 7       Damien Chazelle</span>
<span class="co">#&gt; 8            Sean Foley</span>
<span class="co">#&gt; 9            James Gray</span>
<span class="co">#&gt; 10        Morten Tyldum</span>
<span class="co">#&gt;                                                                        Actors</span>
<span class="co">#&gt; 1                        Chris Pratt, Vin Diesel, Bradley Cooper, Zoe Saldana</span>
<span class="co">#&gt; 2     Noomi Rapace, Logan Marshall-Green, Michael Fassbender, Charlize Theron</span>
<span class="co">#&gt; 3            James McAvoy, Anya Taylor-Joy, Haley Lu Richardson, Jessica Sula</span>
<span class="co">#&gt; 4  Matthew McConaughey,Reese Witherspoon, Seth MacFarlane, Scarlett Johansson</span>
<span class="co">#&gt; 5                          Will Smith, Jared Leto, Margot Robbie, Viola Davis</span>
<span class="co">#&gt; 6                               Matt Damon, Tian Jing, Willem Dafoe, Andy Lau</span>
<span class="co">#&gt; 7                    Ryan Gosling, Emma Stone, Rosemarie DeWitt, J.K. Simmons</span>
<span class="co">#&gt; 8             Essie Davis, Andrea Riseborough, Julian Barratt,Kenneth Branagh</span>
<span class="co">#&gt; 9                Charlie Hunnam, Robert Pattinson, Sienna Miller, Tom Holland</span>
<span class="co">#&gt; 10           Jennifer Lawrence, Chris Pratt, Michael Sheen,Laurence Fishburne</span>
<span class="co">#&gt;    Year Runtime..Minutes. Rating  Votes RevenueMillions</span>
<span class="co">#&gt; 1  2014               121    8.1 757074          333.13</span>
<span class="co">#&gt; 2  2012               124    7.0 485820          126.46</span>
<span class="co">#&gt; 3  2016               117    7.3 157606          138.12</span>
<span class="co">#&gt; 4  2016               108    7.2  60545          270.32</span>
<span class="co">#&gt; 5  2016               123    6.2 393727          325.02</span>
<span class="co">#&gt; 6  2016               103    6.1  56036           45.13</span>
<span class="co">#&gt; 7  2016               128    8.3 258682          151.06</span>
<span class="co">#&gt; 8  2016                89    6.4   2490            8.01</span>
<span class="co">#&gt; 9  2016               141    7.1   7188            8.01</span>
<span class="co">#&gt; 10 2016               116    7.0 192177          100.01</span>
<span class="co">#&gt;    Metascore</span>
<span class="co">#&gt; 1         76</span>
<span class="co">#&gt; 2         65</span>
<span class="co">#&gt; 3         62</span>
<span class="co">#&gt; 4         59</span>
<span class="co">#&gt; 5         40</span>
<span class="co">#&gt; 6         42</span>
<span class="co">#&gt; 7         93</span>
<span class="co">#&gt; 8         71</span>
<span class="co">#&gt; 9         78</span>
<span class="co">#&gt; 10        41</span>

<span class="co"># on more than one column</span>
<span class="fu"><a href="https://tidyr.tidyverse.org/reference/fill.html">fill</a></span><span class="op">(</span><span class="va">movies</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">RevenueMillions</span>, <span class="va">Metascore</span><span class="op">)</span>, .direction <span class="op">=</span> <span class="st">"up"</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;    Rank                   Title                      Genre</span>
<span class="co">#&gt; 1     1 Guardians of the Galaxy    Action,Adventure,Sci-Fi</span>
<span class="co">#&gt; 2     2              Prometheus   Adventure,Mystery,Sci-Fi</span>
<span class="co">#&gt; 3     3                   Split            Horror,Thriller</span>
<span class="co">#&gt; 4     4                    Sing    Animation,Comedy,Family</span>
<span class="co">#&gt; 5     5           Suicide Squad   Action,Adventure,Fantasy</span>
<span class="co">#&gt; 6     6          The Great Wall   Action,Adventure,Fantasy</span>
<span class="co">#&gt; 7     7              La La Land         Comedy,Drama,Music</span>
<span class="co">#&gt; 8     8                Mindhorn                     Comedy</span>
<span class="co">#&gt; 9     9      The Lost City of Z Action,Adventure,Biography</span>
<span class="co">#&gt; 10   10              Passengers    Adventure,Drama,Romance</span>
<span class="co">#&gt;                                                                                                                                                                                                                                        Description</span>
<span class="co">#&gt; 1                                                                                                                  A group of intergalactic criminals are forced to work together to stop a fanatical warrior from taking control of the universe.</span>
<span class="co">#&gt; 2                                                                                                                  Following clues to the origin of mankind, a team finds a structure on a distant moon, but they soon realize they are not alone.</span>
<span class="co">#&gt; 3                                                                                    Three girls are kidnapped by a man with a diagnosed 23 distinct personalities. They must try to escape before the apparent emergence of a frightful new 24th.</span>
<span class="co">#&gt; 4                   In a city of humanoid animals, a hustling theater impresario's attempt to save his theater with a singing competition becomes grander than he anticipates even as its finalists' find that their lives will never be the same.</span>
<span class="co">#&gt; 5                                                              A secret government agency recruits some of the most dangerous incarcerated super-villains to form a defensive task force. Their first mission: save the world from the apocalypse.</span>
<span class="co">#&gt; 6                                                                                               European mercenaries searching for black powder become embroiled in the defense of the Great Wall of China against a horde of monstrous creatures.</span>
<span class="co">#&gt; 7                                                                                                                                                                                     A jazz pianist falls for an aspiring actress in Los Angeles.</span>
<span class="co">#&gt; 8  A has-been actor best known for playing the title character in the 1980s detective series "Mindhorn" must work with the police when a serial killer says that he will only speak with Detective Mindhorn, whom he believes to be a real person.</span>
<span class="co">#&gt; 9                                                                                        A true-life drama, centering on British explorer Col. Percival Fawcett, who disappeared while searching for a mysterious city in the Amazon in the 1920s.</span>
<span class="co">#&gt; 10                                                        A spacecraft traveling to a distant colony planet and transporting thousands of people has a malfunction in its sleep chambers. As a result, two passengers are awakened 90 years early.</span>
<span class="co">#&gt;                Director</span>
<span class="co">#&gt; 1            James Gunn</span>
<span class="co">#&gt; 2          Ridley Scott</span>
<span class="co">#&gt; 3    M. Night Shyamalan</span>
<span class="co">#&gt; 4  Christophe Lourdelet</span>
<span class="co">#&gt; 5            David Ayer</span>
<span class="co">#&gt; 6           Yimou Zhang</span>
<span class="co">#&gt; 7       Damien Chazelle</span>
<span class="co">#&gt; 8            Sean Foley</span>
<span class="co">#&gt; 9            James Gray</span>
<span class="co">#&gt; 10        Morten Tyldum</span>
<span class="co">#&gt;                                                                        Actors</span>
<span class="co">#&gt; 1                        Chris Pratt, Vin Diesel, Bradley Cooper, Zoe Saldana</span>
<span class="co">#&gt; 2     Noomi Rapace, Logan Marshall-Green, Michael Fassbender, Charlize Theron</span>
<span class="co">#&gt; 3            James McAvoy, Anya Taylor-Joy, Haley Lu Richardson, Jessica Sula</span>
<span class="co">#&gt; 4  Matthew McConaughey,Reese Witherspoon, Seth MacFarlane, Scarlett Johansson</span>
<span class="co">#&gt; 5                          Will Smith, Jared Leto, Margot Robbie, Viola Davis</span>
<span class="co">#&gt; 6                               Matt Damon, Tian Jing, Willem Dafoe, Andy Lau</span>
<span class="co">#&gt; 7                    Ryan Gosling, Emma Stone, Rosemarie DeWitt, J.K. Simmons</span>
<span class="co">#&gt; 8             Essie Davis, Andrea Riseborough, Julian Barratt,Kenneth Branagh</span>
<span class="co">#&gt; 9                Charlie Hunnam, Robert Pattinson, Sienna Miller, Tom Holland</span>
<span class="co">#&gt; 10           Jennifer Lawrence, Chris Pratt, Michael Sheen,Laurence Fishburne</span>
<span class="co">#&gt;    Year Runtime..Minutes. Rating  Votes RevenueMillions</span>
<span class="co">#&gt; 1  2014               121    8.1 757074          333.13</span>
<span class="co">#&gt; 2  2012               124    7.0 485820          126.46</span>
<span class="co">#&gt; 3  2016               117    7.3 157606          138.12</span>
<span class="co">#&gt; 4  2016               108    7.2  60545          270.32</span>
<span class="co">#&gt; 5  2016               123    6.2 393727          325.02</span>
<span class="co">#&gt; 6  2016               103    6.1  56036           45.13</span>
<span class="co">#&gt; 7  2016               128    8.3 258682          151.06</span>
<span class="co">#&gt; 8  2016                89    6.4   2490            8.01</span>
<span class="co">#&gt; 9  2016               141    7.1   7188            8.01</span>
<span class="co">#&gt; 10 2016               116    7.0 192177          100.01</span>
<span class="co">#&gt;    Metascore</span>
<span class="co">#&gt; 1         76</span>
<span class="co">#&gt; 2         65</span>
<span class="co">#&gt; 3         62</span>
<span class="co">#&gt; 4         59</span>
<span class="co">#&gt; 5         40</span>
<span class="co">#&gt; 6         42</span>
<span class="co">#&gt; 7         93</span>
<span class="co">#&gt; 8         71</span>
<span class="co">#&gt; 9         78</span>
<span class="co">#&gt; 10        41</span>

<span class="fu"><a href="https://tidyr.tidyverse.org/reference/fill.html">fill</a></span><span class="op">(</span><span class="va">movies</span>, <span class="va">RevenueMillions</span><span class="op">:</span><span class="va">Metascore</span>, .direction <span class="op">=</span> <span class="st">"up"</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   Rank                   Title                    Genre</span>
<span class="co">#&gt; 1    1 Guardians of the Galaxy  Action,Adventure,Sci-Fi</span>
<span class="co">#&gt; 2    2              Prometheus Adventure,Mystery,Sci-Fi</span>
<span class="co">#&gt; 3    3                   Split          Horror,Thriller</span>
<span class="co">#&gt; 4    4                    Sing  Animation,Comedy,Family</span>
<span class="co">#&gt; 5    5           Suicide Squad Action,Adventure,Fantasy</span>
<span class="co">#&gt; 6    6          The Great Wall Action,Adventure,Fantasy</span>
<span class="co">#&gt;                                                                                                                                                                                                                      Description</span>
<span class="co">#&gt; 1                                                                                                A group of intergalactic criminals are forced to work together to stop a fanatical warrior from taking control of the universe.</span>
<span class="co">#&gt; 2                                                                                                Following clues to the origin of mankind, a team finds a structure on a distant moon, but they soon realize they are not alone.</span>
<span class="co">#&gt; 3                                                                  Three girls are kidnapped by a man with a diagnosed 23 distinct personalities. They must try to escape before the apparent emergence of a frightful new 24th.</span>
<span class="co">#&gt; 4 In a city of humanoid animals, a hustling theater impresario's attempt to save his theater with a singing competition becomes grander than he anticipates even as its finalists' find that their lives will never be the same.</span>
<span class="co">#&gt; 5                                            A secret government agency recruits some of the most dangerous incarcerated super-villains to form a defensive task force. Their first mission: save the world from the apocalypse.</span>
<span class="co">#&gt; 6                                                                             European mercenaries searching for black powder become embroiled in the defense of the Great Wall of China against a horde of monstrous creatures.</span>
<span class="co">#&gt;               Director</span>
<span class="co">#&gt; 1           James Gunn</span>
<span class="co">#&gt; 2         Ridley Scott</span>
<span class="co">#&gt; 3   M. Night Shyamalan</span>
<span class="co">#&gt; 4 Christophe Lourdelet</span>
<span class="co">#&gt; 5           David Ayer</span>
<span class="co">#&gt; 6          Yimou Zhang</span>
<span class="co">#&gt;                                                                       Actors</span>
<span class="co">#&gt; 1                       Chris Pratt, Vin Diesel, Bradley Cooper, Zoe Saldana</span>
<span class="co">#&gt; 2    Noomi Rapace, Logan Marshall-Green, Michael Fassbender, Charlize Theron</span>
<span class="co">#&gt; 3           James McAvoy, Anya Taylor-Joy, Haley Lu Richardson, Jessica Sula</span>
<span class="co">#&gt; 4 Matthew McConaughey,Reese Witherspoon, Seth MacFarlane, Scarlett Johansson</span>
<span class="co">#&gt; 5                         Will Smith, Jared Leto, Margot Robbie, Viola Davis</span>
<span class="co">#&gt; 6                              Matt Damon, Tian Jing, Willem Dafoe, Andy Lau</span>
<span class="co">#&gt;   Year Runtime..Minutes. Rating  Votes RevenueMillions</span>
<span class="co">#&gt; 1 2014               121    8.1 757074          333.13</span>
<span class="co">#&gt; 2 2012               124    7.0 485820          126.46</span>
<span class="co">#&gt; 3 2016               117    7.3 157606          138.12</span>
<span class="co">#&gt; 4 2016               108    7.2  60545          270.32</span>
<span class="co">#&gt; 5 2016               123    6.2 393727          325.02</span>
<span class="co">#&gt; 6 2016               103    6.1  56036           45.13</span>
<span class="co">#&gt;   Metascore</span>
<span class="co">#&gt; 1        76</span>
<span class="co">#&gt; 2        65</span>
<span class="co">#&gt; 3        62</span>
<span class="co">#&gt; 4        59</span>
<span class="co">#&gt; 5        40</span>
<span class="co">#&gt; 6        42</span></code></pre></div>
</div>
<div id="replacing-na-values-by-a-constant" class="section level3" number="5.12.3">
<h3>
<span class="header-section-number">5.12.3</span> Replacing NA values by a constant<a class="anchor" aria-label="anchor" href="#replacing-na-values-by-a-constant"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na()</a></code> replaces NA values with a constant value. It requires a named list of column names and values to replace NA values with. Pass in empty strings for the columns not to be affected.</p>
<div class="sourceCode" id="cb199"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># creating a named list of column values</span>
<span class="va">lst</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">''</span>,<span class="st">''</span>, <span class="fl">200</span>, <span class="fl">50</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">lst</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">movies</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>
<span class="va">lst</span>
<span class="co">#&gt; $Rank</span>
<span class="co">#&gt; [1] ""</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Title</span>
<span class="co">#&gt; [1] ""</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Genre</span>
<span class="co">#&gt; [1] 200</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $&lt;NA&gt;</span>
<span class="co">#&gt; [1] 50</span>

<span class="co"># replacing NA values with the named list</span>
<span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">movies</span>, <span class="va">lst</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;    Rank                   Title                      Genre</span>
<span class="co">#&gt; 1     1 Guardians of the Galaxy    Action,Adventure,Sci-Fi</span>
<span class="co">#&gt; 2     2              Prometheus   Adventure,Mystery,Sci-Fi</span>
<span class="co">#&gt; 3     3                   Split            Horror,Thriller</span>
<span class="co">#&gt; 4     4                    Sing    Animation,Comedy,Family</span>
<span class="co">#&gt; 5     5           Suicide Squad   Action,Adventure,Fantasy</span>
<span class="co">#&gt; 6     6          The Great Wall   Action,Adventure,Fantasy</span>
<span class="co">#&gt; 7     7              La La Land         Comedy,Drama,Music</span>
<span class="co">#&gt; 8     8                Mindhorn                     Comedy</span>
<span class="co">#&gt; 9     9      The Lost City of Z Action,Adventure,Biography</span>
<span class="co">#&gt; 10   10              Passengers    Adventure,Drama,Romance</span>
<span class="co">#&gt;                                                                                                                                                                                                                                        Description</span>
<span class="co">#&gt; 1                                                                                                                  A group of intergalactic criminals are forced to work together to stop a fanatical warrior from taking control of the universe.</span>
<span class="co">#&gt; 2                                                                                                                  Following clues to the origin of mankind, a team finds a structure on a distant moon, but they soon realize they are not alone.</span>
<span class="co">#&gt; 3                                                                                    Three girls are kidnapped by a man with a diagnosed 23 distinct personalities. They must try to escape before the apparent emergence of a frightful new 24th.</span>
<span class="co">#&gt; 4                   In a city of humanoid animals, a hustling theater impresario's attempt to save his theater with a singing competition becomes grander than he anticipates even as its finalists' find that their lives will never be the same.</span>
<span class="co">#&gt; 5                                                              A secret government agency recruits some of the most dangerous incarcerated super-villains to form a defensive task force. Their first mission: save the world from the apocalypse.</span>
<span class="co">#&gt; 6                                                                                               European mercenaries searching for black powder become embroiled in the defense of the Great Wall of China against a horde of monstrous creatures.</span>
<span class="co">#&gt; 7                                                                                                                                                                                     A jazz pianist falls for an aspiring actress in Los Angeles.</span>
<span class="co">#&gt; 8  A has-been actor best known for playing the title character in the 1980s detective series "Mindhorn" must work with the police when a serial killer says that he will only speak with Detective Mindhorn, whom he believes to be a real person.</span>
<span class="co">#&gt; 9                                                                                        A true-life drama, centering on British explorer Col. Percival Fawcett, who disappeared while searching for a mysterious city in the Amazon in the 1920s.</span>
<span class="co">#&gt; 10                                                        A spacecraft traveling to a distant colony planet and transporting thousands of people has a malfunction in its sleep chambers. As a result, two passengers are awakened 90 years early.</span>
<span class="co">#&gt;                Director</span>
<span class="co">#&gt; 1            James Gunn</span>
<span class="co">#&gt; 2          Ridley Scott</span>
<span class="co">#&gt; 3    M. Night Shyamalan</span>
<span class="co">#&gt; 4  Christophe Lourdelet</span>
<span class="co">#&gt; 5            David Ayer</span>
<span class="co">#&gt; 6           Yimou Zhang</span>
<span class="co">#&gt; 7       Damien Chazelle</span>
<span class="co">#&gt; 8            Sean Foley</span>
<span class="co">#&gt; 9            James Gray</span>
<span class="co">#&gt; 10        Morten Tyldum</span>
<span class="co">#&gt;                                                                        Actors</span>
<span class="co">#&gt; 1                        Chris Pratt, Vin Diesel, Bradley Cooper, Zoe Saldana</span>
<span class="co">#&gt; 2     Noomi Rapace, Logan Marshall-Green, Michael Fassbender, Charlize Theron</span>
<span class="co">#&gt; 3            James McAvoy, Anya Taylor-Joy, Haley Lu Richardson, Jessica Sula</span>
<span class="co">#&gt; 4  Matthew McConaughey,Reese Witherspoon, Seth MacFarlane, Scarlett Johansson</span>
<span class="co">#&gt; 5                          Will Smith, Jared Leto, Margot Robbie, Viola Davis</span>
<span class="co">#&gt; 6                               Matt Damon, Tian Jing, Willem Dafoe, Andy Lau</span>
<span class="co">#&gt; 7                    Ryan Gosling, Emma Stone, Rosemarie DeWitt, J.K. Simmons</span>
<span class="co">#&gt; 8             Essie Davis, Andrea Riseborough, Julian Barratt,Kenneth Branagh</span>
<span class="co">#&gt; 9                Charlie Hunnam, Robert Pattinson, Sienna Miller, Tom Holland</span>
<span class="co">#&gt; 10           Jennifer Lawrence, Chris Pratt, Michael Sheen,Laurence Fishburne</span>
<span class="co">#&gt;    Year Runtime..Minutes. Rating  Votes RevenueMillions</span>
<span class="co">#&gt; 1  2014               121    8.1 757074          333.13</span>
<span class="co">#&gt; 2  2012               124    7.0 485820          126.46</span>
<span class="co">#&gt; 3  2016               117    7.3 157606          138.12</span>
<span class="co">#&gt; 4  2016               108    7.2  60545          270.32</span>
<span class="co">#&gt; 5  2016               123    6.2 393727          325.02</span>
<span class="co">#&gt; 6  2016               103    6.1  56036           45.13</span>
<span class="co">#&gt; 7  2016               128    8.3 258682          151.06</span>
<span class="co">#&gt; 8  2016                89    6.4   2490              NA</span>
<span class="co">#&gt; 9  2016               141    7.1   7188            8.01</span>
<span class="co">#&gt; 10 2016               116    7.0 192177          100.01</span>
<span class="co">#&gt;    Metascore</span>
<span class="co">#&gt; 1         76</span>
<span class="co">#&gt; 2         65</span>
<span class="co">#&gt; 3         62</span>
<span class="co">#&gt; 4         59</span>
<span class="co">#&gt; 5         40</span>
<span class="co">#&gt; 6         42</span>
<span class="co">#&gt; 7         93</span>
<span class="co">#&gt; 8         71</span>
<span class="co">#&gt; 9         78</span>
<span class="co">#&gt; 10        41</span>

<span class="co"># creating named list of computed values</span>
<span class="va">lst</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">''</span>,
            <span class="st">''</span>, 
            <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">movies</span><span class="op">$</span><span class="va">RevenueMillions</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>, 
            <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">movies</span><span class="op">$</span><span class="va">Metascore</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">lst</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">movies</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>
<span class="va">lst</span>
<span class="co">#&gt; $Rank</span>
<span class="co">#&gt; [1] ""</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Title</span>
<span class="co">#&gt; [1] ""</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Genre</span>
<span class="co">#&gt; [1] 47.98</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Description</span>
<span class="co">#&gt; [1] 59</span>

<span class="co"># replacing NA values</span>
<span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">movies</span>, <span class="va">lst</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;    Rank                   Title                      Genre</span>
<span class="co">#&gt; 1     1 Guardians of the Galaxy    Action,Adventure,Sci-Fi</span>
<span class="co">#&gt; 2     2              Prometheus   Adventure,Mystery,Sci-Fi</span>
<span class="co">#&gt; 3     3                   Split            Horror,Thriller</span>
<span class="co">#&gt; 4     4                    Sing    Animation,Comedy,Family</span>
<span class="co">#&gt; 5     5           Suicide Squad   Action,Adventure,Fantasy</span>
<span class="co">#&gt; 6     6          The Great Wall   Action,Adventure,Fantasy</span>
<span class="co">#&gt; 7     7              La La Land         Comedy,Drama,Music</span>
<span class="co">#&gt; 8     8                Mindhorn                     Comedy</span>
<span class="co">#&gt; 9     9      The Lost City of Z Action,Adventure,Biography</span>
<span class="co">#&gt; 10   10              Passengers    Adventure,Drama,Romance</span>
<span class="co">#&gt;                                                                                                                                                                                                                                        Description</span>
<span class="co">#&gt; 1                                                                                                                  A group of intergalactic criminals are forced to work together to stop a fanatical warrior from taking control of the universe.</span>
<span class="co">#&gt; 2                                                                                                                  Following clues to the origin of mankind, a team finds a structure on a distant moon, but they soon realize they are not alone.</span>
<span class="co">#&gt; 3                                                                                    Three girls are kidnapped by a man with a diagnosed 23 distinct personalities. They must try to escape before the apparent emergence of a frightful new 24th.</span>
<span class="co">#&gt; 4                   In a city of humanoid animals, a hustling theater impresario's attempt to save his theater with a singing competition becomes grander than he anticipates even as its finalists' find that their lives will never be the same.</span>
<span class="co">#&gt; 5                                                              A secret government agency recruits some of the most dangerous incarcerated super-villains to form a defensive task force. Their first mission: save the world from the apocalypse.</span>
<span class="co">#&gt; 6                                                                                               European mercenaries searching for black powder become embroiled in the defense of the Great Wall of China against a horde of monstrous creatures.</span>
<span class="co">#&gt; 7                                                                                                                                                                                     A jazz pianist falls for an aspiring actress in Los Angeles.</span>
<span class="co">#&gt; 8  A has-been actor best known for playing the title character in the 1980s detective series "Mindhorn" must work with the police when a serial killer says that he will only speak with Detective Mindhorn, whom he believes to be a real person.</span>
<span class="co">#&gt; 9                                                                                        A true-life drama, centering on British explorer Col. Percival Fawcett, who disappeared while searching for a mysterious city in the Amazon in the 1920s.</span>
<span class="co">#&gt; 10                                                        A spacecraft traveling to a distant colony planet and transporting thousands of people has a malfunction in its sleep chambers. As a result, two passengers are awakened 90 years early.</span>
<span class="co">#&gt;                Director</span>
<span class="co">#&gt; 1            James Gunn</span>
<span class="co">#&gt; 2          Ridley Scott</span>
<span class="co">#&gt; 3    M. Night Shyamalan</span>
<span class="co">#&gt; 4  Christophe Lourdelet</span>
<span class="co">#&gt; 5            David Ayer</span>
<span class="co">#&gt; 6           Yimou Zhang</span>
<span class="co">#&gt; 7       Damien Chazelle</span>
<span class="co">#&gt; 8            Sean Foley</span>
<span class="co">#&gt; 9            James Gray</span>
<span class="co">#&gt; 10        Morten Tyldum</span>
<span class="co">#&gt;                                                                        Actors</span>
<span class="co">#&gt; 1                        Chris Pratt, Vin Diesel, Bradley Cooper, Zoe Saldana</span>
<span class="co">#&gt; 2     Noomi Rapace, Logan Marshall-Green, Michael Fassbender, Charlize Theron</span>
<span class="co">#&gt; 3            James McAvoy, Anya Taylor-Joy, Haley Lu Richardson, Jessica Sula</span>
<span class="co">#&gt; 4  Matthew McConaughey,Reese Witherspoon, Seth MacFarlane, Scarlett Johansson</span>
<span class="co">#&gt; 5                          Will Smith, Jared Leto, Margot Robbie, Viola Davis</span>
<span class="co">#&gt; 6                               Matt Damon, Tian Jing, Willem Dafoe, Andy Lau</span>
<span class="co">#&gt; 7                    Ryan Gosling, Emma Stone, Rosemarie DeWitt, J.K. Simmons</span>
<span class="co">#&gt; 8             Essie Davis, Andrea Riseborough, Julian Barratt,Kenneth Branagh</span>
<span class="co">#&gt; 9                Charlie Hunnam, Robert Pattinson, Sienna Miller, Tom Holland</span>
<span class="co">#&gt; 10           Jennifer Lawrence, Chris Pratt, Michael Sheen,Laurence Fishburne</span>
<span class="co">#&gt;    Year Runtime..Minutes. Rating  Votes RevenueMillions</span>
<span class="co">#&gt; 1  2014               121    8.1 757074          333.13</span>
<span class="co">#&gt; 2  2012               124    7.0 485820          126.46</span>
<span class="co">#&gt; 3  2016               117    7.3 157606          138.12</span>
<span class="co">#&gt; 4  2016               108    7.2  60545          270.32</span>
<span class="co">#&gt; 5  2016               123    6.2 393727          325.02</span>
<span class="co">#&gt; 6  2016               103    6.1  56036           45.13</span>
<span class="co">#&gt; 7  2016               128    8.3 258682          151.06</span>
<span class="co">#&gt; 8  2016                89    6.4   2490              NA</span>
<span class="co">#&gt; 9  2016               141    7.1   7188            8.01</span>
<span class="co">#&gt; 10 2016               116    7.0 192177          100.01</span>
<span class="co">#&gt;    Metascore</span>
<span class="co">#&gt; 1         76</span>
<span class="co">#&gt; 2         65</span>
<span class="co">#&gt; 3         62</span>
<span class="co">#&gt; 4         59</span>
<span class="co">#&gt; 5         40</span>
<span class="co">#&gt; 6         42</span>
<span class="co">#&gt; 7         93</span>
<span class="co">#&gt; 8         71</span>
<span class="co">#&gt; 9         78</span>
<span class="co">#&gt; 10        41</span></code></pre></div>
</div>
<div id="replacing-na-values-by-groups" class="section level3" number="5.12.4">
<h3>
<span class="header-section-number">5.12.4</span> Replacing NA values by groups<a class="anchor" aria-label="anchor" href="#replacing-na-values-by-groups"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb200"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># splitting data frame</span>
<span class="va">movies_split</span> <span class="op">&lt;-</span> <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/split.html">split</a></span><span class="op">(</span><span class="va">movies</span>, <span class="va">movies</span><span class="op">$</span><span class="va">Year</span><span class="op">)</span>

<span class="co"># replacing NA values</span>
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">movies_split</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">lst</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">''</span>,
                <span class="st">''</span>, 
                <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="va">x</span><span class="op">$</span><span class="va">RevenueMillions</span>, <span class="st">'RevenueMillions'</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,<span class="fl">2</span><span class="op">)</span>, 
                <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="va">x</span><span class="op">$</span><span class="va">Metascore</span>, <span class="st">'Metascore'</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">lst</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">movies</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>
    <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">lst</span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;      Rank                          Title</span>
<span class="co">#&gt; 991   948                     King Cobra</span>
<span class="co">#&gt; 992   950                          Kicks</span>
<span class="co">#&gt; 993   965                        Custody</span>
<span class="co">#&gt; 994   967                      L'odyssée</span>
<span class="co">#&gt; 995   975                 Queen of Katwe</span>
<span class="co">#&gt; 996   976     My Big Fat Greek Wedding 2</span>
<span class="co">#&gt; 997   978                  Amateur Night</span>
<span class="co">#&gt; 998   979 It's Only the End of the World</span>
<span class="co">#&gt; 999   981           Miracles from Heaven</span>
<span class="co">#&gt; 1000 1000                     Nine Lives</span>
<span class="co">#&gt;                       Genre</span>
<span class="co">#&gt; 991             Crime,Drama</span>
<span class="co">#&gt; 992               Adventure</span>
<span class="co">#&gt; 993                   Drama</span>
<span class="co">#&gt; 994     Adventure,Biography</span>
<span class="co">#&gt; 995   Biography,Drama,Sport</span>
<span class="co">#&gt; 996   Comedy,Family,Romance</span>
<span class="co">#&gt; 997                  Comedy</span>
<span class="co">#&gt; 998                   Drama</span>
<span class="co">#&gt; 999  Biography,Drama,Family</span>
<span class="co">#&gt; 1000  Comedy,Family,Fantasy</span>
<span class="co">#&gt;                                                                                                                                                                                                                                        Description</span>
<span class="co">#&gt; 991                            This ripped-from-the-headlines drama covers the early rise of gay porn headliner Sean Paul Lockhart a.k.a. Brent Corrigan, before his falling out with the producer who made him famous. When... See full summary »</span>
<span class="co">#&gt; 992  Brandon is a 15 year old whose dream is a pair of fresh Air Jordans. Soon after he gets his hands on them, they're stolen by a local hood, causing Brandon and his two friends to go on a dangerous mission through Oakland to retrieve them.</span>
<span class="co">#&gt; 993                                                                                                                                            The lives of three women are unexpectedly changed when they cross paths at a New York Family Court.</span>
<span class="co">#&gt; 994                 Highly influential and a fearlessly ambitious pioneer, innovator, filmmaker, researcher and conservationist, Jacques-Yves Cousteau's aquatic adventure covers roughly thirty years of an inarguably rich in achievements life.</span>
<span class="co">#&gt; 995                                                                                                                                                      A Ugandan girl sees her world rapidly change after being introduced to the game of chess.</span>
<span class="co">#&gt; 996                                                                                                                                 A Portokalos family secret brings the beloved characters back together for an even bigger and Greeker wedding.</span>
<span class="co">#&gt; 997                               Guy Carter is an award-winning graduate student of architecture. He's got a beautiful wife and a baby on the way. The problem? He doesn't have "his ducks in a row," which only fuels his ... See full summary »</span>
<span class="co">#&gt; 998                                                                                                                        Louis (Gaspard Ulliel), a terminally ill writer, returns home after a long absence to tell his family that he is dying.</span>
<span class="co">#&gt; 999                                                                                                                    A young girl suffering from a rare digestive disorder finds herself miraculously cured after surviving a terrible accident.</span>
<span class="co">#&gt; 1000                                                                                                                                                               A stuffy businessman finds himself trapped inside the body of his family's cat.</span>
<span class="co">#&gt;              Director</span>
<span class="co">#&gt; 991      Justin Kelly</span>
<span class="co">#&gt; 992    Justin Tipping</span>
<span class="co">#&gt; 993      James Lapine</span>
<span class="co">#&gt; 994      Jérôme Salle</span>
<span class="co">#&gt; 995         Mira Nair</span>
<span class="co">#&gt; 996        Kirk Jones</span>
<span class="co">#&gt; 997      Lisa Addario</span>
<span class="co">#&gt; 998      Xavier Dolan</span>
<span class="co">#&gt; 999   Patricia Riggen</span>
<span class="co">#&gt; 1000 Barry Sonnenfeld</span>
<span class="co">#&gt;                                                                            Actors</span>
<span class="co">#&gt; 991                Garrett Clayton, Christian Slater, Molly Ringwald,James Kelley</span>
<span class="co">#&gt; 992  Jahking Guillory, Christopher Jordan Wallace,Christopher Meyer, Kofi Siriboe</span>
<span class="co">#&gt; 993        Viola Davis, Hayden Panettiere, Catalina Sandino Moreno, Ellen Burstyn</span>
<span class="co">#&gt; 994                     Lambert Wilson, Pierre Niney, Audrey Tautou,Laurent Lucas</span>
<span class="co">#&gt; 995                Madina Nalwanga, David Oyelowo, Lupita Nyong'o, Martin Kabanza</span>
<span class="co">#&gt; 996                 Nia Vardalos, John Corbett, Michael Constantine, Lainie Kazan</span>
<span class="co">#&gt; 997                  Jason Biggs, Janet Montgomery,Ashley Tisdale, Bria L. Murphy</span>
<span class="co">#&gt; 998                  Nathalie Baye, Vincent Cassel, Marion Cotillard, Léa Seydoux</span>
<span class="co">#&gt; 999             Jennifer Garner, Kylie Rogers, Martin Henderson,Brighton Sharbino</span>
<span class="co">#&gt; 1000                     Kevin Spacey, Jennifer Garner, Robbie Amell,Cheryl Hines</span>
<span class="co">#&gt;      Year Runtime..Minutes. Rating Votes RevenueMillions</span>
<span class="co">#&gt; 991  2016                91    5.6  3990            0.03</span>
<span class="co">#&gt; 992  2016                80    6.1  2417            0.15</span>
<span class="co">#&gt; 993  2016               104    6.9   280              NA</span>
<span class="co">#&gt; 994  2016               122    6.7  1810              NA</span>
<span class="co">#&gt; 995  2016               124    7.4  6753            8.81</span>
<span class="co">#&gt; 996  2016                94    6.0 20966           59.57</span>
<span class="co">#&gt; 997  2016                92    5.0  2229              NA</span>
<span class="co">#&gt; 998  2016                97    7.0 10658              NA</span>
<span class="co">#&gt; 999  2016               109    7.0 12048           61.69</span>
<span class="co">#&gt; 1000 2016                87    5.3 12435           19.64</span>
<span class="co">#&gt;      Metascore</span>
<span class="co">#&gt; 991         48</span>
<span class="co">#&gt; 992         69</span>
<span class="co">#&gt; 993         72</span>
<span class="co">#&gt; 994         70</span>
<span class="co">#&gt; 995         73</span>
<span class="co">#&gt; 996         37</span>
<span class="co">#&gt; 997         38</span>
<span class="co">#&gt; 998         48</span>
<span class="co">#&gt; 999         44</span>
<span class="co">#&gt; 1000        11</span></code></pre></div>
</div>
<div id="dropping-na-values" class="section level3" number="5.12.5">
<h3>
<span class="header-section-number">5.12.5</span> Dropping NA values<a class="anchor" aria-label="anchor" href="#dropping-na-values"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na()</a></code> drops all rows containing NA values.</p>
<div class="sourceCode" id="cb201"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">movies</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;    Rank                                   Title</span>
<span class="co">#&gt; 1     1                 Guardians of the Galaxy</span>
<span class="co">#&gt; 2     2                              Prometheus</span>
<span class="co">#&gt; 3     3                                   Split</span>
<span class="co">#&gt; 4     4                                    Sing</span>
<span class="co">#&gt; 5     5                           Suicide Squad</span>
<span class="co">#&gt; 6     6                          The Great Wall</span>
<span class="co">#&gt; 7     7                              La La Land</span>
<span class="co">#&gt; 8     9                      The Lost City of Z</span>
<span class="co">#&gt; 9    10                              Passengers</span>
<span class="co">#&gt; 10   11 Fantastic Beasts and Where to Find Them</span>
<span class="co">#&gt;                         Genre</span>
<span class="co">#&gt; 1     Action,Adventure,Sci-Fi</span>
<span class="co">#&gt; 2    Adventure,Mystery,Sci-Fi</span>
<span class="co">#&gt; 3             Horror,Thriller</span>
<span class="co">#&gt; 4     Animation,Comedy,Family</span>
<span class="co">#&gt; 5    Action,Adventure,Fantasy</span>
<span class="co">#&gt; 6    Action,Adventure,Fantasy</span>
<span class="co">#&gt; 7          Comedy,Drama,Music</span>
<span class="co">#&gt; 8  Action,Adventure,Biography</span>
<span class="co">#&gt; 9     Adventure,Drama,Romance</span>
<span class="co">#&gt; 10   Adventure,Family,Fantasy</span>
<span class="co">#&gt;                                                                                                                                                                                                                       Description</span>
<span class="co">#&gt; 1                                                                                                 A group of intergalactic criminals are forced to work together to stop a fanatical warrior from taking control of the universe.</span>
<span class="co">#&gt; 2                                                                                                 Following clues to the origin of mankind, a team finds a structure on a distant moon, but they soon realize they are not alone.</span>
<span class="co">#&gt; 3                                                                   Three girls are kidnapped by a man with a diagnosed 23 distinct personalities. They must try to escape before the apparent emergence of a frightful new 24th.</span>
<span class="co">#&gt; 4  In a city of humanoid animals, a hustling theater impresario's attempt to save his theater with a singing competition becomes grander than he anticipates even as its finalists' find that their lives will never be the same.</span>
<span class="co">#&gt; 5                                             A secret government agency recruits some of the most dangerous incarcerated super-villains to form a defensive task force. Their first mission: save the world from the apocalypse.</span>
<span class="co">#&gt; 6                                                                              European mercenaries searching for black powder become embroiled in the defense of the Great Wall of China against a horde of monstrous creatures.</span>
<span class="co">#&gt; 7                                                                                                                                                                    A jazz pianist falls for an aspiring actress in Los Angeles.</span>
<span class="co">#&gt; 8                                                                       A true-life drama, centering on British explorer Col. Percival Fawcett, who disappeared while searching for a mysterious city in the Amazon in the 1920s.</span>
<span class="co">#&gt; 9                                        A spacecraft traveling to a distant colony planet and transporting thousands of people has a malfunction in its sleep chambers. As a result, two passengers are awakened 90 years early.</span>
<span class="co">#&gt; 10                                                                      The adventures of writer Newt Scamander in New York's secret community of witches and wizards seventy years before Harry Potter reads his book in school.</span>
<span class="co">#&gt;                Director</span>
<span class="co">#&gt; 1            James Gunn</span>
<span class="co">#&gt; 2          Ridley Scott</span>
<span class="co">#&gt; 3    M. Night Shyamalan</span>
<span class="co">#&gt; 4  Christophe Lourdelet</span>
<span class="co">#&gt; 5            David Ayer</span>
<span class="co">#&gt; 6           Yimou Zhang</span>
<span class="co">#&gt; 7       Damien Chazelle</span>
<span class="co">#&gt; 8            James Gray</span>
<span class="co">#&gt; 9         Morten Tyldum</span>
<span class="co">#&gt; 10          David Yates</span>
<span class="co">#&gt;                                                                        Actors</span>
<span class="co">#&gt; 1                        Chris Pratt, Vin Diesel, Bradley Cooper, Zoe Saldana</span>
<span class="co">#&gt; 2     Noomi Rapace, Logan Marshall-Green, Michael Fassbender, Charlize Theron</span>
<span class="co">#&gt; 3            James McAvoy, Anya Taylor-Joy, Haley Lu Richardson, Jessica Sula</span>
<span class="co">#&gt; 4  Matthew McConaughey,Reese Witherspoon, Seth MacFarlane, Scarlett Johansson</span>
<span class="co">#&gt; 5                          Will Smith, Jared Leto, Margot Robbie, Viola Davis</span>
<span class="co">#&gt; 6                               Matt Damon, Tian Jing, Willem Dafoe, Andy Lau</span>
<span class="co">#&gt; 7                    Ryan Gosling, Emma Stone, Rosemarie DeWitt, J.K. Simmons</span>
<span class="co">#&gt; 8                Charlie Hunnam, Robert Pattinson, Sienna Miller, Tom Holland</span>
<span class="co">#&gt; 9            Jennifer Lawrence, Chris Pratt, Michael Sheen,Laurence Fishburne</span>
<span class="co">#&gt; 10               Eddie Redmayne, Katherine Waterston, Alison Sudol,Dan Fogler</span>
<span class="co">#&gt;    Year Runtime..Minutes. Rating  Votes RevenueMillions</span>
<span class="co">#&gt; 1  2014               121    8.1 757074          333.13</span>
<span class="co">#&gt; 2  2012               124    7.0 485820          126.46</span>
<span class="co">#&gt; 3  2016               117    7.3 157606          138.12</span>
<span class="co">#&gt; 4  2016               108    7.2  60545          270.32</span>
<span class="co">#&gt; 5  2016               123    6.2 393727          325.02</span>
<span class="co">#&gt; 6  2016               103    6.1  56036           45.13</span>
<span class="co">#&gt; 7  2016               128    8.3 258682          151.06</span>
<span class="co">#&gt; 8  2016               141    7.1   7188            8.01</span>
<span class="co">#&gt; 9  2016               116    7.0 192177          100.01</span>
<span class="co">#&gt; 10 2016               133    7.5 232072          234.02</span>
<span class="co">#&gt;    Metascore</span>
<span class="co">#&gt; 1         76</span>
<span class="co">#&gt; 2         65</span>
<span class="co">#&gt; 3         62</span>
<span class="co">#&gt; 4         59</span>
<span class="co">#&gt; 5         40</span>
<span class="co">#&gt; 6         42</span>
<span class="co">#&gt; 7         93</span>
<span class="co">#&gt; 8         78</span>
<span class="co">#&gt; 9         41</span>
<span class="co">#&gt; 10        66</span>

<span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">movies</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 838</span></code></pre></div>
</div>
</div>
<div id="outliers" class="section level2" number="5.13">
<h2>
<span class="header-section-number">5.13</span> Outliers<a class="anchor" aria-label="anchor" href="#outliers"><i class="fas fa-link"></i></a>
</h2>
<div id="what-is-an-outlier-1" class="section level3" number="5.13.1">
<h3>
<span class="header-section-number">5.13.1</span> What is an outlier?<a class="anchor" aria-label="anchor" href="#what-is-an-outlier-1"><i class="fas fa-link"></i></a>
</h3>
<p>Outliers also known as anomalies are values that deviate extremely from other values within the same group of data. They occur because of errors committed while collecting or recording data, performing calculations or are just data points with extreme values.</p>
</div>
<div id="identifying-outlier-1" class="section level3" number="5.13.2">
<h3>
<span class="header-section-number">5.13.2</span> Identifying outlier<a class="anchor" aria-label="anchor" href="#identifying-outlier-1"><i class="fas fa-link"></i></a>
</h3>
<div id="using-summary-statistics-1" class="section level4" number="5.13.2.1">
<h4>
<span class="header-section-number">5.13.2.1</span> Using summary statistics<a class="anchor" aria-label="anchor" href="#using-summary-statistics-1"><i class="fas fa-link"></i></a>
</h4>
<p>The first step in outlier detection is to look at summary statistics, most especially the minimum, maximum, median, and mean. For example, with a dataset of people’s ages, if the maximum is 200 or the minimum is negative, then there is a problem.</p>
<div class="sourceCode" id="cb202"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>
<span class="va">gapminder_2007</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="va">year</span> <span class="op">==</span> <span class="st">'2007'</span>, select <span class="op">=</span> <span class="op">-</span><span class="va">year</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 5</span>
<span class="co">#&gt;   country     continent lifeExp      pop gdpPercap</span>
<span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;       &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Afghanistan Asia         43.8 31889923      975.</span>
<span class="co">#&gt; 2 Albania     Europe       76.4  3600523     5937.</span>
<span class="co">#&gt; 3 Algeria     Africa       72.3 33333216     6223.</span>
<span class="co">#&gt; 4 Angola      Africa       42.7 12420476     4797.</span>
<span class="co">#&gt; 5 Argentina   Americas     75.3 40301927    12779.</span>
<span class="co">#&gt; 6 Australia   Oceania      81.2 20434176    34435.</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">pop</span><span class="op">/</span><span class="fl">1e6</span><span class="op">)</span>
<span class="co">#&gt;      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. </span>
<span class="co">#&gt;    0.1996    4.5080   10.5175   44.0212   31.2100 1318.6831</span></code></pre></div>
<p>From the above, we see that the median and mean are 10 million and 44 million respectively while the maximum value is 1.3 billion. This tells us that there are some outliers since the maximum value varies greatly from the centre of the data.</p>
</div>
</div>
<div id="using-plots-1" class="section level3" number="5.13.3">
<h3>
<span class="header-section-number">5.13.3</span> Using plots<a class="anchor" aria-label="anchor" href="#using-plots-1"><i class="fas fa-link"></i></a>
</h3>
<p>Outliers are identified using univariate plots such as histogram, density plot and boxplot.</p>
<div class="sourceCode" id="cb203"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># plotting variable using histogram</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">gdpPercap</span>, breaks <span class="op">=</span> <span class="fl">18</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-tidyverser_files/figure-html/unnamed-chunk-90-1.png" width="672"></div>
<div class="sourceCode" id="cb204"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="co"># density plot</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/density.html">density</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-tidyverser_files/figure-html/unnamed-chunk-90-2.png" width="672"></div>
<div class="sourceCode" id="cb205"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="co"># boxplot of population</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">gdpPercap</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-tidyverser_files/figure-html/unnamed-chunk-90-3.png" width="672"></div>
<p>Of the above data visualizations, the boxplot is the most relevant as it shows both the spread of data and outliers. The boxplot reveals the following:</p>
<ul>
<li>minimum value,</li>
<li>first quantile (Q1),</li>
<li>median (second quantile),</li>
<li>third quantile (Q3),</li>
<li>maximum value excluding outliers and</li>
<li>outliers.</li>
</ul>
<p>The difference between Q3 and Q1 is known as the Interquartile Range (IQR).</p>
<p>The outliers within the box plot are calculated as any value that falls beyond 1.5 * IQR.</p>
<p>The function <code><a href="https://rdrr.io/r/grDevices/boxplot.stats.html">boxplot.stats()</a></code> computes the data that is used to draw the box plot. Using this function, we can get our outliers.</p>
<div class="sourceCode" id="cb206"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/grDevices/boxplot.stats.html">boxplot.stats</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">gdpPercap</span><span class="op">)</span>
<span class="co">#&gt; $stats</span>
<span class="co">#&gt; [1]   277.5519  1598.4351  6124.3711 18008.9444 40675.9964</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $n</span>
<span class="co">#&gt; [1] 142</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $conf</span>
<span class="co">#&gt; [1] 3948.491 8300.251</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $out</span>
<span class="co">#&gt; [1] 47306.99 49357.19 47143.18 42951.65</span></code></pre></div>
<p>The first element returned is the summary statistic as was calculated with <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>.</p>
<div class="sourceCode" id="cb207"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/grDevices/boxplot.stats.html">boxplot.stats</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">$</span><span class="va">stats</span>
<span class="co">#&gt; [1]   277.5519  1598.4351  6124.3711 18008.9444 40675.9964</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">gdpPercap</span><span class="op">)</span>
<span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="co">#&gt;   277.6  1624.8  6124.4 11680.1 18008.8 49357.2</span></code></pre></div>
<p>The last element returned are the outliers.</p>
<div class="sourceCode" id="cb208"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/grDevices/boxplot.stats.html">boxplot.stats</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">$</span><span class="va">out</span>
<span class="co">#&gt; [1] 47306.99 49357.19 47143.18 42951.65</span></code></pre></div>
<p>Recall outliers are calculated as 1.5 * IQR, this can be changed using the argument coef. By default, it is set to 1.5 but can be changed as need be.</p>
<div class="sourceCode" id="cb209"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># changing coef</span>
<span class="fu"><a href="https://rdrr.io/r/grDevices/boxplot.stats.html">boxplot.stats</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">gdpPercap</span>, coef <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span><span class="op">$</span><span class="va">out</span>
<span class="co">#&gt;  [1] 34435.37 36126.49 33692.61 36319.24 35278.42 33207.08</span>
<span class="co">#&gt;  [7] 32170.37 39724.98 36180.79 40676.00 31656.07 47306.99</span>
<span class="co">#&gt; [13] 36797.93 49357.19 47143.18 33859.75 37506.42 33203.26</span>
<span class="co">#&gt; [19] 42951.65</span>
<span class="fu"><a href="https://rdrr.io/r/grDevices/boxplot.stats.html">boxplot.stats</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">gdpPercap</span>, coef <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">$</span><span class="va">out</span>
<span class="co">#&gt;  [1] 34435.37 36126.49 36319.24 35278.42 39724.98 36180.79</span>
<span class="co">#&gt;  [7] 40676.00 47306.99 36797.93 49357.19 47143.18 37506.42</span>
<span class="co">#&gt; [13] 42951.65</span>
<span class="fu"><a href="https://rdrr.io/r/grDevices/boxplot.stats.html">boxplot.stats</a></span><span class="op">(</span><span class="va">gapminder_2007</span><span class="op">$</span><span class="va">gdpPercap</span>, coef <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span><span class="op">$</span><span class="va">out</span>
<span class="co">#&gt; [1] 39724.98 40676.00 47306.99 49357.19 47143.18 42951.65</span>

<span class="co"># selecting outliers</span>
<span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">gapminder_2007</span>, <span class="va">gdpPercap</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/grDevices/boxplot.stats.html">boxplot.stats</a></span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">$</span><span class="va">out</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 4 x 5</span>
<span class="co">#&gt;   country       continent lifeExp       pop gdpPercap</span>
<span class="co">#&gt;   &lt;fct&gt;         &lt;fct&gt;       &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Kuwait        Asia         77.6   2505559    47307.</span>
<span class="co">#&gt; 2 Norway        Europe       80.2   4627926    49357.</span>
<span class="co">#&gt; 3 Singapore     Asia         80.0   4553009    47143.</span>
<span class="co">#&gt; 4 United States Americas     78.2 301139947    42952.</span></code></pre></div>
</div>
<div id="outliers-by-groups" class="section level3" number="5.13.4">
<h3>
<span class="header-section-number">5.13.4</span> Outliers by groups<a class="anchor" aria-label="anchor" href="#outliers-by-groups"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb210"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># boxplot by continent</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="va">gdpPercap</span> <span class="op">~</span> <span class="va">continent</span>, <span class="va">gapminder_2007</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-tidyverser_files/figure-html/unnamed-chunk-95-1.png" width="672"></div>
<div class="sourceCode" id="cb211"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="co"># splitting data frame</span>
<span class="va">gap_split</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/split.html">split</a></span><span class="op">(</span><span class="va">gapminder_2007</span>, <span class="va">gapminder_2007</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>

<span class="va">outliers_2007</span> <span class="op">&lt;-</span> 
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">gap_split</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/boxplot.stats.html">boxplot.stats</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">$</span><span class="va">out</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="va">outliers_2007</span>
<span class="co">#&gt; $Africa</span>
<span class="co">#&gt; [1] 12569.852 12154.090 13206.485 12057.499 10956.991</span>
<span class="co">#&gt; [6]  9269.658</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Americas</span>
<span class="co">#&gt; [1] 36319.24 42951.65</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Asia</span>
<span class="co">#&gt; numeric(0)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Europe</span>
<span class="co">#&gt; numeric(0)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Oceania</span>
<span class="co">#&gt; numeric(0)</span></code></pre></div>
</div>
</div>
<div id="tr-string" class="section level2" number="5.14">
<h2>
<span class="header-section-number">5.14</span> String manipulation with stringr<a class="anchor" aria-label="anchor" href="#tr-string"><i class="fas fa-link"></i></a>
</h2>
<div id="determine-string-length" class="section level3" number="5.14.1">
<h3>
<span class="header-section-number">5.14.1</span> Determine string length<a class="anchor" aria-label="anchor" href="#determine-string-length"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length()</a></code> returns the count of letters in a string.</p>
<div class="sourceCode" id="cb212"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span>
<span class="va">month.name</span>
<span class="co">#&gt;  [1] "January"   "February"  "March"     "April"    </span>
<span class="co">#&gt;  [5] "May"       "June"      "July"      "August"   </span>
<span class="co">#&gt;  [9] "September" "October"   "November"  "December"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length</a></span><span class="op">(</span><span class="va">month.name</span><span class="op">)</span>
<span class="co">#&gt;  [1] 7 8 5 5 3 4 4 6 9 7 8 8</span></code></pre></div>
</div>
<div id="strings-formatting-case-conversion" class="section level3" number="5.14.2">
<h3>
<span class="header-section-number">5.14.2</span> Strings formatting (case conversion)<a class="anchor" aria-label="anchor" href="#strings-formatting-case-conversion"><i class="fas fa-link"></i></a>
</h3>
<p>The functions <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_upper()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_title()</a></code> and <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_sentence()</a></code> are used to convert to upper, lower, title and sentence cases respectively.</p>
<p>The function <code><a href="https://stringr.tidyverse.org/reference/str_pad.html">str_pad()</a></code> is used to pad characters before and/or after a string.
The function <code><a href="https://stringr.tidyverse.org/reference/str_trunc.html">str_trunc()</a></code> is used to truncate a string.</p>
<div class="sourceCode" id="cb213"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># lowercase</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower</a></span><span class="op">(</span><span class="st">'It is an everyday thing'</span>, locale <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span>
<span class="co">#&gt; [1] "it is an everyday thing"</span>

<span class="co"># uppercase</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_upper</a></span><span class="op">(</span><span class="st">'It is an everyday thing'</span>, locale <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span>
<span class="co">#&gt; [1] "IT IS AN EVERYDAY THING"</span>

<span class="co"># title case</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_title</a></span><span class="op">(</span><span class="st">'It is an everyday thing'</span>, locale <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span>
<span class="co">#&gt; [1] "It Is An Everyday Thing"</span>

<span class="co"># sentence case</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_sentence</a></span><span class="op">(</span><span class="st">'iT is aN everyDay thIng'</span>, locale <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span>
<span class="co">#&gt; [1] "It is an everyday thing"</span>

<span class="co"># padding string</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_pad.html">str_pad</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">235</span>, <span class="st">'abd'</span>, <span class="st">'ame'</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">5</span>, pad <span class="op">=</span> <span class="st">'0'</span><span class="op">)</span>
<span class="co">#&gt; [1] "00012" "00235" "00abd" "00ame"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_pad.html">str_pad</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">235</span>, <span class="st">'abd'</span>, <span class="st">'ame'</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">5</span>, pad <span class="op">=</span> <span class="st">'X'</span>, side <span class="op">=</span> <span class="st">'right'</span><span class="op">)</span>
<span class="co">#&gt; [1] "12XXX" "235XX" "abdXX" "ameXX"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_pad.html">str_pad</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">235</span>, <span class="st">'abd'</span>, <span class="st">'ame'</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">5</span>, pad <span class="op">=</span> <span class="st">'-'</span>, side <span class="op">=</span> <span class="st">'both'</span><span class="op">)</span>
<span class="co">#&gt; [1] "-12--" "-235-" "-abd-" "-ame-"</span>

<span class="co"># truncate a character string</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trunc.html">str_trunc</a></span><span class="op">(</span><span class="va">state.name</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span>, width <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>
<span class="co">#&gt; [1] "Ala..." "Alaska" "Ari..." "Ark..." "Cal..." "Col..."</span>
<span class="co">#&gt; [7] "Con..." "Del..."</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trunc.html">str_trunc</a></span><span class="op">(</span><span class="va">state.name</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span>, <span class="fl">6</span>, side  <span class="op">=</span> <span class="st">'left'</span><span class="op">)</span>
<span class="co">#&gt; [1] "...ama" "Alaska" "...ona" "...sas" "...nia" "...ado"</span>
<span class="co">#&gt; [7] "...cut" "...are"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trunc.html">str_trunc</a></span><span class="op">(</span><span class="va">state.name</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span>, <span class="fl">6</span>, side  <span class="op">=</span> <span class="st">'right'</span>, ellipsis <span class="op">=</span> <span class="st">''</span><span class="op">)</span>
<span class="co">#&gt; [1] "Alabam" "Alaska" "Arizon" "Arkans" "Califo" "Colora"</span>
<span class="co">#&gt; [7] "Connec" "Delawa"</span></code></pre></div>
</div>
<div id="join-and-split-strings-1" class="section level3" number="5.14.3">
<h3>
<span class="header-section-number">5.14.3</span> Join and Split strings<a class="anchor" aria-label="anchor" href="#join-and-split-strings-1"><i class="fas fa-link"></i></a>
</h3>
<div id="joining-strings-with-str_c" class="section level4" number="5.14.3.1">
<h4>
<span class="header-section-number">5.14.3.1</span> joining strings with str_c()<a class="anchor" aria-label="anchor" href="#joining-strings-with-str_c"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c()</a></code> joins two or more vectors element wise into a single character vector, optionally inserting separator (sep) between input vectors.</p>
<div class="sourceCode" id="cb214"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># combining elements into a character vector</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span><span class="op">)</span>
<span class="co">#&gt; [1] "ab"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>
<span class="co">#&gt; [1] "1234"</span>

<span class="co"># using sep</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span>, sep <span class="op">=</span> <span class="st">' '</span><span class="op">)</span>
<span class="co">#&gt; [1] "a b"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, sep <span class="op">=</span> <span class="st">' '</span><span class="op">)</span>
<span class="co">#&gt; [1] "1 2 3 4"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, sep <span class="op">=</span> <span class="st">' '</span><span class="op">)</span>
<span class="co">#&gt;  [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10"</span>

<span class="co"># on a single vector</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">' &lt;&gt; '</span><span class="op">)</span>
<span class="co">#&gt; [1] "a" "b"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">' &lt;&gt; '</span><span class="op">)</span>
<span class="co">#&gt; [1] "1" "2"</span>

<span class="co"># two or more vectors</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'c'</span>, <span class="st">'d'</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">' &lt;&gt; '</span><span class="op">)</span>
<span class="co">#&gt; [1] "a &lt;&gt; c" "b &lt;&gt; d"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">10</span><span class="op">:</span><span class="fl">20</span>, sep <span class="op">=</span> <span class="st">' '</span><span class="op">)</span>
<span class="co">#&gt;  [1] "1 10" "2 11" "3 12" "4 13" "5 14" "1 15" "2 16" "3 17"</span>
<span class="co">#&gt;  [9] "4 18" "5 19" "1 20"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">10</span><span class="op">:</span><span class="fl">20</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">' '</span><span class="op">)</span>
<span class="co">#&gt;  [1] "1 10 a" "2 11 b" "3 12 c" "4 13 a" "5 14 b" "1 15 c"</span>
<span class="co">#&gt;  [7] "2 16 a" "3 17 b" "4 18 c" "5 19 a" "1 20 b"</span>
<span class="co"># collapsing vectors</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, collapse <span class="op">=</span> <span class="st">'~'</span><span class="op">)</span>
<span class="co">#&gt; [1] "1~2~3~4~5~6~7~8~9~10"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'c'</span>, <span class="st">'d'</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">' &lt;&gt; '</span><span class="op">)</span>
<span class="co">#&gt; [1] "ac &lt;&gt; bd"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="va">month.name</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, collapse <span class="op">=</span> <span class="st">" - "</span><span class="op">)</span>
<span class="co">#&gt; [1] "January - February - March - April - May - June"</span>

<span class="va">a</span> <span class="op">&lt;-</span> <span class="va">month.name</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>
<span class="va">b</span> <span class="op">&lt;-</span> <span class="va">month.name</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>
<span class="va">c</span> <span class="op">&lt;-</span> <span class="va">month.name</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>

<span class="co"># combining character and variables</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="va">b</span>,<span class="st">'comes after'</span>, <span class="va">a</span> ,<span class="st">'but comes before'</span>, <span class="va">c</span>, sep <span class="op">=</span> <span class="st">" "</span><span class="op">)</span>
<span class="co">#&gt; [1] "February comes after January but comes before March"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="va">b</span>,<span class="st">'comes after'</span>, <span class="va">a</span> ,<span class="st">'but comes before'</span>, <span class="va">c</span>, sep <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span>
<span class="co">#&gt; [1] "February/comes after/January/but comes before/March"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="st">'version 1.'</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, sep <span class="op">=</span> <span class="st">''</span><span class="op">)</span>
<span class="co">#&gt; [1] "version 1.1" "version 1.2" "version 1.3" "version 1.4"</span>
<span class="co">#&gt; [5] "version 1.5"</span></code></pre></div>
</div>
</div>
<div id="joining-using-str_glue" class="section level3" number="5.14.4">
<h3>
<span class="header-section-number">5.14.4</span> Joining using str_glue()<a class="anchor" aria-label="anchor" href="#joining-using-str_glue"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code> returns a character vector containing a formatted combination of text and variable values.</p>
<p><strong>formatting with integers</strong></p>
<div class="sourceCode" id="cb215"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">2</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">'{x} * {x} = {x ** 2}'</span><span class="op">)</span>
<span class="co">#&gt; 2 * 2 = 4</span>

<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">'{x} squared is equal to {x ** 2}'</span><span class="op">)</span>
<span class="co">#&gt; 1 squared is equal to 1</span>
<span class="co">#&gt; 2 squared is equal to 4</span>
<span class="co">#&gt; 3 squared is equal to 9</span>
<span class="co">#&gt; 4 squared is equal to 16</span>

<span class="va">num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">123</span>, <span class="fl">1</span>, <span class="fl">100</span>, <span class="fl">200</span>, <span class="fl">10200</span>, <span class="fl">25000</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">'my registration number is {str_pad(num, 5, pad = "0")}'</span><span class="op">)</span>
<span class="co">#&gt; my registration number is 00123</span>
<span class="co">#&gt; my registration number is 00001</span>
<span class="co">#&gt; my registration number is 00100</span>
<span class="co">#&gt; my registration number is 00200</span>
<span class="co">#&gt; my registration number is 10200</span>
<span class="co">#&gt; my registration number is 25000</span></code></pre></div>
<p><strong>Formatting with strings</strong></p>
<div class="sourceCode" id="cb216"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">'my name is'</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="st">'james'</span>
<span class="va">z</span> <span class="op">&lt;-</span> <span class="st">'london'</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">'{x} {y} and i live and work in {z}'</span><span class="op">)</span>
<span class="co">#&gt; my name is james and i live and work in london</span>


<span class="va">x</span> <span class="op">&lt;-</span> <span class="st">'my name is'</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="st">'james'</span>
<span class="va">z</span> <span class="op">&lt;-</span> <span class="fl">35</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">'{str_to_title(x)} {str_to_upper(y)} and i am {z} years'</span><span class="op">)</span>
<span class="co">#&gt; My Name Is JAMES and i am 35 years</span>

<span class="va">names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'paul'</span>, <span class="st">'alphonse'</span>, <span class="st">'michael'</span>, <span class="st">'james'</span>, <span class="st">'samson'</span>, <span class="st">'terence'</span>, <span class="st">'derin'</span><span class="op">)</span>
<span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">35</span>, <span class="fl">32</span>, <span class="fl">37</span>, <span class="fl">29</span>, <span class="fl">40</span>, <span class="fl">30</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">'i am {str_to_title(names)} and i am {age} years old'</span><span class="op">)</span>
<span class="co">#&gt; i am Paul and i am 30 years old</span>
<span class="co">#&gt; i am Alphonse and i am 35 years old</span>
<span class="co">#&gt; i am Michael and i am 32 years old</span>
<span class="co">#&gt; i am James and i am 37 years old</span>
<span class="co">#&gt; i am Samson and i am 29 years old</span>
<span class="co">#&gt; i am Terence and i am 40 years old</span>
<span class="co">#&gt; i am Derin and i am 30 years old</span></code></pre></div>
<p><strong>Formatting with doubles or floating points</strong></p>
<div class="sourceCode" id="cb217"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1000</span><span class="op">/</span><span class="fl">6</span>
<span class="va">x</span>
<span class="co">#&gt; [1] 166.6667</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">'1000 divided by 3 is {x}'</span><span class="op">)</span>
<span class="co">#&gt; 1000 divided by 3 is 166.666666666667</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">'1000 divided by 3 is {round(x, 3)}'</span><span class="op">)</span>
<span class="co">#&gt; 1000 divided by 3 is 166.667</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">'1000 divided by 3 is {round(x)}'</span><span class="op">)</span>
<span class="co">#&gt; 1000 divided by 3 is 167</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">'1000 divided by 3 is {paste0("+", round(x))}'</span><span class="op">)</span>
<span class="co">#&gt; 1000 divided by 3 is +167</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">'1000 divided by 3 is{paste0(" ", round(x))}'</span><span class="op">)</span>
<span class="co">#&gt; 1000 divided by 3 is 167</span></code></pre></div>
</div>
<div id="splitting-strings-using-str_split-and-str_split_fixed" class="section level3" number="5.14.5">
<h3>
<span class="header-section-number">5.14.5</span> Splitting strings using str_split() and str_split_fixed()<a class="anchor" aria-label="anchor" href="#splitting-strings-using-str_split-and-str_split_fixed"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split()</a></code> splits the elements of a character vector into substrings by a specific pattern.
The function <code><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split_fixed()</a></code> splits up the elements of a character into a fixed number of pieces.</p>
<div class="sourceCode" id="cb218"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'2020-01-01'</span>, <span class="st">'2019-03-31'</span>, <span class="st">'2018-06-30'</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; List of 3</span>
<span class="co">#&gt;  $ : chr [1:3] "2020" "01" "01"</span>
<span class="co">#&gt;  $ : chr [1:3] "2019" "03" "31"</span>
<span class="co">#&gt;  $ : chr [1:3] "2018" "06" "30"</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'2020 01 01'</span>, <span class="st">'2019 03 31'</span>, <span class="st">'2018 06 30'</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">" "</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; List of 3</span>
<span class="co">#&gt;  $ : chr [1:3] "2020" "01" "01"</span>
<span class="co">#&gt;  $ : chr [1:3] "2019" "03" "31"</span>
<span class="co">#&gt;  $ : chr [1:3] "2018" "06" "30"</span>

<span class="co"># splitting into two substrings</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'2020-01-01'</span>, <span class="st">'2019-03-31'</span>, <span class="st">'2018-06-30'</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"-"</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; List of 3</span>
<span class="co">#&gt;  $ : chr [1:2] "2020" "01-01"</span>
<span class="co">#&gt;  $ : chr [1:2] "2019" "03-31"</span>
<span class="co">#&gt;  $ : chr [1:2] "2018" "06-30"</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'2020 01 01'</span>, <span class="st">'2019 03 31'</span>, <span class="st">'2018 06 30'</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">" "</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; List of 3</span>
<span class="co">#&gt;  $ : chr [1:2] "2020" "01 01"</span>
<span class="co">#&gt;  $ : chr [1:2] "2019" "03 31"</span>
<span class="co">#&gt;  $ : chr [1:2] "2018" "06 30"</span>

<span class="co"># returning a matrix</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split_fixed</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'2020-01-01'</span>, <span class="st">'2019-03-31'</span>, <span class="st">'2018-06-30'</span><span class="op">)</span>, <span class="st">'-'</span>, <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt;      [,1]   [,2]   </span>
<span class="co">#&gt; [1,] "2020" "01-01"</span>
<span class="co">#&gt; [2,] "2019" "03-31"</span>
<span class="co">#&gt; [3,] "2018" "06-30"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split_fixed</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'2020-01-01'</span>, <span class="st">'2019-03-31'</span>, <span class="st">'2018-06-30'</span><span class="op">)</span>, <span class="st">'-'</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;      [,1]   [,2] [,3]</span>
<span class="co">#&gt; [1,] "2020" "01" "01"</span>
<span class="co">#&gt; [2,] "2019" "03" "31"</span>
<span class="co">#&gt; [3,] "2018" "06" "30"</span></code></pre></div>
</div>
<div id="extract-and-replace-part-of-a-string" class="section level3" number="5.14.6">
<h3>
<span class="header-section-number">5.14.6</span> Extract and Replace part of a string<a class="anchor" aria-label="anchor" href="#extract-and-replace-part-of-a-string"><i class="fas fa-link"></i></a>
</h3>
<div id="extracting-string-values-using-str_sub" class="section level4" number="5.14.6.1">
<h4>
<span class="header-section-number">5.14.6.1</span> Extracting string values using str_sub()<a class="anchor" aria-label="anchor" href="#extracting-string-values-using-str_sub"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub()</a></code> extracts a substring from a string by indexing. It uses start for the beginning position and stop for the ending position. It is like indexing but applied to a string.</p>
<div class="sourceCode" id="cb219"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'2020-01-01'</span>, <span class="st">'2019-03-31'</span>, <span class="st">'2018-06-30'</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">var</span>, start <span class="op">=</span> <span class="fl">1</span>, end <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>
<span class="co">#&gt; [1] "2020" "2019" "2018"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">var</span>, <span class="fl">6</span>, <span class="fl">7</span><span class="op">)</span>
<span class="co">#&gt; [1] "01" "03" "06"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">var</span>, <span class="fl">9</span>, <span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt; [1] "01" "31" "30"</span>

<span class="co"># using negative numbers</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">var</span>, <span class="op">-</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt; [1] "01" "31" "30"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">var</span>, <span class="op">-</span><span class="fl">5</span>, <span class="op">-</span><span class="fl">4</span><span class="op">)</span>
<span class="co">#&gt; [1] "01" "03" "06"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">var</span>, <span class="op">-</span><span class="fl">10</span>, <span class="op">-</span><span class="fl">7</span><span class="op">)</span>
<span class="co">#&gt; [1] "2020" "2019" "2018"</span></code></pre></div>
</div>
<div id="replacing-string-values-using-str_sub" class="section level4" number="5.14.6.2">
<h4>
<span class="header-section-number">5.14.6.2</span> Replacing string values using str_sub()<a class="anchor" aria-label="anchor" href="#replacing-string-values-using-str_sub"><i class="fas fa-link"></i></a>
</h4>
<p>The function <code><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub()</a></code> is also used to replace substring in a string by assigning a different string to the extracted substring.</p>
<div class="sourceCode" id="cb220"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'2020-01-01'</span>, <span class="st">'2019-03-31'</span>, <span class="st">'2018-06-30'</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">var</span>, <span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'2010'</span>, <span class="st">'2011'</span>, <span class="st">'2012'</span><span class="op">)</span>
<span class="va">var</span>
<span class="co">#&gt; [1] "2010-01-01" "2011-03-31" "2012-06-30"</span></code></pre></div>
</div>
</div>
<div id="replacing-string-values-using-str_replace" class="section level3" number="5.14.7">
<h3>
<span class="header-section-number">5.14.7</span> Replacing string values using str_replace()<a class="anchor" aria-label="anchor" href="#replacing-string-values-using-str_replace"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace()</a></code> replaces a substring at first occurrence.</p>
<div class="sourceCode" id="cb221"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'2020-01-01'</span>, <span class="st">'2019-03-31'</span>, <span class="st">'2018-06-30'</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">"-"</span>, <span class="st">""</span><span class="op">)</span>
<span class="co">#&gt; [1] "202001-01" "201903-31" "201806-30"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">"-"</span>, <span class="st">"/"</span><span class="op">)</span>
<span class="co">#&gt; [1] "2020/01-01" "2019/03-31" "2018/06-30"</span></code></pre></div>
</div>
<div id="replacing-string-values-using-str_replace_all" class="section level3" number="5.14.8">
<h3>
<span class="header-section-number">5.14.8</span> Replacing string values using str_replace_all()<a class="anchor" aria-label="anchor" href="#replacing-string-values-using-str_replace_all"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all()</a></code> replaces a substring throughout a string.</p>
<div class="sourceCode" id="cb222"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'2020-01-01'</span>, <span class="st">'2019-03-31'</span>, <span class="st">'2018-06-30'</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">"-"</span>, <span class="st">" "</span><span class="op">)</span>
<span class="co">#&gt; [1] "2020 01 01" "2019 03 31" "2018 06 30"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">"-"</span>, <span class="st">"/"</span><span class="op">)</span>
<span class="co">#&gt; [1] "2020/01/01" "2019/03/31" "2018/06/30"</span></code></pre></div>
<div id="remove-white-spaces-and-clean-string-values-1" class="section level4" number="5.14.8.1">
<h4>
<span class="header-section-number">5.14.8.1</span> Remove white spaces and clean string values<a class="anchor" aria-label="anchor" href="#remove-white-spaces-and-clean-string-values-1"><i class="fas fa-link"></i></a>
</h4>
<p>The function:</p>
<ul>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_trim()</a></code> removes white spaces.</li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_squish()</a></code> removes repeated spaces.</li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_remove.html">str_remove()</a></code> removes the first repeated spaces.</li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_remove.html">str_remove_all()</a></code> removes all repeated spaces.</li>
</ul>
<div class="sourceCode" id="cb223"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># both sides</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_trim</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">' 2020-01-01 '</span>, <span class="st">' 2019-03-31 '</span>, <span class="st">' 2018-06-30 '</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "2020-01-01" "2019-03-31" "2018-06-30"</span>

<span class="co"># left side</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_trim</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">' 2020-01-01 '</span>, <span class="st">' 2019-03-31 '</span>, <span class="st">' 2018-06-30 '</span><span class="op">)</span>, side <span class="op">=</span> <span class="st">'left'</span><span class="op">)</span>
<span class="co">#&gt; [1] "2020-01-01 " "2019-03-31 " "2018-06-30 "</span>

<span class="co"># right side</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_trim</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">' 2020-01-01 '</span>, <span class="st">' 2019-03-31 '</span>, <span class="st">' 2018-06-30 '</span><span class="op">)</span>, side <span class="op">=</span> <span class="st">'right'</span><span class="op">)</span>
<span class="co">#&gt; [1] " 2020-01-01" " 2019-03-31" " 2018-06-30"</span>

<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_squish</a></span><span class="op">(</span><span class="st">'removing   all    repeated   spaces in a string  '</span><span class="op">)</span>
<span class="co">#&gt; [1] "removing all repeated spaces in a string"</span>

<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html">str_remove</a></span><span class="op">(</span><span class="st">'removing   first  repeated   spaces in a string  '</span>, <span class="st">'  '</span><span class="op">)</span>
<span class="co">#&gt; [1] "removing first  repeated   spaces in a string  "</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html">str_remove_all</a></span><span class="op">(</span><span class="st">'removing   all  repeated   spaces in a string  '</span>, <span class="st">'  '</span><span class="op">)</span>
<span class="co">#&gt; [1] "removing allrepeated spaces in a string"</span></code></pre></div>
</div>
</div>
<div id="sorting" class="section level3" number="5.14.9">
<h3>
<span class="header-section-number">5.14.9</span> Sorting<a class="anchor" aria-label="anchor" href="#sorting"><i class="fas fa-link"></i></a>
</h3>
<p>The function:</p>
<ul>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_order.html">str_order()</a></code> sorts a character vector and returns sorted indices.</li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_order.html">str_sort()</a></code> sorts a character vector and returns sorted values.</li>
</ul>
<div class="sourceCode" id="cb224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_order.html">str_order</a></span><span class="op">(</span><span class="va">month.name</span><span class="op">)</span>
<span class="co">#&gt;  [1]  4  8 12  2  1  7  6  3  5 11 10  9</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_order.html">str_order</a></span><span class="op">(</span><span class="va">month.name</span>, decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt;  [1]  9 10 11  5  3  6  7  1  2 12  8  4</span>

<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_order.html">str_sort</a></span><span class="op">(</span><span class="va">month.name</span><span class="op">)</span>
<span class="co">#&gt;  [1] "April"     "August"    "December"  "February" </span>
<span class="co">#&gt;  [5] "January"   "July"      "June"      "March"    </span>
<span class="co">#&gt;  [9] "May"       "November"  "October"   "September"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_order.html">str_sort</a></span><span class="op">(</span><span class="va">month.name</span>, decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt;  [1] "September" "October"   "November"  "May"      </span>
<span class="co">#&gt;  [5] "March"     "June"      "July"      "January"  </span>
<span class="co">#&gt;  [9] "February"  "December"  "August"    "April"</span></code></pre></div>
</div>
<div id="duplicating-strings" class="section level3" number="5.14.10">
<h3>
<span class="header-section-number">5.14.10</span> Duplicating strings<a class="anchor" aria-label="anchor" href="#duplicating-strings"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://stringr.tidyverse.org/reference/str_dup.html">str_dup()</a></code> duplicates and concatenate strings within a character vector.</p>
<div class="sourceCode" id="cb225"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_dup.html">str_dup</a></span><span class="op">(</span><span class="st">'jan'</span>, <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; [1] "janjan"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_dup.html">str_dup</a></span><span class="op">(</span><span class="st">'jan'</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt; [1] "jan"       "janjan"    "janjanjan"</span></code></pre></div>
</div>
<div id="pattern-matching-using-regular-expression-1" class="section level3" number="5.14.11">
<h3>
<span class="header-section-number">5.14.11</span> Pattern matching using regular expression<a class="anchor" aria-label="anchor" href="#pattern-matching-using-regular-expression-1"><i class="fas fa-link"></i></a>
</h3>
<div id="regex-functions-1" class="section level4" number="5.14.11.1">
<h4>
<span class="header-section-number">5.14.11.1</span> Regex functions<a class="anchor" aria-label="anchor" href="#regex-functions-1"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>
<code>str_which(),</code>str_detect()<code>and</code>str_subset()`</li>
<li><code><a href="https://stringr.tidyverse.org/reference/str_count.html">str_count()</a></code></li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_starts.html">str_starts()</a></code> and <code><a href="https://stringr.tidyverse.org/reference/str_starts.html">str_ends()</a></code>
</li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate()</a></code> and <code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate_all()</a></code>
</li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract()</a></code> and <code><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract_all()</a></code>
</li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_match.html">str_match()</a></code> and <code><a href="https://stringr.tidyverse.org/reference/str_match.html">str_match_all()</a></code>
</li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view()</a></code> and <code><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all()</a></code>
</li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace()</a></code> and <code><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all()</a></code>
</li>
</ul>
<div id="the-functions-str_detect-str_which-and-str_subset" class="section level5" number="5.14.11.1.1">
<h5>
<span class="header-section-number">5.14.11.1.1</span> The functions str_detect(), str_which() and str_subset()<a class="anchor" aria-label="anchor" href="#the-functions-str_detect-str_which-and-str_subset"><i class="fas fa-link"></i></a>
</h5>
<p>The function:</p>
<ul>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code> detects the presence or absence of a pattern in a string and is equivalent to grepl(pattern, x).</li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_which()</a></code> detects the position of a matched pattern and is equivalent to grep(pattern, x).</li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset()</a></code> keeps string matching a pattern and is equivalent to grep(pattern, x, value = TRUE).</li>
</ul>
<div class="sourceCode" id="cb226"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'uary'</span><span class="op">)</span>
<span class="co">#&gt;  [1]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">#&gt; [10] FALSE FALSE FALSE</span>
<span class="va">month.name</span><span class="op">[</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'uary'</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt; [1] "January"  "February"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'uary'</span>, negate <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt;  [1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</span>
<span class="co">#&gt; [10]  TRUE  TRUE  TRUE</span>
<span class="va">month.name</span><span class="op">[</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'uary'</span>, negate <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt;  [1] "March"     "April"     "May"       "June"     </span>
<span class="co">#&gt;  [5] "July"      "August"    "September" "October"  </span>
<span class="co">#&gt;  [9] "November"  "December"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_which</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'uary'</span><span class="op">)</span>
<span class="co">#&gt; [1] 1 2</span>
<span class="va">month.name</span><span class="op">[</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_which</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'uary'</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt; [1] "January"  "February"</span>

<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_which</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'uary'</span>, negate <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt;  [1]  3  4  5  6  7  8  9 10 11 12</span>
<span class="va">month.name</span><span class="op">[</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_which</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'uary'</span>, negate <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt;  [1] "March"     "April"     "May"       "June"     </span>
<span class="co">#&gt;  [5] "July"      "August"    "September" "October"  </span>
<span class="co">#&gt;  [9] "November"  "December"</span>

<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="va">month.name</span>, pattern <span class="op">=</span> <span class="st">'ber'</span><span class="op">)</span>
<span class="co">#&gt; [1] "September" "October"   "November"  "December"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="va">month.name</span>, pattern <span class="op">=</span> <span class="st">'ber'</span>, negate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; [1] "January"  "February" "March"    "April"    "May"     </span>
<span class="co">#&gt; [6] "June"     "July"     "August"</span></code></pre></div>
</div>
<div id="the-function-str_count" class="section level5" number="5.14.11.1.2">
<h5>
<span class="header-section-number">5.14.11.1.2</span> The function str_count()<a class="anchor" aria-label="anchor" href="#the-function-str_count"><i class="fas fa-link"></i></a>
</h5>
<p>The function <code><a href="https://stringr.tidyverse.org/reference/str_count.html">str_count()</a></code> counts the number of matches in a string.</p>
<div class="sourceCode" id="cb227"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'2020-01-01'</span>, <span class="st">'2019-03-31'</span>, <span class="st">'2018-06-30'</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_count.html">str_count</a></span><span class="op">(</span><span class="va">var</span>, pattern <span class="op">=</span> <span class="st">'-'</span><span class="op">)</span>
<span class="co">#&gt; [1] 2 2 2</span></code></pre></div>
</div>
</div>
<div id="the-functions-str_starts-and-str_ends" class="section level4" number="5.14.11.2">
<h4>
<span class="header-section-number">5.14.11.2</span> The functions str_starts() and str_ends()<a class="anchor" aria-label="anchor" href="#the-functions-str_starts-and-str_ends"><i class="fas fa-link"></i></a>
</h4>
<p>The function:</p>
<ul>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_starts.html">str_starts()</a></code> detects the presence of a pattern at the beginning of a string.</li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_starts.html">str_ends()</a></code> detects the presence of a pattern at the end of a string.</li>
</ul>
<div class="sourceCode" id="cb228"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_starts.html">str_starts</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'J'</span><span class="op">)</span>
<span class="co">#&gt;  [1]  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE</span>
<span class="co">#&gt; [10] FALSE FALSE FALSE</span>
<span class="va">month.name</span><span class="op">[</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_starts.html">str_starts</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'J'</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt; [1] "January" "June"    "July"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_starts.html">str_ends</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'ber'</span><span class="op">)</span>
<span class="co">#&gt;  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</span>
<span class="co">#&gt; [10]  TRUE  TRUE  TRUE</span>
<span class="va">month.name</span><span class="op">[</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_starts.html">str_ends</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'ber'</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt; [1] "September" "October"   "November"  "December"</span></code></pre></div>
<div id="the-functions-str_locate-and-str_locate_all" class="section level5" number="5.14.11.2.1">
<h5>
<span class="header-section-number">5.14.11.2.1</span> The functions str_locate() and str_locate_all()<a class="anchor" aria-label="anchor" href="#the-functions-str_locate-and-str_locate_all"><i class="fas fa-link"></i></a>
</h5>
<p>The function:</p>
<ul>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate()</a></code> locates the position of the first pattern match in a string.</li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate_all()</a></code> locates the position of all pattern matches in a string.</li>
</ul>
<div class="sourceCode" id="cb229"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'ber'</span><span class="op">)</span>
<span class="co">#&gt;       start end</span>
<span class="co">#&gt;  [1,]    NA  NA</span>
<span class="co">#&gt;  [2,]    NA  NA</span>
<span class="co">#&gt;  [3,]    NA  NA</span>
<span class="co">#&gt;  [4,]    NA  NA</span>
<span class="co">#&gt;  [5,]    NA  NA</span>
<span class="co">#&gt;  [6,]    NA  NA</span>
<span class="co">#&gt;  [7,]    NA  NA</span>
<span class="co">#&gt;  [8,]    NA  NA</span>
<span class="co">#&gt;  [9,]     7   9</span>
<span class="co">#&gt; [10,]     5   7</span>
<span class="co">#&gt; [11,]     6   8</span>
<span class="co">#&gt; [12,]     6   8</span></code></pre></div>
</div>
<div id="the-functions-str_extract-and-str_extract_all" class="section level5" number="5.14.11.2.2">
<h5>
<span class="header-section-number">5.14.11.2.2</span> The functions str_extract() and str_extract_all()<a class="anchor" aria-label="anchor" href="#the-functions-str_extract-and-str_extract_all"><i class="fas fa-link"></i></a>
</h5>
<p>The function:</p>
<ul>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract()</a></code> extracts the first matching pattern from a string.</li>
<li>
<code><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract_all()</a></code> extracts all matching patterns from a string.</li>
</ul>
<div class="sourceCode" id="cb230"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract</a></span><span class="op">(</span>string <span class="op">=</span> <span class="va">month.name</span>, pattern <span class="op">=</span> <span class="st">'ber'</span><span class="op">)</span>
<span class="co">#&gt;  [1] NA    NA    NA    NA    NA    NA    NA    NA    "ber"</span>
<span class="co">#&gt; [10] "ber" "ber" "ber"</span></code></pre></div>
</div>
<div id="the-functions-str_view-and-str_view_all" class="section level5" number="5.14.11.2.3">
<h5>
<span class="header-section-number">5.14.11.2.3</span> The functions str_view() and str_view_all()<a class="anchor" aria-label="anchor" href="#the-functions-str_view-and-str_view_all"><i class="fas fa-link"></i></a>
</h5>
<p>The functions <code><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view()</a></code> and <code><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all()</a></code> Views HTML rendering of regular expression match, with the first matching the first occurrence and the later all occurrences.</p>
<div class="sourceCode" id="cb231"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'uary'</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-c23389e401175f913704" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-c23389e401175f913704">{"x":{"html":"<ul>\n  <li>Jan<span class='match'>uary<\/span><\/li>\n  <li>Febr<span class='match'>uary<\/span><\/li>\n  <li>March<\/li>\n  <li>April<\/li>\n  <li>May<\/li>\n  <li>June<\/li>\n  <li>July<\/li>\n  <li>August<\/li>\n  <li>September<\/li>\n  <li>October<\/li>\n  <li>November<\/li>\n  <li>December<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="regex-operations-1" class="section level4" number="5.14.11.3">
<h4>
<span class="header-section-number">5.14.11.3</span> Regex Operations<a class="anchor" aria-label="anchor" href="#regex-operations-1"><i class="fas fa-link"></i></a>
</h4>
<p><strong>matching spaces</strong></p>
<div class="sourceCode" id="cb232"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'2020 01 01'</span>, <span class="st">'2019 03 31'</span>, <span class="st">'2018 06 30'</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">'[[:space:]]'</span>, <span class="st">'-'</span><span class="op">)</span>
<span class="co">#&gt; [1] "2020-01-01" "2019-03-31" "2018-06-30"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">'\\s'</span>, <span class="st">'-'</span><span class="op">)</span>
<span class="co">#&gt; [1] "2020-01-01" "2019-03-31" "2018-06-30"</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">'\\s'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; List of 3</span>
<span class="co">#&gt;  $ : chr [1:3] "2020" "01" "01"</span>
<span class="co">#&gt;  $ : chr [1:3] "2019" "03" "31"</span>
<span class="co">#&gt;  $ : chr [1:3] "2018" "06" "30"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">'\\S'</span>, <span class="st">'-'</span><span class="op">)</span>
<span class="co">#&gt; [1] "---- -- --" "---- -- --" "---- -- --"</span></code></pre></div>
<p><strong>matching alphabetic characters</strong></p>
<div class="sourceCode" id="cb233"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">var</span> <span class="op">&lt;-</span> <span class="st">'a1b2c3d4e5f'</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">'[[:alpha:]]'</span>, <span class="st">''</span><span class="op">)</span>
<span class="co">#&gt; [1] "12345"</span>
<span class="co"># lowercase letters</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'[[:lower:]]'</span>, <span class="st">''</span><span class="op">)</span>
<span class="co">#&gt;  [1] "J" "F" "M" "A" "M" "J" "J" "A" "S" "O" "N" "D"</span></code></pre></div>
<p><strong>matching numerical digits</strong></p>
<div class="sourceCode" id="cb234"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">var</span> <span class="op">&lt;-</span> <span class="st">'a1b2c3d4e5f'</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">'[[:digit:]]'</span>, <span class="st">''</span><span class="op">)</span>
<span class="co">#&gt; [1] "abcdef"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">'\\d'</span>, <span class="st">''</span><span class="op">)</span>
<span class="co">#&gt; [1] "abcdef"</span></code></pre></div>
<p><strong>matching letters and numbers (alphanumeric characters)</strong></p>
<div class="sourceCode" id="cb235"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">var</span> <span class="op">&lt;-</span> <span class="st">'a1@; 2#4c $8`*%f^!1~0&amp;^h*()j'</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">'[[:alnum:]]'</span>, <span class="st">''</span><span class="op">)</span>
<span class="co">#&gt; [1] "@; # $`*%^!~&amp;^*()"</span>

<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">'[[:xdigit:]]'</span>, <span class="st">''</span><span class="op">)</span>
<span class="co">#&gt; [1] "@; # $`*%^!~&amp;^h*()j"</span>

<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">'\\w'</span>, <span class="st">''</span><span class="op">)</span>
<span class="co">#&gt; [1] "@; # $`*%^!~&amp;^*()"</span></code></pre></div>
<p><strong>matching punctuation</strong></p>
<div class="sourceCode" id="cb236"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">var</span> <span class="op">&lt;-</span> <span class="st">'a1@; 2#4c $8`*%f^!1~0&amp;^h*()j'</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">'[[:punct:]]'</span>, <span class="st">''</span><span class="op">)</span>
<span class="co">#&gt; [1] "a1 24c $8`f^1~0^hj"</span>

<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">'\\W'</span>, <span class="st">''</span><span class="op">)</span>
<span class="co">#&gt; [1] "a124c8f10hj"</span></code></pre></div>
<p><strong>matching letters, numbers, and punctuation</strong></p>
<div class="sourceCode" id="cb237"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">var</span> <span class="op">&lt;-</span> <span class="st">'a1@; 2#4c $8`*%f^!1~0&amp;^h*()j'</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">'[[:graph:]]'</span>, <span class="st">' '</span><span class="op">)</span>
<span class="co">#&gt; [1] "                            "</span>

<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">'.'</span>, <span class="st">' '</span><span class="op">)</span>
<span class="co">#&gt; [1] "                            "</span></code></pre></div>
<p><strong>matching whitespace</strong></p>
<div class="sourceCode" id="cb238"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">' 2020-01-01 '</span>, <span class="st">' 2019-03-31 '</span>, <span class="st">' 2018-06-30 '</span><span class="op">)</span>, <span class="st">'\\s'</span>, <span class="st">''</span><span class="op">)</span>
<span class="co">#&gt; [1] "2020-01-01" "2019-03-31" "2018-06-30"</span></code></pre></div>
<p><strong>matching newline and tap</strong></p>
<div class="sourceCode" id="cb239"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'good morning \n i am fru kinglsy \n i will be your instructor'</span><span class="op">)</span>
<span class="co">#&gt; good morning </span>
<span class="co">#&gt;  i am fru kinglsy </span>
<span class="co">#&gt;  i will be your instructor</span>

<span class="co"># replacing new line</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="st">'good morning \n i am fru kinglsy \n i will be your instructor'</span>, <span class="st">'\\n'</span>, <span class="st">'\t'</span><span class="op">)</span>
<span class="co">#&gt; [1] "good morning \t i am fru kinglsy \t i will be your instructor"</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="st">'good morning \n i am fru kinglsy \n i will be your instructor'</span>, <span class="st">'\\n'</span>, <span class="st">'\t'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; good morning      i am fru kinglsy    i will be your instructor</span>

<span class="co"># replacing tab</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="st">'good morning \t i am fru kinglsy \t i will be your instructor'</span>, <span class="st">'\\t'</span>, <span class="st">'\n'</span><span class="op">)</span>
<span class="co">#&gt; [1] "good morning \n i am fru kinglsy \n i will be your instructor"</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="st">'good morning \t i am fru kinglsy \t i will be your instructor'</span>, <span class="st">'\\t'</span>, <span class="st">'\n'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; good morning </span>
<span class="co">#&gt;  i am fru kinglsy </span>
<span class="co">#&gt;  i will be your instructor</span></code></pre></div>
<p><strong>matching metacharacters</strong></p>
<div class="sourceCode" id="cb240"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sales</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'$25000'</span>, <span class="st">'$20000'</span>, <span class="st">'$22500'</span>, <span class="st">'$24000'</span>, <span class="st">'$30000'</span>, <span class="st">'$35000'</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span><span class="op">(</span><span class="va">sales</span>, <span class="st">'\\$'</span>, <span class="st">''</span><span class="op">)</span>
<span class="co">#&gt; [1] "25000" "20000" "22500" "24000" "30000" "35000"</span>

<span class="va">sales</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'+25000'</span>, <span class="st">'+20000'</span>, <span class="st">'+22500'</span>, <span class="st">'+24000'</span>, <span class="st">'+30000'</span>, <span class="st">'+35000'</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span><span class="op">(</span><span class="va">sales</span>, <span class="st">'\\+'</span>, <span class="st">''</span><span class="op">)</span>
<span class="co">#&gt; [1] "25000" "20000" "22500" "24000" "30000" "35000"</span>

<span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'01.01.2012'</span>, <span class="st">'01.02.2012'</span>, <span class="st">'01.03.2012'</span>, <span class="st">'01.04.2012'</span>, <span class="st">'01.05.2012'</span>, <span class="st">'01.06.2012'</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">dates</span>, <span class="st">'\\.'</span>, <span class="st">'-'</span><span class="op">)</span>
<span class="co">#&gt; [1] "01-01-2012" "01-02-2012" "01-03-2012" "01-04-2012"</span>
<span class="co">#&gt; [5] "01-05-2012" "01-06-2012"</span>

<span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'01*01*2012'</span>, <span class="st">'01*02*2012'</span>, <span class="st">'01*03*2012'</span>, <span class="st">'01*04*2012'</span>, <span class="st">'01*05*2012'</span>, <span class="st">'01*06*2012'</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">dates</span>, <span class="st">'\\*'</span>, <span class="st">'-'</span><span class="op">)</span>
<span class="co">#&gt; [1] "01-01-2012" "01-02-2012" "01-03-2012" "01-04-2012"</span>
<span class="co">#&gt; [5] "01-05-2012" "01-06-2012"</span>

<span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'01^01^2012'</span>, <span class="st">'01^02^2012'</span>, <span class="st">'01^03^2012'</span>, <span class="st">'01^04^2012'</span>, <span class="st">'01^05^2012'</span>, <span class="st">'01^06^2012'</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">dates</span>, <span class="st">'\\^'</span>, <span class="st">'-'</span><span class="op">)</span>
<span class="co">#&gt; [1] "01-01-2012" "01-02-2012" "01-03-2012" "01-04-2012"</span>
<span class="co">#&gt; [5] "01-05-2012" "01-06-2012"</span>

<span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'01|01|2012'</span>, <span class="st">'01|02|2012'</span>, <span class="st">'01|03|2012'</span>, <span class="st">'01|04|2012'</span>, <span class="st">'01|05|2012'</span>, <span class="st">'01|06|2012'</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">dates</span>, <span class="st">'\\|'</span>, <span class="st">'-'</span><span class="op">)</span>
<span class="co">#&gt; [1] "01-01-2012" "01-02-2012" "01-03-2012" "01-04-2012"</span>
<span class="co">#&gt; [5] "01-05-2012" "01-06-2012"</span>

<span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'01\\01\\2012'</span>, <span class="st">'01\\02\\2012'</span>, <span class="st">'01\\03\\2012'</span>, <span class="st">'01\\04\\2012'</span>, <span class="st">'01\\05\\2012'</span>, <span class="st">'01\\06\\2012'</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">dates</span>, <span class="st">'\\\\'</span>, <span class="st">'-'</span><span class="op">)</span>
<span class="co">#&gt; [1] "01-01-2012" "01-02-2012" "01-03-2012" "01-04-2012"</span>
<span class="co">#&gt; [5] "01-05-2012" "01-06-2012"</span>

<span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'01\\.01\\.2012'</span>, <span class="st">'01\\.02\\.2012'</span>, <span class="st">'01\\.03\\.2012'</span>, <span class="st">'01\\.04\\.2012'</span>, <span class="st">'01\\.05\\.2012'</span>, <span class="st">'01\\.06\\.2012'</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">dates</span>, <span class="st">'\\\\\\.'</span>, <span class="st">'-'</span><span class="op">)</span>
<span class="co">#&gt; [1] "01-01-2012" "01-02-2012" "01-03-2012" "01-04-2012"</span>
<span class="co">#&gt; [5] "01-05-2012" "01-06-2012"</span></code></pre></div>
<p><strong>alternates and ranges</strong></p>
<div class="sourceCode" id="cb241"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># either or</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'uary|ember|ober'</span>, <span class="st">'*'</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-d5970d4b948261a51ae4" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-d5970d4b948261a51ae4">{"x":{"html":"<ul>\n  <li>Jan<span class='match'>uary<\/span><\/li>\n  <li>Febr<span class='match'>uary<\/span><\/li>\n  <li>March<\/li>\n  <li>April<\/li>\n  <li>May<\/li>\n  <li>June<\/li>\n  <li>July<\/li>\n  <li>August<\/li>\n  <li>Sept<span class='match'>ember<\/span><\/li>\n  <li>Oct<span class='match'>ober<\/span><\/li>\n  <li>Nov<span class='match'>ember<\/span><\/li>\n  <li>Dec<span class='match'>ember<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>

# ranges
str_replace_all(month.name, '[aeiou]', '*')
#&gt;  [1] "J*n**ry"   "F*br**ry"  "M*rch"     "Apr*l"    
#&gt;  [5] "M*y"       "J*n*"      "J*ly"      "A*g*st"   
#&gt;  [9] "S*pt*mb*r" "Oct*b*r"   "N*v*mb*r"  "D*c*mb*r"
str_replace_all(month.name, '[a-z]', '*')
#&gt;  [1] "J******"   "F*******"  "M****"     "A****"    
#&gt;  [5] "M**"       "J***"      "J***"      "A*****"   
#&gt;  [9] "S********" "O******"   "N*******"  "D*******"
str_replace_all(month.name, '[A-Z]', '*')
#&gt;  [1] "*anuary"   "*ebruary"  "*arch"     "*pril"    
#&gt;  [5] "*ay"       "*une"      "*uly"      "*ugust"   
#&gt;  [9] "*eptember" "*ctober"   "*ovember"  "*ecember"
str_replace_all(month.name, '[m-z]', '*')
#&gt;  [1] "Ja**a**"   "Feb**a**"  "Ma*ch"     "A**il"    
#&gt;  [5] "Ma*"       "J**e"      "J*l*"      "A*g***"   
#&gt;  [9] "Se**e*be*" "Oc**be*"   "N**e*be*"  "Dece*be*"
str_replace_all(month.name, '[0-9]', '*')
#&gt;  [1] "January"   "February"  "March"     "April"    
#&gt;  [5] "May"       "June"      "July"      "August"   
#&gt;  [9] "September" "October"   "November"  "December"
str_replace_all(month.name, '[1-5]', '*')
#&gt;  [1] "January"   "February"  "March"     "April"    
#&gt;  [5] "May"       "June"      "July"      "August"   
#&gt;  [9] "September" "October"   "November"  "December"
str_replace_all(month.name, '[a-zA-Z0-9]', '*')
#&gt;  [1] "*******"   "********"  "*****"     "*****"    
#&gt;  [5] "***"       "****"      "****"      "******"   
#&gt;  [9] "*********" "*******"   "********"  "********"

# anything but
str_replace_all(month.name, '[^aeiou]', '*')
#&gt;  [1] "*a*ua**"   "*e**ua**"  "*a***"     "***i*"    
#&gt;  [5] "*a*"       "*u*e"      "*u**"      "*u*u**"   
#&gt;  [9] "*e**e**e*" "***o*e*"   "*o*e**e*"  "*e*e**e*"
str_replace_all(month.name, '[^a-z]', '*')
#&gt;  [1] "*anuary"   "*ebruary"  "*arch"     "*pril"    
#&gt;  [5] "*ay"       "*une"      "*uly"      "*ugust"   
#&gt;  [9] "*eptember" "*ctober"   "*ovember"  "*ecember"
<p><strong>groups</strong></p>
<div class="sourceCode" id="cb242"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">'(s{2})e'</span>, <span class="va">state.name</span><span class="op">)</span>
<span class="co">#&gt; [1] "Tennessee"</span></code></pre></div>
<p><strong>anchors</strong></p>
<div class="sourceCode" id="cb243"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># start of a string</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'^J'</span>, <span class="st">'j'</span><span class="op">)</span>
<span class="co">#&gt;  [1] "january"   "February"  "March"     "April"    </span>
<span class="co">#&gt;  [5] "May"       "june"      "july"      "August"   </span>
<span class="co">#&gt;  [9] "September" "October"   "November"  "December"</span>

<span class="co"># end of a string</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'ber$'</span>, <span class="st">'ba'</span><span class="op">)</span>
<span class="co">#&gt;  [1] "January"  "February" "March"    "April"    "May"     </span>
<span class="co">#&gt;  [6] "June"     "July"     "August"   "Septemba" "Octoba"  </span>
<span class="co">#&gt; [11] "Novemba"  "Decemba"</span></code></pre></div>
<p><strong>quantifiers</strong></p>
<div class="sourceCode" id="cb244"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># match 's' zero or one time</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'s?'</span><span class="op">)</span>
<span class="co">#&gt;  [1] "January"   "February"  "March"     "April"    </span>
<span class="co">#&gt;  [5] "May"       "June"      "July"      "August"   </span>
<span class="co">#&gt;  [9] "September" "October"   "November"  "December"</span>
<span class="co"># match 'J' one or more times</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'J+'</span><span class="op">)</span>
<span class="co">#&gt; [1] "January" "June"    "July"</span>
<span class="co"># match 'e' one or more times</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="va">state.name</span>, <span class="st">'e+'</span><span class="op">)</span>
<span class="co">#&gt;  [1] "Connecticut"   "Delaware"      "Georgia"      </span>
<span class="co">#&gt;  [4] "Kentucky"      "Maine"         "Massachusetts"</span>
<span class="co">#&gt;  [7] "Minnesota"     "Nebraska"      "Nevada"       </span>
<span class="co">#&gt; [10] "New Hampshire" "New Jersey"    "New Mexico"   </span>
<span class="co">#&gt; [13] "New York"      "Oregon"        "Pennsylvania" </span>
<span class="co">#&gt; [16] "Rhode Island"  "Tennessee"     "Texas"        </span>
<span class="co">#&gt; [19] "Vermont"       "West Virginia"</span>
<span class="co"># matched 'y', zero or more times</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'y*'</span><span class="op">)</span>
<span class="co">#&gt;  [1] "January"   "February"  "March"     "April"    </span>
<span class="co">#&gt;  [5] "May"       "June"      "July"      "August"   </span>
<span class="co">#&gt;  [9] "September" "October"   "November"  "December"</span>
<span class="co"># matched 'a', zero or more times</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'a*'</span><span class="op">)</span>
<span class="co">#&gt;  [1] "January"   "February"  "March"     "April"    </span>
<span class="co">#&gt;  [5] "May"       "June"      "July"      "August"   </span>
<span class="co">#&gt;  [9] "September" "October"   "November"  "December"</span>
<span class="co"># match 'a' zero or more times and 'y'</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'a*y'</span><span class="op">)</span>
<span class="co">#&gt; [1] "January"  "February" "May"      "July"</span>
<span class="co"># match 'y' zero or more times and 'a'</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="va">month.name</span>, <span class="st">'y*a'</span><span class="op">)</span>
<span class="co">#&gt; [1] "January"  "February" "March"    "May"</span>
<span class="co"># match 's', exactly 2 times</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="va">state.name</span>, <span class="st">"s{2}"</span><span class="op">)</span>
<span class="co">#&gt; [1] "Massachusetts" "Mississippi"   "Missouri"     </span>
<span class="co">#&gt; [4] "Tennessee"</span>
<span class="co"># match 's', exactly 1 or more times</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="va">state.name</span>, <span class="st">"s{1,}"</span><span class="op">)</span>
<span class="co">#&gt;  [1] "Alaska"        "Arkansas"      "Illinois"     </span>
<span class="co">#&gt;  [4] "Kansas"        "Louisiana"     "Massachusetts"</span>
<span class="co">#&gt;  [7] "Minnesota"     "Mississippi"   "Missouri"     </span>
<span class="co">#&gt; [10] "Nebraska"      "New Hampshire" "New Jersey"   </span>
<span class="co">#&gt; [13] "Pennsylvania"  "Rhode Island"  "Tennessee"    </span>
<span class="co">#&gt; [16] "Texas"         "Washington"    "West Virginia"</span>
<span class="co">#&gt; [19] "Wisconsin"</span>
<span class="co"># match 's', exactly 1 or 2 times</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="va">state.name</span>, <span class="st">"s{1,2}"</span><span class="op">)</span>
<span class="co">#&gt;  [1] "Alaska"        "Arkansas"      "Illinois"     </span>
<span class="co">#&gt;  [4] "Kansas"        "Louisiana"     "Massachusetts"</span>
<span class="co">#&gt;  [7] "Minnesota"     "Mississippi"   "Missouri"     </span>
<span class="co">#&gt; [10] "Nebraska"      "New Hampshire" "New Jersey"   </span>
<span class="co">#&gt; [13] "Pennsylvania"  "Rhode Island"  "Tennessee"    </span>
<span class="co">#&gt; [16] "Texas"         "Washington"    "West Virginia"</span>
<span class="co">#&gt; [19] "Wisconsin"</span></code></pre></div>

</div>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="advanced-data-manipulation.html"><span class="header-section-number">4</span> Advanced data manipulation</a></div>
<div class="next"><a href="modern-graphics.html"><span class="header-section-number">6</span> Modern graphics</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#tidyverse-r"><span class="header-section-number">5</span> Tidyverse R</a></li>
<li>
<a class="nav-link" href="#the-tibble"><span class="header-section-number">5.1</span> The tibble</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#tr-import"><span class="header-section-number">5.1.1</span> Importing data</a></li>
<li><a class="nav-link" href="#tibbles-are-data-frames"><span class="header-section-number">5.1.2</span> Tibbles are data frames</a></li>
<li><a class="nav-link" href="#tr-export"><span class="header-section-number">5.1.3</span> Exporting data</a></li>
<li><a class="nav-link" href="#tr-inspect"><span class="header-section-number">5.1.4</span> Check for tibble</a></li>
<li><a class="nav-link" href="#creating-a-tibble"><span class="header-section-number">5.1.5</span> Creating a tibble</a></li>
<li><a class="nav-link" href="#adding-columns"><span class="header-section-number">5.1.6</span> Adding columns</a></li>
<li><a class="nav-link" href="#adding-rows-1"><span class="header-section-number">5.1.7</span> Adding rows</a></li>
<li><a class="nav-link" href="#converting-to-tibble"><span class="header-section-number">5.1.8</span> Converting to tibble</a></li>
<li><a class="nav-link" href="#tr-row-names"><span class="header-section-number">5.1.9</span> Manipulating row names</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#tr-factor"><span class="header-section-number">5.2</span> Manipulating categorical data with forcats</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#inspecting-factors"><span class="header-section-number">5.2.1</span> Inspecting factors</a></li>
<li><a class="nav-link" href="#reordering-levels-by-their-order-in-data"><span class="header-section-number">5.2.2</span> Reordering levels by their order in data</a></li>
<li><a class="nav-link" href="#restructuring-levels-and-their-labels"><span class="header-section-number">5.2.3</span> Restructuring levels and their labels</a></li>
<li><a class="nav-link" href="#remove-and-add-levels"><span class="header-section-number">5.2.4</span> Remove and add levels</a></li>
<li><a class="nav-link" href="#dropping-unused-levels"><span class="header-section-number">5.2.5</span> dropping unused levels</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#data-manipulation-with-dplyr-and-tidyr"><span class="header-section-number">5.3</span> Data Manipulation with dplyr and tidyr</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#rename-columns-and-rows"><span class="header-section-number">5.3.1</span> Rename columns and rows</a></li>
<li><a class="nav-link" href="#select-columns-and-filter-rows"><span class="header-section-number">5.3.2</span> Select columns and filter rows</a></li>
<li><a class="nav-link" href="#selecting-a-single-column"><span class="header-section-number">5.3.3</span> Selecting a single column</a></li>
<li><a class="nav-link" href="#tr-filter-rows"><span class="header-section-number">5.3.4</span> Filtering rows</a></li>
<li><a class="nav-link" href="#slicing"><span class="header-section-number">5.3.5</span> Slicing</a></li>
<li><a class="nav-link" href="#top-values"><span class="header-section-number">5.3.6</span> Top values</a></li>
<li><a class="nav-link" href="#using-select-and-filter"><span class="header-section-number">5.3.7</span> Using select and filter</a></li>
<li><a class="nav-link" href="#pipe-operator"><span class="header-section-number">5.3.8</span> Pipe operator</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#tr-changing"><span class="header-section-number">5.4</span> Manipulating Columns</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#inserting-a-new-column-1"><span class="header-section-number">5.4.1</span> Inserting a new column</a></li></ul>
</li>
<li>
<a class="nav-link" href="#sorting-and-ranking-1"><span class="header-section-number">5.5</span> Sorting and ranking</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#tr-sort"><span class="header-section-number">5.5.1</span> Sorting</a></li>
<li><a class="nav-link" href="#ranking-1"><span class="header-section-number">5.5.2</span> Ranking</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#splitting-and-merging-columns-1"><span class="header-section-number">5.6</span> Splitting and Merging columns</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#splitting-columns-1"><span class="header-section-number">5.6.1</span> Splitting columns</a></li>
<li><a class="nav-link" href="#merging-columns-1"><span class="header-section-number">5.6.2</span> Merging columns</a></li>
<li><a class="nav-link" href="#rearranging-columns"><span class="header-section-number">5.6.3</span> Rearranging columns</a></li>
<li><a class="nav-link" href="#deleting-columns-of-data"><span class="header-section-number">5.6.4</span> Deleting columns of data</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#manipulating-rows-1"><span class="header-section-number">5.7</span> Manipulating Rows</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#inserting-rows"><span class="header-section-number">5.7.1</span> Inserting rows</a></li>
<li><a class="nav-link" href="#updating-rows-of-data-1"><span class="header-section-number">5.7.2</span> Updating rows of data</a></li>
<li><a class="nav-link" href="#updating-a-single-value-1"><span class="header-section-number">5.7.3</span> Updating a single value</a></li>
<li><a class="nav-link" href="#deleting-rows-of-data"><span class="header-section-number">5.7.4</span> Deleting rows of data</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#tr-joins"><span class="header-section-number">5.8</span> Combine data: concatenate, join and merge</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#concatenating-tibbles"><span class="header-section-number">5.8.1</span> Concatenating tibbles</a></li>
<li><a class="nav-link" href="#combining-datasets-using-bind_cols"><span class="header-section-number">5.8.2</span> Combining datasets using bind_cols()</a></li>
<li><a class="nav-link" href="#joining-data-frames-using-set-operations"><span class="header-section-number">5.8.3</span> Joining data frames using Set Operations</a></li>
<li><a class="nav-link" href="#union"><span class="header-section-number">5.8.4</span> Union</a></li>
<li><a class="nav-link" href="#differences"><span class="header-section-number">5.8.5</span> Differences</a></li>
<li><a class="nav-link" href="#left-join-1"><span class="header-section-number">5.8.6</span> Left join</a></li>
<li><a class="nav-link" href="#right-join-1"><span class="header-section-number">5.8.7</span> Right join</a></li>
<li><a class="nav-link" href="#inner-join-1"><span class="header-section-number">5.8.8</span> Inner join</a></li>
<li><a class="nav-link" href="#full-join"><span class="header-section-number">5.8.9</span> Full join</a></li>
<li><a class="nav-link" href="#anti-join"><span class="header-section-number">5.8.10</span> Anti join</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#tr-summary"><span class="header-section-number">5.9</span> Aggregating and grouping data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#aggregating"><span class="header-section-number">5.9.1</span> Aggregating</a></li>
<li><a class="nav-link" href="#grouping-data"><span class="header-section-number">5.9.2</span> Grouping data</a></li>
<li><a class="nav-link" href="#splitting-data-frame-by-groups"><span class="header-section-number">5.9.3</span> Splitting data frame by groups</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#tr-reshape"><span class="header-section-number">5.10</span> Pivoting and unpivoting data with tidyr</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#pivoting-1"><span class="header-section-number">5.10.1</span> Pivoting</a></li>
<li><a class="nav-link" href="#unpivoting-1"><span class="header-section-number">5.10.2</span> Unpivoting</a></li>
</ul>
</li>
<li><a class="nav-link" href="#dealing-with-duplicate-values-with-dplyr"><span class="header-section-number">5.11</span> Dealing with duplicate values with dplyr</a></li>
<li>
<a class="nav-link" href="#dealing-with-na-values-with-tidyr"><span class="header-section-number">5.12</span> Dealing with NA values with tidyr</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#replacing-missing-values-by-locf"><span class="header-section-number">5.12.1</span> Replacing missing values by LOCF</a></li>
<li><a class="nav-link" href="#replacing-missing-values-by-nocb"><span class="header-section-number">5.12.2</span> Replacing missing values by NOCB</a></li>
<li><a class="nav-link" href="#replacing-na-values-by-a-constant"><span class="header-section-number">5.12.3</span> Replacing NA values by a constant</a></li>
<li><a class="nav-link" href="#replacing-na-values-by-groups"><span class="header-section-number">5.12.4</span> Replacing NA values by groups</a></li>
<li><a class="nav-link" href="#dropping-na-values"><span class="header-section-number">5.12.5</span> Dropping NA values</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#outliers"><span class="header-section-number">5.13</span> Outliers</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#what-is-an-outlier-1"><span class="header-section-number">5.13.1</span> What is an outlier?</a></li>
<li><a class="nav-link" href="#identifying-outlier-1"><span class="header-section-number">5.13.2</span> Identifying outlier</a></li>
<li><a class="nav-link" href="#using-plots-1"><span class="header-section-number">5.13.3</span> Using plots</a></li>
<li><a class="nav-link" href="#outliers-by-groups"><span class="header-section-number">5.13.4</span> Outliers by groups</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#tr-string"><span class="header-section-number">5.14</span> String manipulation with stringr</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#determine-string-length"><span class="header-section-number">5.14.1</span> Determine string length</a></li>
<li><a class="nav-link" href="#strings-formatting-case-conversion"><span class="header-section-number">5.14.2</span> Strings formatting (case conversion)</a></li>
<li><a class="nav-link" href="#join-and-split-strings-1"><span class="header-section-number">5.14.3</span> Join and Split strings</a></li>
<li><a class="nav-link" href="#joining-using-str_glue"><span class="header-section-number">5.14.4</span> Joining using str_glue()</a></li>
<li><a class="nav-link" href="#splitting-strings-using-str_split-and-str_split_fixed"><span class="header-section-number">5.14.5</span> Splitting strings using str_split() and str_split_fixed()</a></li>
<li><a class="nav-link" href="#extract-and-replace-part-of-a-string"><span class="header-section-number">5.14.6</span> Extract and Replace part of a string</a></li>
<li><a class="nav-link" href="#replacing-string-values-using-str_replace"><span class="header-section-number">5.14.7</span> Replacing string values using str_replace()</a></li>
<li><a class="nav-link" href="#replacing-string-values-using-str_replace_all"><span class="header-section-number">5.14.8</span> Replacing string values using str_replace_all()</a></li>
<li><a class="nav-link" href="#sorting"><span class="header-section-number">5.14.9</span> Sorting</a></li>
<li><a class="nav-link" href="#duplicating-strings"><span class="header-section-number">5.14.10</span> Duplicating strings</a></li>
<li><a class="nav-link" href="#pattern-matching-using-regular-expression-1"><span class="header-section-number">5.14.11</span> Pattern matching using regular expression</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/abarik/advancedr_2021_22_1/blob/master/04-tidyverser.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/abarik/advancedr_2021_22_1/edit/master/04-tidyverser.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Advanced R</strong>" was written by Kálmán Abari. It was last built on 2021-10-22.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
